(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"1O5Y":function(l,e,n){"use strict";var t=n("Mlb/"),u=n("jmHW"),a=n("pk7F"),i=n("Ienz"),s=n("P6pJ"),r=n("vk2e"),o=n("dPh1"),c=n("yi+q"),b=n("X/tG"),d=n("aWYc"),h=n("nkAL"),m=n("Jt2c"),p=n("5EQ0"),g=n("ba/H"),f=n("Myyq"),v=n("F5Xg"),y=n("EYJY"),I=n("O6Zd"),S=n("ccoi"),k=n("Rtcc");class L{constructor(l,e){this.searchStateService=l,this.searchResultService=e,this.onDestroy=new y.a}ngOnInit(){const l=this.searchStateService.getListModel();this.listId=l.id,this.collectionId=this.searchStateService.getActiveSearch().collectionId,this.initialEntityIdsInList$=this.searchResultService.getFullSearchResults([k.a.Fields.identifier],k.a.Collections.identifiers).pipe(Object(I.a)(l=>l.data.entities.map(l=>l.properties.identifier.uuid))),this.searchStateService.getActiveSearchObservable().pipe(Object(S.a)(this.onDestroy)).subscribe(l=>this.collectionId=l.collectionId)}ngOnDestroy(){this.onDestroy.next()}refreshResults(){this.searchResultService.search(null,!0)}clearInput(){this.quickAdd.clearInput()}}var C=n("qFRT"),E=n("EwV0"),O=t.sb({encapsulation:0,styles:[[""]],data:{}});function G(l){return t.Qb(0,[t.Mb(671088640,1,{quickAdd:0}),(l()(),t.ub(1,0,null,null,2,"quick-add",[["appearance","narrow"],["class","flex flex-gt-xs-none cb-margin-medium-left"]],null,[[null,"itemAdded"],[null,"itemRemoved"]],function(l,e,n){var t=!0,u=l.component;return"itemAdded"===e&&(t=!1!==u.refreshResults()&&t),"itemRemoved"===e&&(t=!1!==u.refreshResults()&&t),t},o.b,o.a)),t.tb(2,770048,[[1,4]],0,c.a,[b.a,d.b,h.a,m.a,p.a,g.a,f.a,v.a],{listId:[0,"listId"],collectionId:[1,"collectionId"],initialEntityIdsInList:[2,"initialEntityIdsInList"],appearance:[3,"appearance"]},{itemAdded:"itemAdded",itemRemoved:"itemRemoved"}),t.Ib(131072,r.b,[t.h])],function(l,e){var n=e.component;l(e,2,0,n.listId,n.collectionId,t.Pb(e,2,2,t.Gb(e,3).transform(n.initialEntityIdsInList$)),"narrow")},null)}var P=n("Uy3s"),w=n("soOm"),x=n("GKMj"),_=n("sl8x"),T=n("0KxO"),R=n("Wrdk"),A=n("qpUv"),D=n("k6lf"),F=n("ivOl"),M=n("m6lo"),V=n("qk26"),Q=n("9b0e"),B=n("6YJn"),N=n("Htug"),q=n("nJV+"),K=n("EjzE"),U=n("QBrs"),H=n("BRL0"),j=n("9va6");class z{constructor(l,e){this.drillInService=l,this.logService=e,this.links=[]}ngOnInit(){this.logger=this.logService.getLogger("DrillInMenuComponent"),this.loaded=!1,this.errored=!1,this.identifierUuid=this.getIdentifierUuid(this.identifierFieldData),this.canLoadIdentifierLinks=this.drillInService.canLoadIdentifierLinks()}openMenu(){this.loaded||this.loadIdentifierLinks(this.identifierUuid)}getIdentifierUuid(l){if(!Object(j.isEmpty)(l)){let e=l.uuid;if(e)return e;this.logger.error("Identifier field present but had no uuid",{identifier:l})}return null}loadIdentifierLinks(l){this.drillInService.getIdentifierLinks(l).then(l=>{this.links=l,this.loaded=!0},l=>this.handleDrillInError(l))}handleDrillInError(l){this.errored=!0,this.loaded=!1,this.logger.error("Error showing drill-in menu",l)}}var $=n("ue+9"),J=n("7k2d");let W=(()=>{class l{constructor(l,e,n,t,u){this.labelsService=l,this.metadataService=e,this.permissionService=n,this.searchStateService=t,this.searchApi=u}getIdentifierLinks(l){let{collectionId:e}=this.searchStateService.getSearchInfo(),n=this.getSubqueries(),t=[];return Object(j.forEach)(n,n=>{let u=n.toModel().query;u.push(this.getParentIdentifierPredicate(l));let a=this.metadataService.getRelationshipByCollectionId(e,n.relCollectionId),i=this.getCollectionFieldIds(a.collection_id);if(i.length>0){let l={query:u,limit:this.permissionService.getSearchResultLimit(),field_ids:i,order:[]},e=this.buildSlug(a.collection_id,l).then(l=>this.buildLink("CBL.SEARCH.DRILL_IN_IDENTIFIER",a.collection_id,l.data),l=>Promise.reject(l));t.push(e)}}),Promise.all(t)}canLoadIdentifierLinks(){let l=this.getSubqueries();return l.length>0&&this.hasDefaultColumns(l)}hasDefaultColumns(l){let e=!1;return Object(j.forEach)(l,l=>{if(this.getCollectionFieldIds(l.relCollectionId).length>0)return e=!0,!1}),e}buildLink(l,e,n){let t=this.metadataService.getEntityDef(e);return{label:this.labelsService.getInterpolatedLabel(l,{type:t.labels.plural}),route:["/search",e,n.slug]}}buildSlug(l,e){return this.searchApi.mdSearchesCollectionIdPost(l,void 0,e)}getParentIdentifierPredicate(l){return{type:$.F.TypeEnum.parent_predicate,operator_id:"eq",values:[l]}}getCollectionFieldIds(l){return this.metadataService.getDefaultColumns(l).map(l=>l.field_id)}getSubqueries(){let l=this.searchStateService.getSearchQueryItems();return Object(j.filter)(l,l=>l.getType()===$.F.TypeEnum.sub_query)}}return l.ngInjectableDef=t.Ub({factory:function(){return new l(t.Vb(g.a),t.Vb(h.a),t.Vb(_.a),t.Vb(C.a),t.Vb(J.a))},token:l,providedIn:"root"}),l})();var Y=t.sb({encapsulation:2,styles:[],data:{}});function X(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,5,null,null,null,null,null,null,null)),(l()(),t.ub(1,0,null,null,4,"a",[["class","drill-link layout-row layout-align-start-center mat-menu-item"],["mat-menu-item",""]],[[1,"aria-label",0],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0],[1,"target",0],[8,"href",4]],[[null,"click"],[null,"mouseenter"]],function(l,e,n){var u=!0;return"click"===e&&(u=!1!==t.Gb(l,2)._checkDisabled(n)&&u),"mouseenter"===e&&(u=!1!==t.Gb(l,2)._handleMouseEnter()&&u),"click"===e&&(u=!1!==t.Gb(l,3).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&u),u},F.c,F.a)),t.tb(2,180224,[[1,4],[2,4]],0,M.f,[t.k,r.e,i.f,[2,M.b]],null,null),t.tb(3,671744,null,0,V.s,[V.p,V.a,r.l],{routerLink:[0,"routerLink"]},null),(l()(),t.ub(4,0,null,0,1,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(5,null,["",""]))],function(l,e){l(e,3,0,e.context.$implicit.route)},function(l,e){l(e,1,0,e.context.$implicit.label,t.Gb(e,2).role,t.Gb(e,2)._highlighted,t.Gb(e,2)._triggersSubmenu,t.Gb(e,2)._getTabIndex(),t.Gb(e,2).disabled.toString(),t.Gb(e,2).disabled||null,t.Gb(e,3).target,t.Gb(e,3).href),l(e,5,0,e.context.$implicit.label)})}function Z(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,X)),t.tb(2,278528,null,0,r.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"]},null)],function(l,e){l(e,2,0,e.component.links)},null)}function ll(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,4,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"aria-label",0],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(l,e,n){var u=!0;return"click"===e&&(u=!1!==t.Gb(l,1)._checkDisabled(n)&&u),"mouseenter"===e&&(u=!1!==t.Gb(l,1)._handleMouseEnter()&&u),u},F.c,F.a)),t.tb(1,180224,[[1,4],[2,4]],0,M.f,[t.k,r.e,i.f,[2,M.b]],null,null),t.Kb(2,1),(l()(),t.Ob(3,0,[" "," "])),t.Kb(4,1)],null,function(l,e){var n=t.Pb(e,0,0,l(e,2,0,t.Gb(e.parent.parent,0),"CBL.COMMON.OOPS"));l(e,0,0,n,t.Gb(e,1).role,t.Gb(e,1)._highlighted,t.Gb(e,1)._triggersSubmenu,t.Gb(e,1)._getTabIndex(),t.Gb(e,1).disabled.toString(),t.Gb(e,1).disabled||null);var u=t.Pb(e,3,0,l(e,4,0,t.Gb(e.parent.parent,0),"CBL.COMMON.OOPS"));l(e,3,0,u)})}function el(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,4,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"aria-label",0],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(l,e,n){var u=!0;return"click"===e&&(u=!1!==t.Gb(l,1)._checkDisabled(n)&&u),"mouseenter"===e&&(u=!1!==t.Gb(l,1)._handleMouseEnter()&&u),u},F.c,F.a)),t.tb(1,180224,[[1,4],[2,4]],0,M.f,[t.k,r.e,i.f,[2,M.b]],null,null),t.Kb(2,1),(l()(),t.Ob(3,0,[" "," "])),t.Kb(4,1)],null,function(l,e){var n=t.Pb(e,0,0,l(e,2,0,t.Gb(e.parent.parent,0),"CBL.COMMON.LOADING"));l(e,0,0,n,t.Gb(e,1).role,t.Gb(e,1)._highlighted,t.Gb(e,1)._triggersSubmenu,t.Gb(e,1)._getTabIndex(),t.Gb(e,1).disabled.toString(),t.Gb(e,1).disabled||null);var u=t.Pb(e,3,0,l(e,4,0,t.Gb(e.parent.parent,0),"CBL.COMMON.LOADING"));l(e,3,0,u)})}function nl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,25,"div",[["class","component--drill-in-menu"]],null,null,null,null,null)),(l()(),t.ub(1,16777216,null,null,4,"a",[["aria-haspopup","true"],["class","cb-link mat-menu-trigger"]],[[1,"aria-label",0],[1,"aria-expanded",0]],[[null,"click"],[null,"mousedown"],[null,"keydown"]],function(l,e,n){var u=!0,a=l.component;return"mousedown"===e&&(u=!1!==t.Gb(l,2)._handleMousedown(n)&&u),"keydown"===e&&(u=!1!==t.Gb(l,2)._handleKeydown(n)&&u),"click"===e&&(u=!1!==t.Gb(l,2)._handleClick(n)&&u),"click"===e&&(u=!1!==a.openMenu()&&u),u},null,null)),t.tb(2,1196032,null,0,M.h,[Q.c,t.k,t.P,M.c,[2,M.d],[8,null],[2,B.b],i.f],{menu:[0,"menu"]},null),t.Kb(3,1),(l()(),t.ub(4,0,null,null,1,"icon",[["class","search"],["color","inherit"],["key","search-menu"],["size","large"]],[[8,"className",0]],null,null,N.b,N.a)),t.tb(5,573440,null,0,q.a,[r.e,t.k],{key:[0,"key"],color:[1,"color"],size:[2,"size"],class:[3,"class"]},null),(l()(),t.ub(6,0,null,null,19,"mat-menu",[],null,null,null,F.d,F.b)),t.tb(7,1294336,[["drillInMenu",4]],3,M.i,[t.k,t.y,M.a],{overlapTrigger:[0,"overlapTrigger"]},null),t.Mb(603979776,1,{_allItems:1}),t.Mb(603979776,2,{items:1}),t.Mb(603979776,3,{lazyContent:0}),t.Lb(2048,null,M.d,null,[M.i]),t.Lb(2048,null,M.b,null,[M.d]),(l()(),t.ub(13,0,null,0,4,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(l,e,n){var u=!0;return"click"===e&&(u=!1!==t.Gb(l,14)._checkDisabled(n)&&u),"mouseenter"===e&&(u=!1!==t.Gb(l,14)._handleMouseEnter()&&u),u},F.c,F.a)),t.tb(14,180224,[[1,4],[2,4]],0,M.f,[t.k,r.e,i.f,[2,M.b]],null,null),(l()(),t.ub(15,0,null,0,2,"span",[],null,null,null,null,null)),(l()(),t.Ob(16,null,["",""])),t.Kb(17,1),(l()(),t.ub(18,0,null,0,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,K.b,K.a)),t.tb(19,49152,null,0,U.a,[],null,null),(l()(),t.kb(16777216,null,0,1,null,Z)),t.tb(21,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,0,1,null,ll)),t.tb(23,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,0,1,null,el)),t.tb(25,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,2,0,t.Gb(e,7)),l(e,5,0,"search-menu","inherit","large","search"),l(e,7,0,!1),l(e,21,0,n.loaded),l(e,23,0,n.errored),l(e,25,0,!n.loaded&&!n.errored)},function(l,e){var n=t.Pb(e,1,0,l(e,3,0,t.Gb(e.parent,0),"CBL.SEARCH.DRILL_IN"));l(e,1,0,n,t.Gb(e,2).menuOpen||null),l(e,4,0,t.Gb(e,5).classes),l(e,13,0,t.Gb(e,14).role,t.Gb(e,14)._highlighted,t.Gb(e,14)._triggersSubmenu,t.Gb(e,14)._getTabIndex(),t.Gb(e,14).disabled.toString(),t.Gb(e,14).disabled||null);var u=t.Pb(e,16,0,l(e,17,0,t.Gb(e.parent,0),"CBL.SEARCH.SHOW_MATCHING"));l(e,16,0,u),l(e,18,0,t.Gb(e,19).vertical?"vertical":"horizontal",t.Gb(e,19).vertical,!t.Gb(e,19).vertical,t.Gb(e,19).inset)})}function tl(l){return t.Qb(0,[t.Ib(0,H.a,[g.a]),(l()(),t.kb(16777216,null,null,1,null,nl)),t.tb(2,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,2,0,n.identifierUuid&&n.canLoadIdentifierLinks)},null)}var ul=n("y6+A"),al=n("NFli"),il=n("IGbz"),sl=n("ryMw"),rl=n("/T1k"),ol=n("ykfZ"),cl=n("J85h"),bl=n("wqFj"),dl=n("3iBx"),hl=n("4EDN"),ml=n("ZFGm"),pl=n("8aWl");let gl=(()=>{class l{constructor(l,e,n,t,u){this.labelsService=l,this.searchStateService=e,this.aggregateService=n,this.metadataService=t,this.fieldFormatterService=u}ngOnChanges(l){(l.resultsHeaders||l.fieldAggregates||l.search)&&this.updateAggregates()}isAggregateSelected(l,e){return"value_card"===l.type?e:l.type===this.selectedAggregateType}shouldShowAggregatesMenu(){let l=this.isValueCard(this.getSelectedAggregateType());return!l||l&&this.resultStats.totalCount>0}selectAggregate(l){if(this.selectedAggregateType=l.type,this.isValueCard(l.type)){let e=Object(j.findIndex)(this.formattedAggregates,l);e>-1&&this.formattedAggregates.splice(0,0,this.formattedAggregates.splice(e,1)[0])}else this.searchStateService.setSelectedFieldAggregateId(this.fieldId,l.type)}updateAggregates(){this.selectedAggregateType=this.getSelectedAggregateType(),this.formattedAggregates=this.getFormattedAggregates()}getSelectedAggregateType(){let{collectionId:l}=this.searchStateService.getSearchInfo(),e=this.searchStateService.getSelectedFieldAggregateId(this.fieldId),n=this.aggregateService.getDefaultFieldAggregateId(l,this.fieldId);return e||n}getFormattedAggregates(){let l=[];return Object(j.forEach)(this.fieldAggregates,(e,n)=>{this.hasSubAggregates(n)?this.isPercentiles(n)?Object(j.forEach)(e,(e,t)=>{l.push({type:n,subType:t,label:this.getSubAggregateLabel(n,t),value:this.formatAggregate(e)})}):this.isValueCard(n)&&(l=this.getFormattedValueCardAggregates(n,e)):l.push({type:n,label:this.getAggregateLabel(n),value:this.formatAggregate(e)})}),l}getFormattedValueCardAggregates(e,n){let{collectionId:t}=this.searchStateService.getSearchInfo(),u=[],a=this.resultStats.totalCount,i=this.getValueCardTotal(n),s=Object(j.keys)(n),r=Object(j.min)([s.length,l.MAX_VALUE_CARD_OPTIONS]),o=0,c=this.metadataService.getField(t,this.fieldId).type_id,b="enum_multi"!==c,d="enum_multi"!==c;for(let l=0;l<s.length;l++){let t=s[l],i=n[t];if(l<r){let l=this.getSubAggregateLabel(e,t),n=this.getFormattedPercent(i,a);l&&n&&u.push({type:e,subType:t,label:l,value:n})}else o+=i}if(b&&o>0&&u.push({type:e,label:this.labelsService.getLabel("CBL.SEARCH.STATISTICS.OTHERS"),value:this.getFormattedPercent(o,a)}),d&&i<a){let l=a-i;u.push({type:e,label:this.labelsService.getLabel("CBL.SEARCH.STATISTICS.EMPTY"),value:this.getFormattedPercent(l,a)})}return u}getFormattedPercent(l,e){return e>0?Object(j.round)(l/e*100,1)+"%":"0%"}getValueCardTotal(l){let e=0;return Object(j.forEach)(l,(l,n)=>{e+=l}),e}isValueCard(l){return"value_card"===l}isPercentiles(l){return"percentiles"===l}hasSubAggregates(l){return this.isPercentiles(l)||this.isValueCard(l)}formatAggregate(l){let{collectionId:e}=this.searchStateService.getSearchInfo(),n=this.metadataService.getField(e,this.fieldId);return this.fieldFormatterService.formatAggregate(n,l,pl.a.default)}getAggregateLabel(l){let e="CBL.SEARCH.STATISTICS."+Object(j.toUpper)(l);return this.labelsService.getLabel(e)}getSubAggregateLabel(l,e){let n;return this.isPercentiles(l)?n=this.getPercentileAggregateLabel(e):this.isValueCard(l)&&(n=this.getEnumAggregateLabel(e)),n||null}getPercentileAggregateLabel(l){let e="CBL.SEARCH.STATISTICS.PERCENTILES."+Object(j.toString)(Object(j.toInteger)(l));return this.labelsService.getLabel(e)}getEnumAggregateLabel(l){let{collectionId:e}=this.searchStateService.getSearchInfo(),n=this.metadataService.getField(e,this.fieldId),t=n&&n.labels&&n.labels.values;return t&&l&&t[l]?t[l]:null}}return l.MAX_VALUE_CARD_OPTIONS=4,l})();var fl=n("mEy4"),vl=t.sb({encapsulation:2,styles:[],data:{}});function yl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,4,"span",[["class","cb-padding-medium-right aggregate-contents flex layout-column layout-align-center-end"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,1,"span",[["class","cb-text-transform-none"]],null,null,null,null,null)),(l()(),t.Ob(2,null,["",""])),(l()(),t.ub(3,0,null,null,1,"span",[["class","cb-text-transform-none cb-font-weight-bold cb-font-size-medium"]],null,null,null,null,null)),(l()(),t.Ob(4,null,[" "," "]))],null,function(l,e){l(e,2,0,e.parent.context.$implicit.label),l(e,4,0,e.parent.context.$implicit.value)})}function Il(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,yl)),t.tb(2,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(0,null,null,0))],function(l,e){l(e,2,0,e.component.isAggregateSelected(e.context.$implicit,e.context.first))},null)}function Sl(l){return t.Qb(0,[(l()(),t.ub(0,16777216,null,null,8,"button",[["aria-haspopup","true"],["class","cb-border-radius-none selected-aggregate flex layout-column layout-align-center-stretch layout-fill mat-menu-trigger"],["mat-button",""],["type","button"]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-expanded",0]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],function(l,e,n){var u=!0;return"mousedown"===e&&(u=!1!==t.Gb(l,2)._handleMousedown(n)&&u),"keydown"===e&&(u=!1!==t.Gb(l,2)._handleKeydown(n)&&u),"click"===e&&(u=!1!==t.Gb(l,2)._handleClick(n)&&u),u},u.d,u.b)),t.tb(1,180224,null,0,a.b,[t.k,i.f,[2,s.a]],null,null),t.tb(2,1196032,null,0,M.h,[Q.c,t.k,t.P,M.c,[2,M.d],[8,null],[2,B.b],i.f],{menu:[0,"menu"]},null),(l()(),t.ub(3,0,null,0,5,"span",[["class","flex layout-row"]],null,null,null,null,null)),(l()(),t.ub(4,0,null,null,2,"div",[["class","cb-background-accent layout-column layout-align-center-center"]],null,null,null,null,null)),(l()(),t.ub(5,0,null,null,1,"icon",[["class","flex-none"],["color","light"],["key","chevron-up"]],[[8,"className",0]],null,null,N.b,N.a)),t.tb(6,573440,null,0,q.a,[r.e,t.k],{key:[0,"key"],color:[1,"color"],class:[2,"class"]},null),(l()(),t.kb(16777216,null,null,1,null,Il)),t.tb(8,278528,null,0,r.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"]},null),(l()(),t.kb(0,null,null,0))],function(l,e){var n=e.component;l(e,2,0,t.Gb(e.parent,6)),l(e,6,0,"chevron-up","light","flex-none"),l(e,8,0,n.formattedAggregates)},function(l,e){l(e,0,0,"CBL.SEARCH.STATISTICS.OPEN_SHEET",t.Gb(e,1).disabled||null,"NoopAnimations"===t.Gb(e,1)._animationMode,t.Gb(e,2).menuOpen||null),l(e,5,0,t.Gb(e,6).classes)})}function kl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,12,"div",[],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,11,"button",[["class","mat-menu-item"],["mat-menu-item",""],["type","button"]],[[1,"aria-label",0],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(l,e,n){var u=!0,a=l.component;return"click"===e&&(u=!1!==t.Gb(l,2)._checkDisabled(n)&&u),"mouseenter"===e&&(u=!1!==t.Gb(l,2)._handleMouseEnter()&&u),"click"===e&&(u=!1!==a.selectAggregate(l.context.$implicit)&&u),u},F.c,F.a)),t.tb(2,180224,[[1,4],[2,4]],0,M.f,[t.k,r.e,i.f,[2,M.b]],null,null),(l()(),t.ub(3,0,null,0,9,"span",[["class","layout-row layout-align-space-between-center"]],null,null,null,null,null)),(l()(),t.ub(4,0,null,null,3,"icon",[["class","cb-padding-none cb-margin-none flex-none"],["color","accent"],["key","check"]],[[8,"className",0]],null,null,N.b,N.a)),t.Lb(512,null,r.E,r.F,[t.r,t.s,t.k,t.D]),t.tb(6,278528,null,0,r.n,[r.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.tb(7,573440,null,0,q.a,[r.e,t.k],{key:[0,"key"],color:[1,"color"],class:[2,"class"]},null),(l()(),t.ub(8,0,null,null,4,"span",[["class","cb-padding-right-medium aggregate-contents flex-none layout-column layout-align-center-end"]],null,null,null,null,null)),(l()(),t.ub(9,0,null,null,1,"span",[["class","cb-text-transform-none"]],null,null,null,null,null)),(l()(),t.Ob(10,null,["",""])),(l()(),t.ub(11,0,null,null,1,"span",[["class","cb-text-transform-none cb-font-weight-bold cb-font-size-medium"]],null,null,null,null,null)),(l()(),t.Ob(12,null,[" "," "]))],function(l,e){l(e,6,0,"cb-padding-none cb-margin-none flex-none",e.component.isAggregateSelected(e.context.$implicit,e.context.first)?"cb-visible":"cb-hidden"),l(e,7,0,"check","accent","cb-padding-none cb-margin-none flex-none")},function(l,e){l(e,1,0,e.context.$implicit.label,t.Gb(e,2).role,t.Gb(e,2)._highlighted,t.Gb(e,2)._triggersSubmenu,t.Gb(e,2)._getTabIndex(),t.Gb(e,2).disabled.toString(),t.Gb(e,2).disabled||null),l(e,4,0,t.Gb(e,7).classes),l(e,10,0,e.context.$implicit.label),l(e,12,0,e.context.$implicit.value)})}function Ll(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,11,"div",[["class","component--aggregates layout-column layout-fill"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,Sl)),t.tb(2,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ub(3,0,null,null,8,"mat-menu",[["class","component--aggregates aggregate-sheet"]],null,null,null,F.d,F.b)),t.Lb(6144,null,M.d,null,[M.i]),t.Lb(6144,null,M.b,null,[M.d]),t.tb(6,1294336,[["aggregatesMenu",4]],3,M.i,[t.k,t.y,M.a],{overlapTrigger:[0,"overlapTrigger"],panelClass:[1,"panelClass"]},null),t.Mb(603979776,1,{_allItems:1}),t.Mb(603979776,2,{items:1}),t.Mb(603979776,3,{lazyContent:0}),(l()(),t.kb(16777216,null,0,1,null,kl)),t.tb(11,278528,null,0,r.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"]},null)],function(l,e){var n=e.component;l(e,2,0,n.shouldShowAggregatesMenu()),l(e,6,0,!1,"component--aggregates aggregate-sheet"),l(e,11,0,n.formattedAggregates)},null)}class Cl{getElementRef(){return this.footer}}var El=t.sb({encapsulation:2,styles:[],data:{}});function Ol(l){return t.Qb(2,[t.Mb(402653184,1,{footer:0}),(l()(),t.ub(1,0,[[1,0],["footer",1]],null,1,"div",[["class","component--grid-footer"]],null,null,null,null,null)),t.Fb(null,0)],null,null)}var Gl=n("BVFw"),Pl=n("AJGL"),wl=n("pees"),xl=n("xJk/"),_l=n("DJAz"),Tl=n("62RF"),Rl=n("szI2"),Al=n("cwgC"),Dl=n("iRHA"),Fl=n("lzeM"),Ml=n("oc/z"),Vl=n("lgVn");class Ql{constructor(l,e,n,t,u,a){this.localeNumberPipe=l,this.labelService=e,this.util=n,this.searchResultService=t,this.searchStateService=u,this.permService=a,this.canPageBack=!1,this.canPageForward=!1,this.showPageControls=!1,this.prevPageQueryParams={},this.nextPageQueryParams={},this.searchInProgressSubcription=this.searchResultService.getSearchInProgressObservable().subscribe(l=>{this.searchInProgress=l})}ngOnChanges(l){this.setup()}ngOnDestroy(){this.searchInProgressSubcription&&this.searchInProgressSubcription.unsubscribe()}setup(){let l=this.results,e=this.searchResultService.parsePageId(this.pageId);if(this.hasResults(l)){let{totalCount:n}=l.stats,{executionTimeLabel:t,resultCountLabel:u}=l.labels,{rangeLabel:a,resultLabel:i}=this.getSearchResultLabels(n,e.page,this.pageSize,u);this.rangeLabel=a,this.resultLabel=i,this.executionTimeLabel=t;let s=this.searchStateService.getListModel(),r=this.permService.getDisplaySearchResultLimit(s);this.prevPageQueryParams=this.getPrevPageQueryParams(),this.nextPageQueryParams=this.getNextPageQueryParams();let{showPageControls:o,canPageBack:c,canPageForward:b}=this.getPaginationSettings(e.page,this.pageSize,Math.min(r,n));this.showPageControls=o,this.canPageBack=c,this.canPageForward=b}}getPaginationSettings(l,e,n){let t=l>1,u=l<Object(j.ceil)(n/e);return{showPageControls:t||u,canPageBack:t,canPageForward:u}}getLastPageNumber(){let l=this.searchStateService.getListModel();return this.permService.getDisplaySearchResultLimit(l)/this.pageSize}getPrevPageQueryParams(){let l=Object(j.first)(this.results.entities),e=this.searchResultService.parsePageId(this.pageId);return e.page<=2||!l?{}:{pageId:this.searchResultService.getPageId(e.page-1,!1,l.properties.identifier.uuid)}}getNextPageQueryParams(){let l=Object(j.last)(this.results.entities),e=this.searchResultService.parsePageId(this.pageId);return e.page!==this.getLastPageNumber()&&l?{pageId:this.searchResultService.getPageId(e.page+1,!0,l.properties.identifier.uuid)}:{}}getSearchResultLabels(l,e,n,t){let u=null,a=null;if(!this.util.isUndefinedOrNull(l)&&!this.isForbiddenSearch()){const i=l<=n;1===l||i||(u=this.getRangeLabel(e,n,l)),a=t}return{rangeLabel:u,resultLabel:a}}isForbiddenSearch(){const l=this.searchResultService.getSearchError();return l&&l.code===Vl.t.CodeEnum.MD403}getRangeLabel(l,e,n){let t=(l-1)*e,u=t+e;return n<u&&(u=n),this.labelService.getInterpolatedLabel("CBL.SEARCH.RESULTS_RANGE",{start:this.localeNumberPipe.transform(t+=1),end:this.localeNumberPipe.transform(u)})}hasResults(l){return!Object(j.isEmpty)(l)&&Object(j.has)(l,"stats")&&Object(j.has)(l,"labels")&&Object(j.has)(l,"entities")&&Object(j.isArray)(l.entities)}}var Bl=n("omos"),Nl=t.sb({encapsulation:2,styles:[],data:{}});function ql(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,13,"a",[["class","page-button-prev"],["color","primary"],["mat-button",""]],[[1,"aria-label",0],[1,"tabindex",0],[1,"disabled",0],[1,"aria-disabled",0],[2,"_mat-animation-noopable",null],[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,e,n){var u=!0;return"click"===e&&(u=!1!==t.Gb(l,4)._haltDisabledEvents(n)&&u),"click"===e&&(u=!1!==t.Gb(l,5).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&u),u},u.c,u.a)),t.Lb(512,null,r.E,r.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,r.n,[r.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(3,{"cb-link-noevents":0}),t.tb(4,180224,null,0,a.a,[i.f,t.k,[2,s.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),t.tb(5,671744,null,0,V.s,[V.p,V.a,r.l],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),t.Hb(6,1),t.Kb(7,1),(l()(),t.ub(8,0,null,0,5,"div",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(9,0,null,null,1,"icon",[["class","flex-none"],["color","inherit"],["key","chevron-left"]],[[8,"className",0]],null,null,N.b,N.a)),t.tb(10,573440,null,0,q.a,[r.e,t.k],{key:[0,"key"],color:[1,"color"],class:[2,"class"]},null),(l()(),t.ub(11,0,null,null,2,"span",[["class","flex-noshrink"]],null,null,null,null,null)),(l()(),t.Ob(12,null,["",""])),t.Kb(13,1)],function(l,e){var n=e.component,t=l(e,3,0,!n.canPageBack||n.searchInProgress);l(e,2,0,"page-button-prev",t),l(e,4,0,!n.canPageBack||n.searchInProgress,"primary");var u=n.prevPageQueryParams,a=l(e,6,0,"./");l(e,5,0,u,a),l(e,10,0,"chevron-left","inherit","flex-none")},function(l,e){var n=t.Pb(e,0,0,l(e,7,0,t.Gb(e.parent,0),"CBL.SEARCH.RESULTS_PREVIOUS"));l(e,0,0,n,t.Gb(e,4).disabled?-1:t.Gb(e,4).tabIndex||0,t.Gb(e,4).disabled||null,t.Gb(e,4).disabled.toString(),"NoopAnimations"===t.Gb(e,4)._animationMode,t.Gb(e,5).target,t.Gb(e,5).href),l(e,9,0,t.Gb(e,10).classes);var u=t.Pb(e,12,0,l(e,13,0,t.Gb(e.parent,0),"CBL.SEARCH.RESULTS_PREVIOUS"));l(e,12,0,u)})}function Kl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,13,"a",[["class","page-button-next"],["color","primary"],["mat-button",""],["type","button"]],[[1,"aria-label",0],[1,"tabindex",0],[1,"disabled",0],[1,"aria-disabled",0],[2,"_mat-animation-noopable",null],[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,e,n){var u=!0;return"click"===e&&(u=!1!==t.Gb(l,4)._haltDisabledEvents(n)&&u),"click"===e&&(u=!1!==t.Gb(l,5).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&u),u},u.c,u.a)),t.Lb(512,null,r.E,r.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,r.n,[r.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(3,{"cb-link-noevents":0}),t.tb(4,180224,null,0,a.a,[i.f,t.k,[2,s.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),t.tb(5,671744,null,0,V.s,[V.p,V.a,r.l],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),t.Hb(6,1),t.Kb(7,1),(l()(),t.ub(8,0,null,0,5,"div",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(9,0,null,null,2,"span",[["class","flex-noshrink"]],null,null,null,null,null)),(l()(),t.Ob(10,null,["",""])),t.Kb(11,1),(l()(),t.ub(12,0,null,null,1,"icon",[["class","flex-none"],["color","inherit"],["key","chevron-right"]],[[8,"className",0]],null,null,N.b,N.a)),t.tb(13,573440,null,0,q.a,[r.e,t.k],{key:[0,"key"],color:[1,"color"],class:[2,"class"]},null)],function(l,e){var n=e.component,t=l(e,3,0,!n.canPageForward||n.searchInProgress);l(e,2,0,"page-button-next",t),l(e,4,0,!n.canPageForward||n.searchInProgress,"primary");var u=n.nextPageQueryParams,a=l(e,6,0,"./");l(e,5,0,u,a),l(e,13,0,"chevron-right","inherit","flex-none")},function(l,e){var n=t.Pb(e,0,0,l(e,7,0,t.Gb(e.parent,0),"CBL.SEARCH.RESULTS_NEXT"));l(e,0,0,n,t.Gb(e,4).disabled?-1:t.Gb(e,4).tabIndex||0,t.Gb(e,4).disabled||null,t.Gb(e,4).disabled.toString(),"NoopAnimations"===t.Gb(e,4)._animationMode,t.Gb(e,5).target,t.Gb(e,5).href);var u=t.Pb(e,10,0,l(e,11,0,t.Gb(e.parent,0),"CBL.SEARCH.RESULTS_NEXT"));l(e,10,0,u),l(e,12,0,t.Gb(e,13).classes)})}function Ul(l){return t.Qb(0,[t.Ib(0,H.a,[g.a]),(l()(),t.ub(1,0,null,null,8,"h3",[["class","component--results-info"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,ql)),t.tb(3,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.Ob(4,null,[" "," "])),(l()(),t.kb(16777216,null,null,1,null,Kl)),t.tb(6,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.Ob(7,null,[" "," "])),(l()(),t.ub(8,0,null,null,1,"span",[["class","executionInfo cb-font-weight-default cb-font-size-default cb-text-color-medium hide show-gt-sm"]],null,null,null,null,null)),(l()(),t.Ob(9,null,[" "," "]))],function(l,e){var n=e.component;l(e,3,0,n.showPageControls),l(e,6,0,n.showPageControls)},function(l,e){var n=e.component;l(e,4,0,n.rangeLabel),l(e,7,0,n.resultLabel),l(e,9,0,n.executionTimeLabel)})}var Hl=n("dvHj"),jl=n("Z7++"),zl=n("Kfqh"),$l=n("C0xW"),Jl=n("sYue"),Wl=n("/q/h");class Yl{constructor(l,e,n,t){this.searchStateService=l,this.searchResultService=e,this.aggregateService=n,this.permissionService=t}ngOnInit(){this.searchInProgress=!1}ngOnChanges(){this.isShowingStatistics=this.getIsShowingStatistics(),this.canShowStatistics=this.getCanShowStatistics(),this.showUpsell=this.getShowUpsell(),this.isListOwner=this.getIsListOwner()}isDisabled(){return!this.isShowingStatistics&&!this.canShowStatistics&&!this.showUpsell}isAvailable(){return!this.isShowingStatistics&&this.canShowStatistics&&!this.showUpsell}isUpsell(){return!this.isShowingStatistics&&this.showUpsell}isToggled(){return this.isShowingStatistics&&(!this.showUpsell||!this.isListOwner)}showStatistics(){this.searchStateService.enableFieldAggregators(),this.searchResultService.search()}hideStatistics(){this.searchStateService.disableFieldAggregators()}getCanShowStatistics(){let{collectionId:l}=this.searchStateService.getSearchInfo(),e=this.searchStateService.getSelectedColumns();return this.aggregateService.getFieldAggregators(l,e).length>0}getIsShowingStatistics(){return this.searchStateService.getFieldAggregators().length>0}getShowUpsell(){return!this.permissionService.canAggregateFields()}getIsListOwner(){let l=this.searchStateService.getListModel();return!(!l||!l.is_owner)}}var Xl=t.sb({encapsulation:2,styles:[],data:{}});function Zl(l){return t.Qb(0,[(l()(),t.ub(0,16777216,null,null,9,"div",[["class","cb-text-color-medium"]],null,[[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(l,e,n){var u=!0;return"longpress"===e&&(u=!1!==t.Gb(l,1).show()&&u),"keydown"===e&&(u=!1!==t.Gb(l,1)._handleKeydown(n)&&u),"touchend"===e&&(u=!1!==t.Gb(l,1)._handleTouchend()&&u),u},null,null)),t.tb(1,212992,null,0,Hl.d,[Q.c,t.k,jl.b,t.P,t.y,zl.a,i.c,i.f,Hl.b,[2,B.b],[2,Hl.a],[2,$l.g]],{message:[0,"message"]},null),t.Kb(2,1),(l()(),t.ub(3,0,null,null,6,"div",[["class","mat-button cb-text-transform-none"]],null,null,null,null,null)),(l()(),t.ub(4,0,null,null,5,"div",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(5,0,null,null,1,"icon",[["class","cb-margin-small-right flex-none"],["key","metrics"]],[[8,"className",0]],null,null,N.b,N.a)),t.tb(6,573440,null,0,q.a,[r.e,t.k],{key:[0,"key"],class:[1,"class"]},null),(l()(),t.ub(7,0,null,null,2,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(8,null,["",""])),t.Kb(9,1),(l()(),t.kb(0,null,null,0))],function(l,e){var n=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent,0),"CBL.SEARCH.STATISTICS.NO_COLUMNS_WITH_STATS"));l(e,1,0,n),l(e,6,0,"metrics","cb-margin-small-right flex-none")},function(l,e){l(e,5,0,t.Gb(e,6).classes);var n=t.Pb(e,8,0,l(e,9,0,t.Gb(e.parent,0),"CBL.SEARCH.STATISTICS.STATISTICS"));l(e,8,0,n)})}function le(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,9,"div",[],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,8,"button",[["class","cb-text-transform-none"],["mat-button",""],["type","button"]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.showStatistics()&&t),t},u.d,u.b)),t.tb(2,180224,null,0,a.b,[t.k,i.f,[2,s.a]],{disabled:[0,"disabled"]},null),t.Kb(3,1),(l()(),t.ub(4,0,null,0,5,"span",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(5,0,null,null,1,"icon",[["class","cb-margin-small-right flex-none"],["key","metrics"]],[[8,"className",0]],null,null,N.b,N.a)),t.tb(6,573440,null,0,q.a,[r.e,t.k],{key:[0,"key"],class:[1,"class"]},null),(l()(),t.ub(7,0,null,null,2,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(8,null,["",""])),t.Kb(9,1)],function(l,e){l(e,2,0,e.component.searchInProgress),l(e,6,0,"metrics","cb-margin-small-right flex-none")},function(l,e){var n=t.Pb(e,1,0,l(e,3,0,t.Gb(e.parent,0),"CBL.SEARCH.STATISTICS.SHOW"));l(e,1,0,n,t.Gb(e,2).disabled||null,"NoopAnimations"===t.Gb(e,2)._animationMode),l(e,5,0,t.Gb(e,6).classes);var u=t.Pb(e,8,0,l(e,9,0,t.Gb(e.parent,0),"CBL.SEARCH.STATISTICS.STATISTICS"));l(e,8,0,u)})}function ee(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,8,"button",[["class","cb-text-transform-none active"],["mat-button",""],["type","button"]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.hideStatistics()&&t),t},u.d,u.b)),t.tb(1,180224,null,0,a.b,[t.k,i.f,[2,s.a]],{disabled:[0,"disabled"]},null),t.Kb(2,1),(l()(),t.ub(3,0,null,0,5,"span",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(4,0,null,null,1,"icon",[["class","cb-margin-small-right flex-none"],["key","metrics"]],[[8,"className",0]],null,null,N.b,N.a)),t.tb(5,573440,null,0,q.a,[r.e,t.k],{key:[0,"key"],class:[1,"class"]},null),(l()(),t.ub(6,0,null,null,2,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(7,null,["",""])),t.Kb(8,1)],function(l,e){l(e,1,0,e.component.searchInProgress),l(e,5,0,"metrics","cb-margin-small-right flex-none")},function(l,e){var n=t.Pb(e,0,0,l(e,2,0,t.Gb(e.parent,0),"CBL.SEARCH.STATISTICS.STATISTICS"));l(e,0,0,n,t.Gb(e,1).disabled||null,"NoopAnimations"===t.Gb(e,1)._animationMode),l(e,4,0,t.Gb(e,5).classes);var u=t.Pb(e,7,0,l(e,8,0,t.Gb(e.parent,0),"CBL.SEARCH.STATISTICS.STATISTICS"));l(e,7,0,u)})}function ne(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"upsell-button",[["featureSet","aggregates"]],null,null,null,Jl.b,Jl.a)),t.tb(1,114688,null,0,Wl.a,[x.a],{label:[0,"label"],featureSet:[1,"featureSet"]},null),t.Kb(2,1)],function(l,e){var n=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent,0),"CBL.SEARCH.STATISTICS.STATISTICS"));l(e,1,0,n,"aggregates")},null)}function te(l){return t.Qb(0,[t.Ib(0,H.a,[g.a]),(l()(),t.ub(1,0,null,null,8,"div",[["class","component--aggregates-toggle"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,Zl)),t.tb(3,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,le)),t.tb(5,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,ee)),t.tb(7,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,ne)),t.tb(9,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,3,0,n.isDisabled()),l(e,5,0,n.isAvailable()),l(e,7,0,n.isToggled()),l(e,9,0,n.isUpsell())},null)}var ue=n("jKVQ");class ae{constructor(l,e,n,t,u){this.activeSearchExportService=l,this.permissionService=e,this.progressService=n,this.errorService=t,this.billingService=u,this.state$=Object(ue.b)({hasExportableColumns:this.activeSearchExportService.hasExportableColumns$(),hasPermission:this.permissionService.getPermissions().pipe(Object(I.a)(l=>l.canExportAsCsv()))})}ngOnInit(){this.upsellFeatureSet=this.billingService.isInProTrial()?"export_no_trial":"export"}export(){this.progressService.startProgress("SEARCH-EXPORT"),this.activeSearchExportService.exportToCsv$().subscribe({next:()=>this.progressService.stopProgress("SEARCH-EXPORT"),error:l=>{this.errorService.showToast(l),this.progressService.stopProgress("SEARCH-EXPORT")}})}}var ie=n("jV/k"),se=n("vfyW"),re=n("gb1R"),oe=n("e5VU"),ce=function(l){return l[l.NUMBER=0]="NUMBER",l[l.TEXT=1]="TEXT",l[l.PERMALINK=2]="PERMALINK",l[l.DATE=3]="DATE",l}({});let be=(()=>{class l{constructor(l,e,n,t,u,a,i,s){this.csvService=l,this.fieldFormatterService=e,this.metadataService=n,this.dialogService=t,this.permService=u,this.labelService=a,this.themeService=i,this.urlService=s}exportEntitiesToCsv(l,e,n,t){t=t||[];let u=this.buildExportTitle(l,e);this.checkForLimitAndExport(u,e,n,t)}hasExportableColumns(l,e){return this.getSuppressedColumns(l,e).length<e.length}checkForLimitAndExport(l,e,n,t){const u=this.permService.getDisplaySearchResultLimit();t.length>=u?this.showExportLimitWarning().then(u=>{u&&this.checkForSuppressionAndExport(l,e,n,t)}):this.checkForSuppressionAndExport(l,e,n,t)}checkForSuppressionAndExport(l,e,n,t){const u=this.getSuppressedColumns(e,n);u.length>0?this.showSuppressedColumnsWarning(e,u).then(a=>{a&&this.doCsvExport(l,e,Object(j.difference)(n,u),t)}):this.doCsvExport(l,e,n,t)}doCsvExport(l,e,n,t){let u=this.buildOutputColumns(e,n),a=this.buildFormattedData(u,t),i=u.map(l=>l.fieldName);this.csvService.downloadCSVData(l,i,a)}buildOutputColumns(e,n){let t=[];return n.forEach(n=>{let u=this.metadataService.getField(e,n),a=l.SUBFIELDS[u.type_id],i="";if(u.facet_id){const l=this.metadataService.getFacet(e,u.facet_id),n=this.metadataService.getFieldTheme(e,u.id);this.themeService.isPartnerTheme(n.id)&&l&&l.labels&&(i=`${l.labels.name} - `)}a?Object(j.forEach)(a,l=>{let e=this.getSuffix(l.suffixLabel);t.push({field:u,fieldName:`${i}${u.labels.name+e}`,subfieldId:l.id,subfieldType:l.type})}):t.push({field:u,fieldName:`${i}${u.labels.name}`})}),t}buildFormattedData(l,e){let n=[];return Object(j.forEach)(e,e=>{let t={};l.forEach(l=>{let n;(n=l.subfieldId?this.formatSubfield(l,e):this.fieldFormatterService.formatField(l.field,e.properties[l.field.id],pl.a.export).toString())===pl.b&&(n=""),t[l.fieldName]=n}),n.push(t)}),n}buildExportTitle(l,e){let n,t=(new Date).toLocaleDateString();return n=l?l+t:this.metadataService.getEntityDef(e).labels.plural+t,Object(j.kebabCase)(n)}showExportLimitWarning(){let l=this.labelService.getLabel("CBL.EXPORT.EXPORT_RESULT_LIMIT"),e=this.labelService.getInterpolatedLabel("CBL.EXPORT.ROW_LIMIT_EXPLANATION",{max:""+this.permService.getDisplaySearchResultLimit()}),n=this.labelService.getLabel("CBL.EXPORT.CONTINUE"),t=this.labelService.getLabel("CBL.COMMON.CANCEL");return this.dialogService.showConfirmation(l,e,n,t)}getSuffix(l){return l?" "+this.labelService.getLabel(l):""}formatSubfield(l,e){let n=e.properties[l.field.id];if(!Object(j.isObject)(n))return"";if(l.subfieldType===ce.PERMALINK){let l=this.urlService.getEntityExternalUrl(n);return this.urlService.getAbsoluteUrl(l)}{let e=n[l.subfieldId]||"";return l.subfieldType===ce.NUMBER?e=e.toString():l.subfieldType===ce.DATE&&(e=this.fieldFormatterService.formatField(l.field,n,pl.a.export)),e}}getSuppressedColumns(l,e){let n=this.metadataService.getEntityDef(l);return n&&n.display&&n.display.suppress_export?e:e.filter(e=>{let n=this.metadataService.getField(l,e),t=n&&this.metadataService.getFacet(l,n.facet_id);return!!(t&&t.display&&t.display.suppress_export)})}showSuppressedColumnsWarning(l,e){let n=e.map(e=>{let n=this.metadataService.getField(l,e);return n?n.labels.name:e}),t=this.labelService.getLabel("CBL.EXPORT.SUPPRESSED_WARNING"),u=this.labelService.getInterpolatedLabel("CBL.EXPORT.SUPPRESSED_WARNING_MESSAGE",{columns:n.join(", ")}),a=this.labelService.getLabel("CBL.EXPORT.CONTINUE"),i=this.labelService.getLabel("CBL.COMMON.CANCEL");return this.dialogService.showConfirmation(t,u,a,i)}}return l.SUBFIELDS={identifier:[{id:"value",type:ce.TEXT},{id:"permalink",suffixLabel:"CBL.SUBFIELDS.URL",type:ce.PERMALINK}],money:[{id:"value",type:ce.NUMBER},{id:"currency",suffixLabel:"CBL.SUBFIELDS.CURRENCY",type:ce.TEXT},{id:"value_usd",suffixLabel:"CBL.SUBFIELDS.CURRENCY_USD",type:ce.NUMBER}],money_decimal:[{id:"value",type:ce.NUMBER},{id:"currency",suffixLabel:"CBL.SUBFIELDS.CURRENCY",type:ce.TEXT},{id:"value_usd",suffixLabel:"CBL.SUBFIELDS.CURRENCY_USD",type:ce.NUMBER}],date_precision:[{id:"value",type:ce.DATE},{id:"precision",suffixLabel:"CBL.SUBFIELDS.PRECISION",type:ce.TEXT}]},l.ngInjectableDef=t.Ub({factory:function(){return new l(t.Vb(re.a),t.Vb(rl.b),t.Vb(h.a),t.Vb(x.a),t.Vb(_.a),t.Vb(g.a),t.Vb(D.a),t.Vb(oe.a))},token:l,providedIn:"root"}),l})(),de=(()=>{class l{constructor(l,e,n){this.searchStateService=l,this.searchResultService=e,this.exportService=n}exportToCsv$(){const l=this.searchStateService.getActiveSearch(),e=l&&l.getColumns();if(!e)return Object(ie.a)();const n=l.getList();return this.searchResultService.getFullSearchResults().pipe(Object(se.a)(t=>{this.exportService.exportEntitiesToCsv(n&&n.name,l.collectionId,e,t.data.entities)}),Object(I.a)(l=>void 0))}hasExportableColumns$(){return Object(ie.a)(!0)}}return l.ngInjectableDef=t.Ub({factory:function(){return new l(t.Vb(C.a),t.Vb(E.a),t.Vb(be))},token:l,providedIn:"root"}),l})();var he=n("rMqR"),me=t.sb({encapsulation:2,styles:[],data:{}});function pe(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,9,"button",[["disabled",""],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],null,null,u.d,u.b)),t.tb(1,180224,null,0,a.b,[t.k,i.f,[2,s.a]],{disabled:[0,"disabled"]},null),(l()(),t.ub(2,16777216,null,0,7,"span",[["class","layout-row layout-align-start-center"]],null,[[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(l,e,n){var u=!0;return"longpress"===e&&(u=!1!==t.Gb(l,3).show()&&u),"keydown"===e&&(u=!1!==t.Gb(l,3)._handleKeydown(n)&&u),"touchend"===e&&(u=!1!==t.Gb(l,3)._handleTouchend()&&u),u},null,null)),t.tb(3,212992,null,0,Hl.d,[Q.c,t.k,jl.b,t.P,t.y,zl.a,i.c,i.f,Hl.b,[2,B.b],[2,Hl.a],[2,$l.g]],{message:[0,"message"]},null),t.Kb(4,1),(l()(),t.ub(5,0,null,null,1,"icon",[["class","flex-none cb-margin-small-right"],["color","disabled"],["key","download"]],[[8,"className",0]],null,null,N.b,N.a)),t.tb(6,573440,null,0,q.a,[r.e,t.k],{key:[0,"key"],color:[1,"color"],class:[2,"class"]},null),(l()(),t.ub(7,0,null,null,2,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(8,null,["",""])),t.Kb(9,1)],function(l,e){l(e,1,0,"");var n=t.Pb(e,3,0,l(e,4,0,t.Gb(e.parent.parent,0),"CBL.SEARCH.EXPORT_ALL_SUPPRESSED"));l(e,3,0,n),l(e,6,0,"download","disabled","flex-none cb-margin-small-right")},function(l,e){l(e,0,0,t.Gb(e,1).disabled||null,"NoopAnimations"===t.Gb(e,1)._animationMode),l(e,5,0,t.Gb(e,6).classes);var n=t.Pb(e,8,0,l(e,9,0,t.Gb(e.parent.parent,0),"CBL.LISTS.EXPORT_AS_CSV"));l(e,8,0,n)})}function ge(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,7,"button",[["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.export()&&t),t},u.d,u.b)),t.tb(1,180224,null,0,a.b,[t.k,i.f,[2,s.a]],null,null),(l()(),t.ub(2,0,null,0,5,"span",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(3,0,null,null,1,"icon",[["class","flex-none cb-margin-small-right"],["key","download"]],[[8,"className",0]],null,null,N.b,N.a)),t.tb(4,573440,null,0,q.a,[r.e,t.k],{key:[0,"key"],class:[1,"class"]},null),(l()(),t.ub(5,0,null,null,2,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(6,null,["",""])),t.Kb(7,1)],function(l,e){l(e,4,0,"download","flex-none cb-margin-small-right")},function(l,e){l(e,0,0,t.Gb(e,1).disabled||null,"NoopAnimations"===t.Gb(e,1)._animationMode),l(e,3,0,t.Gb(e,4).classes);var n=t.Pb(e,6,0,l(e,7,0,t.Gb(e.parent.parent,0),"CBL.LISTS.EXPORT_AS_CSV"));l(e,6,0,n)})}function fe(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"upsell-button",[],null,null,null,Jl.b,Jl.a)),t.tb(1,114688,null,0,Wl.a,[x.a],{label:[0,"label"],featureSet:[1,"featureSet"]},null),t.Kb(2,1)],function(l,e){var n=e.component,u=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent.parent,0),"CBL.LISTS.EXPORT_AS_CSV"));l(e,1,0,u,n.upsellFeatureSet)},null)}function ve(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,6,null,null,null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,pe)),t.tb(2,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,ge)),t.tb(4,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,fe)),t.tb(6,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(0,null,null,0))],function(l,e){l(e,2,0,e.context.ngIf.hasPermission&&!e.context.ngIf.hasExportableColumns),l(e,4,0,e.context.ngIf.hasPermission&&e.context.ngIf.hasExportableColumns),l(e,6,0,!e.context.ngIf.hasPermission)},null)}function ye(l){return t.Qb(2,[t.Ib(0,H.a,[g.a]),(l()(),t.kb(16777216,null,null,2,null,ve)),t.tb(2,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),t.Ib(131072,r.b,[t.h])],function(l,e){var n=e.component;l(e,2,0,t.Pb(e,2,0,t.Gb(e,3).transform(n.state$)))},null)}n("aMtI"),n("89Cg"),n.d(e,"a",function(){return Ie}),n.d(e,"b",function(){return Be});var Ie=t.sb({encapsulation:2,styles:[],data:{}});function Se(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,6,"button",[["class","flex-none"],["color","accent"],["mat-raised-button",""],["type","submit"]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.searchClickHandler()&&t),t},u.d,u.b)),t.tb(1,180224,null,0,a.b,[t.k,i.f,[2,s.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),t.Ib(131072,r.b,[t.h]),t.Kb(3,1),(l()(),t.ub(4,0,null,0,2,"span",[],null,null,null,null,null)),(l()(),t.Ob(5,null,["",""])),t.Kb(6,1)],function(l,e){var n=e.component;l(e,1,0,t.Pb(e,1,0,t.Gb(e,2).transform(n.searchInProgress)),"accent")},function(l,e){var n=t.Pb(e,0,0,l(e,3,0,t.Gb(e.parent,0),"CBL.SEARCH.SEARCH"));l(e,0,0,n,t.Gb(e,1).disabled||null,"NoopAnimations"===t.Gb(e,1)._animationMode);var u=t.Pb(e,5,0,l(e,6,0,t.Gb(e.parent,0),"CBL.SEARCH.SEARCH"));l(e,5,0,u)})}function ke(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"results-quick-add",[],null,null,null,G,O)),t.tb(1,245760,[[1,4]],0,L,[C.a,E.a],null,null)],function(l,e){l(e,1,0)},null)}function Le(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"add-remove-buttons",[],null,[[null,"entriesRemoved"],[null,"clearSelected"]],function(l,e,n){var t=!0,u=l.component;return"entriesRemoved"===e&&(t=!1!==u.handleRemove()&&t),"clearSelected"===e&&(t=!1!==u.deselectAll()&&t),t},P.c,P.b)),t.tb(1,770048,null,0,w.a,[d.b,p.a,x.a,C.a,_.a,T.a,f.a],{searchId:[0,"searchId"],selectedEntities:[1,"selectedEntities"],selectedCount:[2,"selectedCount"],isCapped:[3,"isCapped"]},{entriesRemoved:"entriesRemoved",clearSelected:"clearSelected"})],function(l,e){var n=e.component;l(e,1,0,n.search.id,n.selectedRows,n.selectedRows.size,n.selectIsCapped)},null)}function Ce(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"grid-column-header",[],null,[[null,"removeSort"],[null,"sort"],[null,"move"],[null,"remove"]],function(l,e,n){var t=!0,u=l.component;return"removeSort"===e&&(t=!1!==u.removeSort(n)&&t),"sort"===e&&(t=!1!==u.setSort(n)&&t),"move"===e&&(t=!1!==u.moveColumn(n)&&t),"remove"===e&&(t=!1!==u.removeColumn(n)&&t),t},R.b,R.a)),t.tb(1,4308992,null,0,A.a,[t.k,t.D,g.a,D.a],{columnId:[0,"columnId"],isSheetGrid:[1,"isSheetGrid"],theme:[2,"theme"],facet:[3,"facet"],sortable:[4,"sortable"],currentSort:[5,"currentSort"],sortUpsell:[6,"sortUpsell"],movable:[7,"movable"],isFirst:[8,"isFirst"],isLast:[9,"isLast"],removable:[10,"removable"]},{sort:"sort",removeSort:"removeSort",move:"move",remove:"remove"}),(l()(),t.Ob(2,0,[" "," "]))],function(l,e){var n=e.component;l(e,1,1,[e.context.$implicit.id,!0,e.context.$implicit.theme,e.context.$implicit.facet,e.context.$implicit.isSortable,n.order&&n.order.field_id===e.context.$implicit.id?n.order.sort:"",e.context.$implicit.sortUpsell,!0,e.context.first,e.context.last,!0])},function(l,e){l(e,2,0,e.context.$implicit.labels&&e.context.$implicit.labels.name?e.context.$implicit.labels.name:e.context.$implicit.id)})}function Ee(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"div",[["class","flex-none cb-text-color-medium cb-margin-medium-left"]],null,null,null,null,null)),(l()(),t.Ob(1,null,[" ",". "]))],null,function(l,e){var n=e.component;l(e,1,0,e.parent.parent.context.index+1+n.pageSize*(n.currentPage-1))})}function Oe(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"drill-in-menu",[["class","flex-none cb-margin-medium-right"]],null,null,null,tl,Y)),t.tb(1,114688,null,0,z,[W,v.a],{identifierFieldData:[0,"identifierFieldData"]},null)],function(l,e){l(e,1,0,e.parent.parent.context.$implicit.properties[e.parent.context.$implicit.id])},null)}function Ge(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,9,"grid-cell",[],null,null,null,ul.b,ul.a)),t.tb(1,4243456,null,0,al.a,[t.k,t.D],{columnId:[0,"columnId"]},null),(l()(),t.kb(16777216,null,0,1,null,Ee)),t.tb(3,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ub(4,0,null,0,2,"field-formatter",[["class","cb-margin-medium-horizontal"]],null,null,null,il.b,il.a)),t.tb(5,114688,null,0,sl.a,[rl.b],{collectionId:[0,"collectionId"],field:[1,"field"],fieldData:[2,"fieldData"],queryData:[3,"queryData"]},null),t.Jb(6,{localProperties:0}),(l()(),t.ub(7,0,null,0,0,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,0,1,null,Oe)),t.tb(9,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,1,0,e.context.$implicit.id),l(e,3,0,0==e.context.index);var t=n.collectionId,u=e.context.$implicit,a=e.parent.context.$implicit.properties[e.context.$implicit.id],i=l(e,6,0,e.parent.context.$implicit.properties);l(e,5,0,t,u,a,i),l(e,9,0,"identifier"===(null==e.context.$implicit?null:e.context.$implicit.type_id)&&"identifier"===e.context.$implicit.id)},null)}function Pe(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,8,"grid-row",[],null,null,null,ol.b,ol.a)),t.tb(1,49152,[[8,4]],0,cl.a,[],null,null),(l()(),t.ub(2,0,null,0,4,"grid-cell",[["class","select"],["columnId","select"]],null,null,null,ul.b,ul.a)),t.tb(3,4243456,null,0,al.a,[t.k,t.D],{columnId:[0,"columnId"]},null),(l()(),t.ub(4,0,null,0,2,"checkbox",[],null,[[null,"toggleChecked"]],function(l,e,n){var t=!0;return"toggleChecked"===e&&(t=!1!==l.component.setIsSelected(n,l.context.$implicit)&&t),t},bl.b,bl.a)),t.tb(5,638976,null,0,dl.a,[],{isChecked:[0,"isChecked"],ariaLabel:[1,"ariaLabel"]},{toggleChecked:"toggleChecked"}),t.Kb(6,1),(l()(),t.kb(16777216,null,0,1,null,Ge)),t.tb(8,278528,null,0,r.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(l,e){var n=e.component;l(e,3,0,"select");var u=n.isRowSelected(e.context.$implicit),a=t.Pb(e,5,1,l(e,6,0,t.Gb(e.parent.parent,0),"CBL.SEARCH.TOGGLE"));l(e,5,0,u,a),l(e,8,0,n.columns,n.trackByColumnId)},null)}function we(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"div",[["class","flex-none cb-text-color-medium cb-margin-medium-left"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,1,"span",[["class","number"]],null,null,null,null,null)),(l()(),t.Ob(2,null,[" ",". "]))],null,function(l,e){l(e,2,0,e.parent.parent.context.index+(e.component.rows.length+1))})}function xe(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,6,"grid-cell",[],null,null,null,ul.b,ul.a)),t.tb(1,4243456,null,0,al.a,[t.k,t.D],{columnId:[0,"columnId"]},null),(l()(),t.kb(16777216,null,0,1,null,we)),t.tb(3,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ub(4,0,null,0,2,"field-formatter",[["class","cb-margin-medium-horizontal"]],null,null,null,il.b,il.a)),t.tb(5,114688,null,0,sl.a,[rl.b],{collectionId:[0,"collectionId"],field:[1,"field"],fieldData:[2,"fieldData"],queryData:[3,"queryData"]},null),t.Jb(6,{localProperties:0})],function(l,e){var n=e.component;l(e,1,0,e.context.$implicit.id),l(e,3,0,0==e.context.index);var t=n.collectionId,u=e.context.$implicit,a=e.parent.context.$implicit.properties[e.context.$implicit.id],i=l(e,6,0,e.parent.context.$implicit.properties);l(e,5,0,t,u,a,i)},null)}function _e(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,7,"grid-row",[["class","blurred-row"]],null,null,null,ol.b,ol.a)),t.tb(1,49152,[[8,4]],0,cl.a,[],null,null),(l()(),t.ub(2,0,null,0,3,"grid-cell",[["class","select"],["columnId","select"]],null,null,null,ul.b,ul.a)),t.tb(3,4243456,null,0,al.a,[t.k,t.D],{columnId:[0,"columnId"]},null),(l()(),t.ub(4,0,null,0,1,"checkbox",[],null,null,null,bl.b,bl.a)),t.tb(5,638976,null,0,dl.a,[],{isChecked:[0,"isChecked"]},null),(l()(),t.kb(16777216,null,0,1,null,xe)),t.tb(7,278528,null,0,r.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(l,e){var n=e.component;l(e,3,0,"select"),l(e,5,0,!1),l(e,7,0,n.columns,n.trackByColumnId)},null)}function Te(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,_e)),t.tb(2,278528,null,0,r.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"]},null),(l()(),t.kb(0,null,null,0))],function(l,e){l(e,2,0,e.component.blurredRows)},null)}function Re(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"div",[["class","all-results-upsell-wrapper"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,1,"upsell",[["featureSet","all_results"]],null,null,null,hl.b,hl.a)),t.tb(2,49152,null,0,ml.a,[],{featureSet:[0,"featureSet"],context:[1,"context"]},null)],function(l,e){l(e,2,0,"all_results",e.component.upsellHeadLineTextContext)},null)}function Ae(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"upsell",[["featureSet","forbidden"]],null,null,null,hl.b,hl.a)),t.tb(1,49152,null,0,ml.a,[],{featureSet:[0,"featureSet"]},null)],function(l,e){l(e,1,0,"forbidden")},null)}function De(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,Re)),t.tb(2,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,Ae)),t.tb(4,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(0,null,null,0))],function(l,e){var n=e.component;l(e,2,0,n.showAllResultsUpsell),l(e,4,0,n.showForbiddenUpsell)},null)}function Fe(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"aggregates",[["class","flex"]],null,null,null,Ll,vl)),t.tb(1,573440,null,0,gl,[g.a,C.a,fl.a,h.a,rl.b],{fieldId:[0,"fieldId"],search:[1,"search"],resultStats:[2,"resultStats"],fieldAggregates:[3,"fieldAggregates"]},null)],function(l,e){var n=e.component;l(e,1,0,e.parent.context.$implicit.id,n.search,n.results.stats,n.aggregates[e.parent.context.$implicit.id])},null)}function Me(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,3,"grid-cell",[],null,null,null,ul.b,ul.a)),t.tb(1,4243456,null,0,al.a,[t.k,t.D],{columnId:[0,"columnId"]},null),(l()(),t.kb(16777216,null,0,1,null,Fe)),t.tb(3,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,1,0,e.context.$implicit.id),l(e,3,0,n.aggregates[e.context.$implicit.id])},null)}function Ve(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,5,"grid-footer",[],null,null,null,Ol,El)),t.tb(1,49152,[[4,4]],0,Cl,[],null,null),(l()(),t.ub(2,0,null,0,1,"grid-cell",[["class","select"],["columnId","select"]],null,null,null,ul.b,ul.a)),t.tb(3,4243456,null,0,al.a,[t.k,t.D],{columnId:[0,"columnId"]},null),(l()(),t.kb(16777216,null,0,1,null,Me)),t.tb(5,278528,null,0,r.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(l,e){var n=e.component;l(e,3,0,"select"),l(e,5,0,n.columns,n.trackByColumnId)},null)}function Qe(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,77,"sheet-grid",[],null,null,null,Gl.b,Gl.a)),t.tb(1,13156352,null,3,Pl.a,[wl.a,t.y,t.D],{gridId:[0,"gridId"],columns:[1,"columns"],rows:[2,"rows"],hasFooter:[3,"hasFooter"],hasResizableColumns:[4,"hasResizableColumns"]},null),t.Mb(603979776,2,{header:0}),t.Mb(603979776,3,{body:0}),t.Mb(603979776,4,{footer:0}),t.Kb(5,3),(l()(),t.ub(6,0,null,0,52,"grid-header",[],null,null,null,xl.b,xl.a)),t.tb(7,49152,[[2,4]],0,_l.a,[],null,null),(l()(),t.ub(8,0,null,0,48,"grid-column-header",[["class","select-header"]],null,null,null,R.b,R.a)),t.tb(9,4308992,null,0,A.a,[t.k,t.D,g.a,D.a],{isSheetGrid:[0,"isSheetGrid"],sortable:[1,"sortable"],movable:[2,"movable"],removable:[3,"removable"]},null),(l()(),t.ub(10,16777216,null,0,5,"button",[["aria-haspopup","true"],["class","flex-none header-icon mat-menu-trigger"],["mat-icon-button",""],["type","button"]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-expanded",0]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],function(l,e,n){var u=!0;return"mousedown"===e&&(u=!1!==t.Gb(l,12)._handleMousedown(n)&&u),"keydown"===e&&(u=!1!==t.Gb(l,12)._handleKeydown(n)&&u),"click"===e&&(u=!1!==t.Gb(l,12)._handleClick(n)&&u),u},u.d,u.b)),t.tb(11,180224,null,0,a.b,[t.k,i.f,[2,s.a]],null,null),t.tb(12,1196032,null,0,M.h,[Q.c,t.k,t.P,M.c,[2,M.d],[8,null],[2,B.b],i.f],{menu:[0,"menu"]},null),t.Kb(13,1),(l()(),t.ub(14,0,null,0,1,"icon",[["key","expand-more"],["size","large"]],[[8,"className",0]],null,null,N.b,N.a)),t.tb(15,573440,null,0,q.a,[r.e,t.k],{key:[0,"key"],size:[1,"size"]},null),(l()(),t.ub(16,0,null,0,40,"mat-menu",[["class","grid-column-menu"]],null,null,null,F.d,F.b)),t.tb(17,1294336,[["columnMenu",4]],3,M.i,[t.k,t.y,M.a],{overlapTrigger:[0,"overlapTrigger"],panelClass:[1,"panelClass"]},null),t.Mb(603979776,5,{_allItems:1}),t.Mb(603979776,6,{items:1}),t.Mb(603979776,7,{lazyContent:0}),t.Lb(2048,null,M.d,null,[M.i]),t.Lb(2048,null,M.b,null,[M.d]),(l()(),t.ub(23,0,null,0,7,"button",[["class","dropdown-menu-link mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(l,e,n){var u=!0,a=l.component;return"click"===e&&(u=!1!==t.Gb(l,24)._checkDisabled(n)&&u),"mouseenter"===e&&(u=!1!==t.Gb(l,24)._handleMouseEnter()&&u),"click"===e&&(u=!1!==a.selectPage()&&u),u},F.c,F.a)),t.tb(24,180224,[[5,4],[6,4]],0,M.f,[t.k,r.e,i.f,[2,M.b]],null,null),(l()(),t.ub(25,0,null,0,5,"span",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(26,0,null,null,1,"icon",[["class","cb-margin-medium-right flex-none"],["key","list-outline"],["size","large"]],[[8,"className",0]],null,null,N.b,N.a)),t.tb(27,573440,null,0,q.a,[r.e,t.k],{key:[0,"key"],size:[1,"size"],class:[2,"class"]},null),(l()(),t.ub(28,0,null,null,2,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(29,null,["",""])),t.Kb(30,1),(l()(),t.ub(31,0,null,0,7,"button",[["class","dropdown-menu-link mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(l,e,n){var u=!0,a=l.component;return"click"===e&&(u=!1!==t.Gb(l,32)._checkDisabled(n)&&u),"mouseenter"===e&&(u=!1!==t.Gb(l,32)._handleMouseEnter()&&u),"click"===e&&(u=!1!==a.selectAll()&&u),u},F.c,F.a)),t.tb(32,180224,[[5,4],[6,4]],0,M.f,[t.k,r.e,i.f,[2,M.b]],null,null),(l()(),t.ub(33,0,null,0,5,"span",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(34,0,null,null,1,"icon",[["class","cb-margin-medium-right flex-none"],["key","select-all"],["size","large"]],[[8,"className",0]],null,null,N.b,N.a)),t.tb(35,573440,null,0,q.a,[r.e,t.k],{key:[0,"key"],size:[1,"size"],class:[2,"class"]},null),(l()(),t.ub(36,0,null,null,2,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(37,null,["",""])),t.Kb(38,1),(l()(),t.ub(39,0,null,0,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,K.b,K.a)),t.tb(40,49152,null,0,U.a,[],null,null),(l()(),t.ub(41,0,null,0,7,"button",[["class","dropdown-menu-link mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(l,e,n){var u=!0,a=l.component;return"click"===e&&(u=!1!==t.Gb(l,42)._checkDisabled(n)&&u),"mouseenter"===e&&(u=!1!==t.Gb(l,42)._handleMouseEnter()&&u),"click"===e&&(u=!1!==a.deselectPage()&&u),u},F.c,F.a)),t.tb(42,180224,[[5,4],[6,4]],0,M.f,[t.k,r.e,i.f,[2,M.b]],null,null),(l()(),t.ub(43,0,null,0,5,"span",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(44,0,null,null,1,"icon",[["class","cb-margin-medium-right flex-none"],["key","deselect-page"]],[[8,"className",0]],null,null,N.b,N.a)),t.tb(45,573440,null,0,q.a,[r.e,t.k],{key:[0,"key"],class:[1,"class"]},null),(l()(),t.ub(46,0,null,null,2,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(47,null,["",""])),t.Kb(48,1),(l()(),t.ub(49,0,null,0,7,"button",[["class","dropdown-menu-link mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(l,e,n){var u=!0,a=l.component;return"click"===e&&(u=!1!==t.Gb(l,50)._checkDisabled(n)&&u),"mouseenter"===e&&(u=!1!==t.Gb(l,50)._handleMouseEnter()&&u),"click"===e&&(u=!1!==a.deselectAll()&&u),u},F.c,F.a)),t.tb(50,180224,[[5,4],[6,4]],0,M.f,[t.k,r.e,i.f,[2,M.b]],null,null),(l()(),t.ub(51,0,null,0,5,"span",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(52,0,null,null,1,"icon",[["class","cb-margin-medium-right flex-none"],["key","deselect-all"]],[[8,"className",0]],null,null,N.b,N.a)),t.tb(53,573440,null,0,q.a,[r.e,t.k],{key:[0,"key"],class:[1,"class"]},null),(l()(),t.ub(54,0,null,null,2,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(55,null,["",""])),t.Kb(56,1),(l()(),t.kb(16777216,null,0,1,null,Ce)),t.tb(58,278528,null,0,r.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(l()(),t.ub(59,0,null,0,16,"grid-body",[],null,null,null,Tl.b,Tl.a)),t.Lb(512,null,r.E,r.F,[t.r,t.s,t.k,t.D]),t.tb(61,278528,null,0,r.n,[r.E],{ngClass:[0,"ngClass"]},null),t.Jb(62,{"show-all-results-upsell":0}),t.tb(63,49152,[[3,4]],1,Rl.a,[],null,null),t.Mb(603979776,8,{rows:1}),(l()(),t.ub(65,0,null,0,2,"no-content",[["class","cb-absolute-to-cover-top"]],null,null,null,Al.b,Al.a)),t.tb(66,49152,null,0,Dl.a,[],{showLoading:[0,"showLoading"]},null),t.Ib(131072,r.b,[t.h]),(l()(),t.kb(16777216,null,0,1,null,Pe)),t.tb(69,278528,null,0,r.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(l()(),t.kb(16777216,null,0,2,null,Te)),t.tb(71,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),t.Ib(131072,r.b,[t.h]),(l()(),t.kb(16777216,null,0,2,null,De)),t.tb(74,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),t.Ib(131072,r.b,[t.h]),(l()(),t.kb(16777216,null,0,1,null,Ve)),t.tb(77,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component,u=t.Pb(e,1,0,l(e,5,0,t.Gb(e.parent,1),n.collectionId,".","-"));l(e,1,0,u,n.columns,n.rows,n.shouldShowStatistics(),!0),l(e,9,0,!0,!1,!1,!1),l(e,12,0,t.Gb(e,17)),l(e,15,0,"expand-more","large"),l(e,17,0,!1,"grid-column-menu"),l(e,27,0,"list-outline","large","cb-margin-medium-right flex-none"),l(e,35,0,"select-all","large","cb-margin-medium-right flex-none"),l(e,45,0,"deselect-page","cb-margin-medium-right flex-none"),l(e,53,0,"deselect-all","cb-margin-medium-right flex-none"),l(e,58,0,n.columns,n.trackByColumnId);var a=l(e,62,0,n.showAllResultsUpsell);l(e,61,0,a),l(e,66,0,t.Pb(e,66,0,t.Gb(e,67).transform(n.searchInProgress))),l(e,69,0,n.rows,n.trackByRow),l(e,71,0,n.showAllResultsUpsell&&!t.Pb(e,71,0,t.Gb(e,72).transform(n.searchInProgress))),l(e,74,0,!t.Pb(e,74,0,t.Gb(e,75).transform(n.searchInProgress))),l(e,77,0,n.shouldShowStatistics())},function(l,e){var n=t.Pb(e,10,0,l(e,13,0,t.Gb(e.parent,0),"CBL.SEARCH.COLUMN_MENU.MENU_BUTTON"));l(e,10,0,n,t.Gb(e,11).disabled||null,"NoopAnimations"===t.Gb(e,11)._animationMode,t.Gb(e,12).menuOpen||null),l(e,14,0,t.Gb(e,15).classes),l(e,23,0,t.Gb(e,24).role,t.Gb(e,24)._highlighted,t.Gb(e,24)._triggersSubmenu,t.Gb(e,24)._getTabIndex(),t.Gb(e,24).disabled.toString(),t.Gb(e,24).disabled||null),l(e,26,0,t.Gb(e,27).classes);var u=t.Pb(e,29,0,l(e,30,0,t.Gb(e.parent,0),"CBL.SEARCH.COLUMN_MENU.SELECT_PAGE"));l(e,29,0,u),l(e,31,0,t.Gb(e,32).role,t.Gb(e,32)._highlighted,t.Gb(e,32)._triggersSubmenu,t.Gb(e,32)._getTabIndex(),t.Gb(e,32).disabled.toString(),t.Gb(e,32).disabled||null),l(e,34,0,t.Gb(e,35).classes);var a=t.Pb(e,37,0,l(e,38,0,t.Gb(e.parent,0),"CBL.SEARCH.COLUMN_MENU.SELECT_ALL"));l(e,37,0,a),l(e,39,0,t.Gb(e,40).vertical?"vertical":"horizontal",t.Gb(e,40).vertical,!t.Gb(e,40).vertical,t.Gb(e,40).inset),l(e,41,0,t.Gb(e,42).role,t.Gb(e,42)._highlighted,t.Gb(e,42)._triggersSubmenu,t.Gb(e,42)._getTabIndex(),t.Gb(e,42).disabled.toString(),t.Gb(e,42).disabled||null),l(e,44,0,t.Gb(e,45).classes);var i=t.Pb(e,47,0,l(e,48,0,t.Gb(e.parent,0),"CBL.SEARCH.COLUMN_MENU.DESELECT_PAGE"));l(e,47,0,i),l(e,49,0,t.Gb(e,50).role,t.Gb(e,50)._highlighted,t.Gb(e,50)._triggersSubmenu,t.Gb(e,50)._getTabIndex(),t.Gb(e,50).disabled.toString(),t.Gb(e,50).disabled||null),l(e,52,0,t.Gb(e,53).classes);var s=t.Pb(e,55,0,l(e,56,0,t.Gb(e.parent,0),"CBL.SEARCH.COLUMN_MENU.DESELECT_ALL"));l(e,55,0,s)})}function Be(l){return t.Qb(0,[t.Ib(0,H.a,[g.a]),t.Ib(0,Fl.a,[]),t.Mb(671088640,1,{quickAdd:0}),(l()(),t.ub(3,0,null,null,45,"div",[["class","component--results flex layout-column"]],null,null,null,null,null)),(l()(),t.ub(4,0,null,null,44,"div",[["class","gridChrome mat-elevation-z2 flex layout-column"]],null,null,null,null,null)),(l()(),t.ub(5,0,null,null,37,"div",[["class","cb-background-white cb-padding-small-vertical\n                cb-padding-medium-horizontal flex-none layout-column\n                layout-align-center-stretch layout-gt-xs-row\n                layout-align-gt-xs-start-center"]],null,null,null,null,null)),(l()(),t.ub(6,0,null,null,2,"results-info",[["class","flex-none hide-gt-xs"]],null,null,null,Ul,Nl)),t.Lb(512,null,Ml.a,Ml.a,[]),t.tb(8,704512,null,0,Ql,[Ml.a,g.a,Bl.a,E.a,C.a,_.a],{results:[0,"results"],pageId:[1,"pageId"],pageSize:[2,"pageSize"]},null),(l()(),t.ub(9,0,null,null,33,"div",[["class","flex layout-row layout-wrap layout-align-start-center"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,Se)),t.tb(11,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ub(12,0,null,null,2,"results-info",[["class","flex-none hide show-gt-xs"]],null,null,null,Ul,Nl)),t.Lb(512,null,Ml.a,Ml.a,[]),t.tb(14,704512,null,0,Ql,[Ml.a,g.a,Bl.a,E.a,C.a,_.a],{results:[0,"results"],pageId:[1,"pageId"],pageSize:[2,"pageSize"]},null),(l()(),t.ub(15,0,null,null,27,"div",[["class","flex-noshrink layout-row layout-align-end-center"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,ke)),t.tb(17,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ub(18,0,null,null,0,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.ub(19,0,null,null,23,"div",[["class","flex-none layout-row layout-align-end-center"]],null,null,null,null,null)),(l()(),t.ub(20,0,null,null,1,"aggregates-toggle",[["class","flex-none hide show-gt-sm"]],null,null,null,te,Xl)),t.tb(21,638976,null,0,Yl,[C.a,E.a,fl.a,_.a],{searchId:[0,"searchId"]},null),(l()(),t.ub(22,0,null,null,9,"button",[["class","cb-text-transform-none flex-none hide show-gt-sm"],["mat-button",""],["type","button"]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.showColumnPanel()&&t),t},u.d,u.b)),t.tb(23,180224,null,0,a.b,[t.k,i.f,[2,s.a]],{disabled:[0,"disabled"]},null),t.Ib(131072,r.b,[t.h]),t.Kb(25,1),(l()(),t.ub(26,0,null,0,5,"span",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(27,0,null,null,1,"icon",[["class","cb-margin-small-right"],["key","columns"]],[[8,"className",0]],null,null,N.b,N.a)),t.tb(28,573440,null,0,q.a,[r.e,t.k],{key:[0,"key"],class:[1,"class"]},null),(l()(),t.ub(29,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t.Ob(30,null,["",""])),t.Kb(31,1),(l()(),t.ub(32,0,null,null,8,"button",[["class","flex-none"],["mat-button",""],["type","button"]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.showTimelineClickHandler()&&t),t},u.d,u.b)),t.tb(33,180224,null,0,a.b,[t.k,i.f,[2,s.a]],null,null),t.Kb(34,1),(l()(),t.ub(35,0,null,0,5,"div",[["class","layout-row layout-align-center-center"]],null,null,null,null,null)),(l()(),t.ub(36,0,null,null,1,"icon",[["class","cb-margin-small-right flex-none"],["key","timeline"]],[[8,"className",0]],null,null,N.b,N.a)),t.tb(37,573440,null,0,q.a,[r.e,t.k],{key:[0,"key"],class:[1,"class"]},null),(l()(),t.ub(38,0,null,null,2,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(39,null,["",""])),t.Kb(40,1),(l()(),t.ub(41,0,null,null,1,"export-csv-button",[["class","flex-none hide show-gt-sm"]],null,null,null,ye,me)),t.tb(42,114688,null,0,ae,[de,_.a,m.a,f.a,he.a],null,null),(l()(),t.ub(43,0,null,null,2,"div",[["class","cb-background-accent flex-none"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,Le)),t.tb(45,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ub(46,0,null,null,2,"div",[["class","flex layout-fill cb-relative cb-background-white"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,Qe)),t.tb(48,16384,null,0,r.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,8,0,n.results,n.pageId,n.pageSize),l(e,11,0,!n.isStaticList),l(e,14,0,n.results,n.pageId,n.pageSize),l(e,17,0,n.showQuickAdd),l(e,21,0,n.search.id),l(e,23,0,t.Pb(e,23,0,t.Gb(e,24).transform(n.searchInProgress))),l(e,28,0,"columns","cb-margin-small-right"),l(e,37,0,"timeline","cb-margin-small-right flex-none"),l(e,42,0),l(e,45,0,n.selectedRows.size>0),l(e,48,0,n.columns&&n.columns.length>0)},function(l,e){var n=t.Pb(e,22,0,l(e,25,0,t.Gb(e,0),"CBL.SEARCH.COLUMNS.EDIT_COLUMNS"));l(e,22,0,n,t.Gb(e,23).disabled||null,"NoopAnimations"===t.Gb(e,23)._animationMode),l(e,27,0,t.Gb(e,28).classes);var u=t.Pb(e,30,0,l(e,31,0,t.Gb(e,0),"CBL.SEARCH.COLUMNS.COLUMNS"));l(e,30,0,u);var a=t.Pb(e,32,0,l(e,34,0,t.Gb(e,0),"CBL.TIMELINE.TIMELINE"));l(e,32,0,a,t.Gb(e,33).disabled||null,"NoopAnimations"===t.Gb(e,33)._animationMode),l(e,36,0,t.Gb(e,37).classes);var i=t.Pb(e,39,0,l(e,40,0,t.Gb(e,0),"CBL.TIMELINE.TIMELINE"));l(e,39,0,i)})}},"5QIx":function(l,e,n){"use strict";n.d(e,"a",function(){return o});var t=n("9va6"),u=n("Mlb/"),a=n("EYJY"),i=n("ccoi"),s=n("ue+9"),r=n("iSrm");let o=(()=>{class l{constructor(l,e,n,t,i,s,r,o,c,b,d){this.router=l,this.searchStateService=e,this.searchResultService=n,this.listService=t,this.permissionService=i,this.dialogService=s,this.metadataService=r,this.toastService=o,this.errorService=c,this.labelService=b,this.progressService=d,this.toggleFilters=new u.m(!0),this.onDestroy=new a.a}ngOnInit(){this.permissionService.getPermissionsChange$().pipe(Object(i.a)(this.onDestroy)).subscribe(()=>{this.setup()})}ngOnChanges(){this.setup()}ngOnDestroy(){this.onDestroy.next()}toggleFiltersClicked(){this.showFilters=!this.showFilters,this.toggleFilters.emit(this.showFilters)}save(e){let n=this.searchStateService.getEntitySearchModel(),u=Object(t.extend)({},this.searchStateService.getListModel()),a=this.list&&this.list.is_owner;a?(a&&this.list.list_type===s.C.List_typeEnum.static&&(u.default_collection_id=this.collectionId),this.progressService.startProgress(l.PROGRESS_ID),this.listService.updateListCollection(this.list.id,this.collectionId,n).then(()=>this.listService.updateList(this.list.id,u),Promise.reject.bind(Promise)).then(l=>{this.toastService.showSimpleToast("CBL.LISTS.SAVED"),this.searchStateService.activateListSearchFromModel(u=l.data,this.collectionId)},l=>{this.errorService.showToast(l,"CBL.LISTS.FAILURE")}).then(()=>{this.progressService.stopProgress(l.PROGRESS_ID)})):this.saveAs(e)}saveAs(l){this.dialogService.showDialog(r.a,{titleLabel:"CBL.LISTS.SAVE_AS",mode:"create",type:s.B.List_typeEnum.smart,collectionId:this.collectionId,listId:this.list&&this.list.id,searchId:this.activeSearch.id,itemCount:this.list?this.listItemCount():this.searchTotalCount()})}editList(l){this.dialogService.showDialog(r.a,{titleLabel:this.list.list_type===s.C.List_typeEnum.static?"CBL.LISTS.EDIT_LIST":"CBL.LISTS.EDIT_SEARCH",mode:"edit",listId:this.list.id,listName:this.list.name,type:this.list.list_type,listIsPublic:this.list.is_public,itemCount:this.listItemCount(),savedCollectionId:this.list.default_collection_id}).then(l=>{l&&l.list&&this.searchStateService.activateListSearch(l.list.id,this.collectionId,!0)})}deleteList(l){let e=this.list.list_type===s.C.List_typeEnum.static;this.dialogService.showConfirmation(this.labelService.getLabel(e?"CBL.LISTS.DELETE_LIST":"CBL.LISTS.DELETE_SEARCH"),this.labelService.getLabel("CBL.LISTS.DELETE_CONFIRMATION"),this.labelService.getLabel("CBL.COMMON.DELETE"),this.labelService.getLabel("CBL.COMMON.CANCEL")).then(l=>{l&&this.listService.deleteList(this.list.id).then(l=>{this.toastService.showSimpleToast(e?"CBL.LISTS.LIST_DELETED":"CBL.LISTS.SEARCH_DELETED"),this.router.navigate([e?"lists":"searches"])},l=>{this.toastService.showSimpleToast("CBL.COMMON.FAILURE")})})}showSettingsMenu(){return!!this.list&&this.list.is_owner}showSaveButton(){return!!this.list&&!!this.list.is_owner}showSaveAsButton(){let l=!!this.list&&!!this.list.list_type;return!l||l&&!(l&&this.list.list_type===s.C.List_typeEnum.static)}showSaveMenu(){return this.isSaveableCollection(this.collectionId)&&(this.showSaveButton()||this.showSaveAsButton())}isSaveableCollection(l){return"relationship"!==this.metadataService.getEntityDefType(l)}upsellSaveButton(){return!this.userCanSaveLists&&this.list&&this.list.list_type!==s.C.List_typeEnum.static}upsellSaveAsButton(){return!this.userCanSaveLists}searchTotalCount(){let l=this.searchResultService.getSearchStats();return l&&l.totalCount||0}setup(){this.list=this.activeSearch.getList(),this.collectionId=this.searchStateService.getSearchInfo().collectionId,this.isDirty=this.searchStateService.isSearchDirty(),this.userCanSaveLists=this.permissionService.canSaveList();let l=this.list&&this.list.list_type===s.C.List_typeEnum.static;this.showFilters=!l&&!this.readOnly,this.showFiltersButton=!l,this.toggleFilters.emit(this.showFilters)}listItemCount(){let l=Object(t.filter)(this.list&&this.list.collections,l=>this.metadataService.isIdentifierEntity(l.collection_id)),e=Object(t.map)(l,l=>l.entities_count);return this.list&&!this.isDirty&&e[0]||0}}return l.PROGRESS_ID="SEARCH-TOOLBAR",l})()},JO7T:function(l,e,n){"use strict";n.d(e,"a",function(){return v}),n.d(e,"b",function(){return S});var t=n("Mlb/"),u=n("jqfN"),a=n("z0m1"),i=n("kseu"),s=n("vk2e"),r=n("gPUE"),o=n("z1+i"),c=n("/WNS"),b=n("qa5e"),d=n("887p"),h=n("pees"),m=n("B7XW"),p=n("1gWZ"),g=n("X/tG"),f=n("e9Gc"),v=(n("Twrc"),n("KYkt"),n("ba/H"),t.sb({encapsulation:2,styles:[],data:{}}));function y(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"field-label",[],null,null,null,u.b,u.a)),t.tb(1,49152,null,0,a.a,[],{label:[0,"label"],isRequired:[1,"isRequired"],isDisabled:[2,"isDisabled"],isSubfield:[3,"isSubfield"],disabledTooltip:[4,"disabledTooltip"]},null)],function(l,e){var n=e.component;l(e,1,0,n.label,n.isRequired,n.isDisabled,n.isSubfield,n.disabledTooltip)},null)}function I(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,7,"chip",[["class","cb-margin-medium-right cb-nowrap"]],null,[[null,"remove"]],function(l,e,n){var t=!0;return"remove"===e&&(t=!1!==l.component.removeEntity(l.context.$implicit)&&t),t},i.b,i.a)),t.Lb(512,null,s.E,s.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,s.n,[s.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(3,{"already-selected":0}),t.tb(4,49152,null,0,r.a,[],{removable:[0,"removable"]},{remove:"remove"}),t.tb(5,4407296,null,0,o.a,[t.k,c.a,b.b,d.a,h.a,t.y],{hoverPreview:[0,"hoverPreview"],hoverComponent:[1,"hoverComponent"],hoverPayload:[2,"hoverPayload"]},null),t.Jb(6,{identifier:0,hideFollowButton:1}),(l()(),t.Ob(7,0,[" "," "]))],function(l,e){var n=e.component,t=l(e,3,0,(null==e.context.$implicit.identifier?null:e.context.$implicit.identifier.uuid)===(null==n.alreadySelectedEntity?null:null==n.alreadySelectedEntity.identifier?null:n.alreadySelectedEntity.identifier.uuid));l(e,2,0,"cb-margin-medium-right cb-nowrap",t),l(e,4,0,!n.isDisabled);var u=n.showHoverPreview&&e.context.$implicit.identifier,a=n.overlayComponent,i=l(e,6,0,e.context.$implicit.identifier,!0);l(e,5,0,u,a,i)},function(l,e){l(e,7,0,null==e.context.$implicit.identifier?null:e.context.$implicit.identifier.value)})}function S(l){return t.Qb(2,[(l()(),t.kb(16777216,null,null,1,null,y)),t.tb(1,16384,null,0,s.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ub(2,0,null,null,4,"div",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,I)),t.tb(4,278528,null,0,s.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"]},null),(l()(),t.ub(5,0,null,null,1,"entity-input",[["floatLabel","never"]],null,[[null,"chosenEntity"]],function(l,e,n){var t=!0;return"chosenEntity"===e&&(t=!1!==l.component.selectEntity(n)&&t),t},m.b,m.a)),t.tb(6,638976,null,0,p.a,[g.a,t.h,f.a],{floatLabel:[0,"floatLabel"],placeholder:[1,"placeholder"],collectionIds:[2,"collectionIds"],isDisabled:[3,"isDisabled"]},{chosenEntity:"chosenEntity"})],function(l,e){var n=e.component;l(e,1,0,n.label),l(e,4,0,n.selectedEntities),l(e,6,0,"never",n.hasMaximumItems?n.maxItemsLabel:n.placeholder,n.collectionIds,n.isDisabled||n.hasMaximumItems)},null)}},KVmP:function(l,e,n){"use strict";n.d(e,"a",function(){return t});class t{trackQueryItem(l,e){return e?e.id:void 0}}},Q9LT:function(l,e,n){"use strict";var t=n("Mlb/"),u=n("vk2e"),a=n("jmHW"),i=n("pk7F"),s=n("Ienz"),r=n("P6pJ"),o=n("Htug"),c=n("nJV+"),b=n("BRL0"),d=n("ba/H"),h=n("9va6"),m=n("ue+9");class p{constructor(l,e,n,t){this.searchStateService=l,this.permissionService=e,this.upsellService=n,this.metadataService=t}ngOnChanges(){this.setup()}addQueryItem(){this.subquery?this.searchStateService.addQueryItemToSubquery(this.subquery.id):this.searchStateService.addQueryItemToSearch()}showUpsellDialog(){this.upsellService.upsellPro("FILTERS")}setup(){let l=this.getPredicateCount(this.search.getQueryItems());this.isLimited=this.permissionService.hasNerfedQueryPredicateLimit(),this.canAdd=this.canAddQueryItem(l),this.collectionLabel=this.getCollectionLabel()}canAddQueryItem(l){return l<this.permissionService.getQueryPredicateLimit()}getPredicateCount(l){let e=0;return Object(h.forEach)(l,l=>{if(l.getType()===m.F.TypeEnum.sub_query){let n=l.getQueryItems();e+=this.getPredicateCount(n)}else l.getType()===m.F.TypeEnum.predicate&&(e+=1)}),e}getCollectionLabel(){let l=this.metadataService.getEntityDef(this.parentCollectionId);if(l)return l.labels.plural}}var g=n("qFRT"),f=n("sl8x"),v=n("xIHQ"),y=n("nkAL"),I=t.sb({encapsulation:2,styles:[],data:{}});function S(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,17,"div",[["class","component--query-item-add component--query-item"]],null,null,null,null,null)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(3,{"onlyChild firstChild":0}),(l()(),t.ub(4,0,null,null,13,"button",[["class","addFilterButton queryItemFacet mat-raised"],["mat-button",""],["type","button"]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.addQueryItem()&&t),t},a.d,a.b)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(6,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(7,{"show-label":0}),t.tb(8,180224,null,0,i.b,[t.k,s.f,[2,r.a]],null,null),t.Jb(9,{entity:0}),t.Kb(10,2),(l()(),t.ub(11,0,null,0,6,"div",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(12,0,null,null,1,"icon",[["class","add-icon flex-none"],["color","inherit"],["key","add"]],[[8,"className",0]],null,null,o.b,o.a)),t.tb(13,573440,null,0,c.a,[u.e,t.k],{key:[0,"key"],color:[1,"color"],class:[2,"class"]},null),(l()(),t.ub(14,0,null,null,3,"span",[["class","add-filter-label cb-overflow-ellipsis flex-nogrow cb-margin-small-left"]],null,null,null,null,null)),(l()(),t.Ob(15,null,[" "," "])),t.Jb(16,{entity:0}),t.Kb(17,2)],function(l,e){var n=e.component,t=l(e,3,0,n.isOnlyChild);l(e,2,0,"component--query-item-add component--query-item",t);var u=l(e,7,0,!n.subquery);l(e,6,0,"addFilterButton queryItemFacet mat-raised",u),l(e,13,0,"add","inherit","add-icon flex-none")},function(l,e){var n=e.component,u=t.Pb(e,4,0,l(e,10,0,t.Gb(e.parent,0),"CBL.SEARCH.ADD_FILTER",l(e,9,0,n.collectionLabel)));l(e,4,0,u,t.Gb(e,8).disabled||null,"NoopAnimations"===t.Gb(e,8)._animationMode),l(e,12,0,t.Gb(e,13).classes);var a=t.Pb(e,15,0,l(e,17,0,t.Gb(e.parent,0),"CBL.SEARCH.ADD_FILTER",l(e,16,0,n.collectionLabel)));l(e,15,0,a)})}function k(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,19,"div",[["class","component--query-item-add component--query-item"]],null,null,null,null,null)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(3,{"onlyChild firstChild":0}),(l()(),t.ub(4,0,null,null,15,"button",[["class","component--upsell-button addFilterButton queryItemFacet mat-raised"],["mat-button",""],["type","button"]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.showUpsellDialog()&&t),t},a.d,a.b)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(6,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(7,{"show-label":0}),t.tb(8,180224,null,0,i.b,[t.k,s.f,[2,r.a]],null,null),t.Jb(9,{entity:0}),t.Kb(10,2),(l()(),t.ub(11,0,null,0,8,"div",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(12,0,null,null,1,"icon",[["class","add-icon flex-none"],["key","add"]],[[8,"className",0]],null,null,o.b,o.a)),t.tb(13,573440,null,0,c.a,[u.e,t.k],{key:[0,"key"],class:[1,"class"]},null),(l()(),t.ub(14,0,null,null,1,"icon",[["class","pro-icon flex-none cb-margin-small-left"],["color","pro"],["key","pro"]],[[8,"className",0]],null,null,o.b,o.a)),t.tb(15,573440,null,0,c.a,[u.e,t.k],{key:[0,"key"],color:[1,"color"],class:[2,"class"]},null),(l()(),t.ub(16,0,null,null,3,"span",[["class","add-filter-label cb-overflow-ellipsis flex-nogrow cb-margin-small-left"]],null,null,null,null,null)),(l()(),t.Ob(17,null,[" "," "])),t.Jb(18,{entity:0}),t.Kb(19,2)],function(l,e){var n=e.component,t=l(e,3,0,n.isOnlyChild);l(e,2,0,"component--query-item-add component--query-item",t);var u=l(e,7,0,!n.subquery);l(e,6,0,"component--upsell-button addFilterButton queryItemFacet mat-raised",u),l(e,13,0,"add","add-icon flex-none"),l(e,15,0,"pro","pro","pro-icon flex-none cb-margin-small-left")},function(l,e){var n=e.component,u=t.Pb(e,4,0,l(e,10,0,t.Gb(e.parent,0),"CBL.SEARCH.ADD_FILTER",l(e,9,0,n.collectionLabel)));l(e,4,0,u,t.Gb(e,8).disabled||null,"NoopAnimations"===t.Gb(e,8)._animationMode),l(e,12,0,t.Gb(e,13).classes),l(e,14,0,t.Gb(e,15).classes);var a=t.Pb(e,17,0,l(e,19,0,t.Gb(e.parent,0),"CBL.SEARCH.ADD_FILTER",l(e,18,0,n.collectionLabel)));l(e,17,0,a)})}function L(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,17,"div",[["class","component--query-item-add component--query-item"]],null,null,null,null,null)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(3,{"onlyChild firstChild":0}),(l()(),t.ub(4,0,null,null,13,"button",[["class","addFilterButton queryItemFacet mat-raised"],["mat-button",""],["type","button"]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.addQueryItem()&&t),t},a.d,a.b)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(6,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(7,{"show-label":0}),t.tb(8,180224,null,0,i.b,[t.k,s.f,[2,r.a]],{disabled:[0,"disabled"]},null),t.Jb(9,{entity:0}),t.Kb(10,2),(l()(),t.ub(11,0,null,0,6,"div",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(12,0,null,null,1,"icon",[["class","flex-none"],["key","add"]],[[8,"className",0]],null,null,o.b,o.a)),t.tb(13,573440,null,0,c.a,[u.e,t.k],{key:[0,"key"],class:[1,"class"]},null),(l()(),t.ub(14,0,null,null,3,"span",[["class","add-filter-label cb-overflow-ellipsis cb-margin-small-left flex-nogrow"]],null,null,null,null,null)),(l()(),t.Ob(15,null,[" "," "])),t.Jb(16,{entity:0}),t.Kb(17,2)],function(l,e){var n=e.component,t=l(e,3,0,n.isOnlyChild);l(e,2,0,"component--query-item-add component--query-item",t);var u=l(e,7,0,!n.subquery);l(e,6,0,"addFilterButton queryItemFacet mat-raised",u),l(e,8,0,!0),l(e,13,0,"add","flex-none")},function(l,e){var n=e.component,u=t.Pb(e,4,0,l(e,10,0,t.Gb(e.parent,0),"CBL.SEARCH.ADD_FILTER",l(e,9,0,n.collectionLabel)));l(e,4,0,u,t.Gb(e,8).disabled||null,"NoopAnimations"===t.Gb(e,8)._animationMode),l(e,12,0,t.Gb(e,13).classes);var a=t.Pb(e,15,0,l(e,17,0,t.Gb(e.parent,0),"CBL.SEARCH.ADD_FILTER",l(e,16,0,n.collectionLabel)));l(e,15,0,a)})}function C(l){return t.Qb(0,[t.Ib(0,b.a,[d.a]),(l()(),t.kb(16777216,null,null,1,null,S)),t.tb(2,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,k)),t.tb(4,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,L)),t.tb(6,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,2,0,n.canAdd),l(e,4,0,!n.canAdd&&n.isLimited),l(e,6,0,!n.canAdd&&!n.isLimited)},null)}var E=n("Edtt"),O=n("W9sv"),G=n("pdeR"),P=n("kALn"),w=n("6YJn"),x=n("Kfqh"),_=n("kAjB"),T=n("EcxS"),R=n("QZuW"),A=n("Z7++"),D=n("dvHj"),F=n("9b0e"),M=n("C0xW");class V{constructor(l,e){this.searchStateService=l,this.metadataService=e}ngOnInit(){this.setup()}updateOperator(l){this.selectedOperator=l,this.searchStateService.setPredicateOperator(this.predicate.id,this.collectionId,this.selectedOperator&&this.selectedOperator.id)}trackByOperator(l,e){return e?e.id:void 0}setup(){let l=this.metadataService.getField(this.collectionId,this.predicate.field);this.operators=this.metadataService.getOperators(l.type_id);let e=this.metadataService.getDefaultOperator(l.type_id);!this.predicate.operator&&e?this.updateOperator(e):this.selectedOperator=this.metadataService.getOperator(l.type_id,this.predicate.operator)}}var Q=t.sb({encapsulation:2,styles:[],data:{}});function B(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(l,e,n){var u=!0;return"click"===e&&(u=!1!==t.Gb(l,1)._selectViaInteraction()&&u),"keydown"===e&&(u=!1!==t.Gb(l,1)._handleKeydown(n)&&u),u},E.e,E.b)),t.tb(1,8568832,[[10,4]],0,O.p,[t.k,t.h,[2,O.j],[2,O.o]],{value:[0,"value"]},null),(l()(),t.Ob(2,0,[" "," "]))],function(l,e){l(e,1,0,e.context.$implicit)},function(l,e){l(e,0,0,t.Gb(e,1)._getTabIndex(),t.Gb(e,1).selected,t.Gb(e,1).multiple,t.Gb(e,1).active,t.Gb(e,1).id,t.Gb(e,1)._getAriaSelected(),t.Gb(e,1).disabled.toString(),t.Gb(e,1).disabled),l(e,2,0,e.context.$implicit.labels.name)})}function N(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,24,"div",[["class","component--operators queryItemFacet layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,23,"mat-form-field",[["class","mat-form-field"],["floatLabel","never"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,G.b,G.a)),t.tb(2,7520256,null,9,P.c,[t.k,t.h,[2,O.h],[2,w.b],[2,P.a],x.a,t.y,[2,r.a]],{floatLabel:[0,"floatLabel"]},null),t.Mb(603979776,1,{_controlNonStatic:0}),t.Mb(335544320,2,{_controlStatic:0}),t.Mb(603979776,3,{_labelChildNonStatic:0}),t.Mb(335544320,4,{_labelChildStatic:0}),t.Mb(603979776,5,{_placeholderChild:0}),t.Mb(603979776,6,{_errorChildren:1}),t.Mb(603979776,7,{_hintChildren:1}),t.Mb(603979776,8,{_prefixChildren:1}),t.Mb(603979776,9,{_suffixChildren:1}),(l()(),t.ub(12,0,null,1,12,"mat-select",[["class","mat-select"],["role","listbox"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],function(l,e,n){var u=!0,a=l.component;return"keydown"===e&&(u=!1!==t.Gb(l,16)._handleKeydown(n)&&u),"focus"===e&&(u=!1!==t.Gb(l,16)._onFocus()&&u),"blur"===e&&(u=!1!==t.Gb(l,16)._onBlur()&&u),"ngModelChange"===e&&(u=!1!==a.updateOperator(n)&&u),u},_.b,_.a)),t.Lb(6144,null,O.j,null,[T.c]),t.tb(14,671744,null,0,R.x,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),t.Lb(2048,null,R.t,null,[R.x]),t.tb(16,2080768,null,3,T.c,[A.e,t.h,t.y,O.b,t.k,[2,w.b],[2,R.w],[2,R.m],[2,P.c],[6,R.t],[8,null],T.a,s.h],{placeholder:[0,"placeholder"]},null),t.Mb(603979776,10,{options:1}),t.Mb(603979776,11,{optionGroups:1}),t.Mb(603979776,12,{customTrigger:0}),t.Kb(20,1),t.tb(21,16384,null,0,R.u,[[4,R.t]],null,null),t.Lb(2048,[[1,4],[2,4]],P.d,null,[T.c]),(l()(),t.kb(16777216,null,1,1,null,B)),t.tb(24,278528,null,0,u.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(l,e){var n=e.component;l(e,2,0,"never"),l(e,14,0,n.selectedOperator);var u=t.Pb(e,16,0,l(e,20,0,t.Gb(e.parent,0),"CBL.SEARCH.OPERATOR_PLACEHOLDER"));l(e,16,0,u),l(e,24,0,n.operators,n.trackByOperator)},function(l,e){l(e,1,1,["standard"==t.Gb(e,2).appearance,"fill"==t.Gb(e,2).appearance,"outline"==t.Gb(e,2).appearance,"legacy"==t.Gb(e,2).appearance,t.Gb(e,2)._control.errorState,t.Gb(e,2)._canLabelFloat,t.Gb(e,2)._shouldLabelFloat(),t.Gb(e,2)._hasFloatingLabel(),t.Gb(e,2)._hideControlPlaceholder(),t.Gb(e,2)._control.disabled,t.Gb(e,2)._control.autofilled,t.Gb(e,2)._control.focused,"accent"==t.Gb(e,2).color,"warn"==t.Gb(e,2).color,t.Gb(e,2)._shouldForward("untouched"),t.Gb(e,2)._shouldForward("touched"),t.Gb(e,2)._shouldForward("pristine"),t.Gb(e,2)._shouldForward("dirty"),t.Gb(e,2)._shouldForward("valid"),t.Gb(e,2)._shouldForward("invalid"),t.Gb(e,2)._shouldForward("pending"),!t.Gb(e,2)._animationsEnabled]),l(e,12,1,[t.Gb(e,16).id,t.Gb(e,16).tabIndex,t.Gb(e,16)._getAriaLabel(),t.Gb(e,16)._getAriaLabelledby(),t.Gb(e,16).required.toString(),t.Gb(e,16).disabled.toString(),t.Gb(e,16).errorState,t.Gb(e,16).panelOpen?t.Gb(e,16)._optionIds:null,t.Gb(e,16).multiple,t.Gb(e,16)._ariaDescribedby||null,t.Gb(e,16)._getAriaActiveDescendant(),t.Gb(e,16).disabled,t.Gb(e,16).errorState,t.Gb(e,16).required,t.Gb(e,16).empty,t.Gb(e,21).ngClassUntouched,t.Gb(e,21).ngClassTouched,t.Gb(e,21).ngClassPristine,t.Gb(e,21).ngClassDirty,t.Gb(e,21).ngClassValid,t.Gb(e,21).ngClassInvalid,t.Gb(e,21).ngClassPending])})}function q(l){return t.Qb(0,[(l()(),t.ub(0,16777216,null,null,3,"div",[["class","component--operators queryItemFacet read-only"]],null,[[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(l,e,n){var u=!0;return"longpress"===e&&(u=!1!==t.Gb(l,1).show()&&u),"keydown"===e&&(u=!1!==t.Gb(l,1)._handleKeydown(n)&&u),"touchend"===e&&(u=!1!==t.Gb(l,1)._handleTouchend()&&u),u},null,null)),t.tb(1,212992,null,0,D.d,[F.c,t.k,A.b,t.P,t.y,x.a,s.c,s.f,D.b,[2,w.b],[2,D.a],[2,M.g]],{message:[0,"message"]},null),(l()(),t.ub(2,0,null,null,1,"span",[["class","cb-overflow-ellipsis overflow-block"]],null,null,null,null,null)),(l()(),t.Ob(3,null,[" "," "])),(l()(),t.kb(0,null,null,0))],function(l,e){l(e,1,0,e.component.selectedOperator.labels.name)},function(l,e){l(e,3,0,e.component.selectedOperator.labels.name)})}function K(l){return t.Qb(0,[t.Ib(0,b.a,[d.a]),(l()(),t.kb(16777216,null,null,1,null,N)),t.tb(2,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,q)),t.tb(4,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,2,0,!n.isReadOnly),l(e,4,0,n.isReadOnly)},null)}var U=n("WRYs"),H=n("txWJ");class j{constructor(l,e){this.searchStateService=l,this.labelService=e}ngOnInit(){this.setup()}updateValue(l){this.searchStateService.setPredicateValues(this.queryItemId,[l.value])}setup(){this.options=this.getOptions(),this.queryItem=this.searchStateService.getQueryItem(this.queryItemId);let l=this.queryItem,e=l.predicateValues?l.predicateValues.map(l=>!0===l||"true"===l):[];this.selectedOption=Object(h.find)(this.options,["value",e[0]])}getOptions(){return[{label:this.labelService.getLabel("CBL.SEARCH.VALUE_TRUE"),value:!0},{label:this.labelService.getLabel("CBL.SEARCH.VALUE_FALSE"),value:!1}]}}var z=t.sb({encapsulation:2,styles:[],data:{}});function $(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,3,"div",[["class","component--search-boolean"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,2,"select-input",[["floatLabel","never"]],null,[[null,"valueChange"]],function(l,e,n){var t=!0;return"valueChange"===e&&(t=!1!==l.component.updateValue(n)&&t),t},U.b,U.a)),t.tb(2,638976,null,0,H.a,[],{placeholder:[0,"placeholder"],floatLabel:[1,"floatLabel"],selectedOption:[2,"selectedOption"],options:[3,"options"]},{valueChange:"valueChange"}),t.Kb(3,1)],function(l,e){var n=e.component,u=t.Pb(e,2,0,l(e,3,0,t.Gb(e.parent,0),"CBL.SEARCH.BOOLEAN_PLACEHOLDER"));l(e,2,0,u,"never",n.selectedOption,n.options)},null)}function J(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"div",[["class","component--search-boolean cb-nowrap"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Ob(2,null,[" "," "]))],null,function(l,e){var n=e.component;l(e,2,0,null==n.selectedOption?null:n.selectedOption.label)})}function W(l){return t.Qb(0,[t.Ib(0,b.a,[d.a]),(l()(),t.kb(16777216,null,null,1,null,$)),t.tb(2,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,J)),t.tb(4,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,2,0,!n.isReadOnly),l(e,4,0,n.isReadOnly)},null)}var Y=n("4z/6"),X=n("EeXs");class Z{constructor(l,e){this.searchStateService=l,this.metadataService=e}ngOnInit(){this.setup()}updateValues(l){this.selectedOptions=l;let e=l.map(l=>l.value);this.searchStateService.setPredicateValues(this.queryItemId,e.length>0?e:null)}setup(){let l=this.searchStateService.getQueryItem(this.queryItemId),e=l.predicateValues?l.predicateValues:[],n=this.metadataService.getField(this.collectionId,l.field);this.hasValueList(n)&&(this.options=this.getOptions(n),this.getSelectedOptions(this.options,e))}hasValueList(l){return l.values&&l.values.list&&l.values.list.length>0}getOptions(l){let e=l.values.list,n=l.labels.values;return Object(h.map)(e,l=>({label:n[l],value:l}))}getSelectedOptions(l,e){this.selectedOptions=[],(e||[]).map(e=>{let n=l.find(l=>l.value===e);n&&this.selectedOptions.push(n)})}}var ll=t.sb({encapsulation:2,styles:[],data:{}});function el(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"multi-select-input",[["floatLabel","never"]],null,[[null,"valueChange"]],function(l,e,n){var t=!0;return"valueChange"===e&&(t=!1!==l.component.updateValues(n)&&t),t},Y.b,Y.a)),t.tb(1,770048,null,0,X.a,[],{placeholder:[0,"placeholder"],selectedOptions:[1,"selectedOptions"],options:[2,"options"]},{valueChange:"valueChange"})],function(l,e){var n=e.component;l(e,1,0,n.placeholder,n.selectedOptions,n.options)},null)}function nl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"span",[["class","cb-margin-medium-right cb-nowrap"]],[[1,"aria-label",0]],null,null,null,null)),(l()(),t.Ob(1,null,[" ",""," "]))],null,function(l,e){l(e,0,0,e.context.$implicit.label),l(e,1,0,e.context.$implicit.label,e.context.last?"":", ")})}function tl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"span",[["class","flex layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,nl)),t.tb(2,278528,null,0,u.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"]},null)],function(l,e){l(e,2,0,e.component.selectedOptions)},null)}function ul(l){return t.Qb(0,[(l()(),t.kb(16777216,null,null,1,null,el)),t.tb(1,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,tl)),t.tb(3,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,1,0,!n.isReadOnly),l(e,3,0,n.isReadOnly)},null)}class al{constructor(l,e,n){this.searchStateService=l,this.metadataService=e,this.logService=n}ngOnInit(){this.logger=this.logService.getLogger("SearchEnumSingleComponent"),this.setup()}updateValue(l){l&&l.value&&this.searchStateService.setPredicateValues(this.queryItemId,[l.value])}getPredicateValue(l){if(l&&l.predicateValues&&l.predicateValues[0])return l.predicateValues[0]}setup(){this.queryItem=this.searchStateService.getQueryItem(this.queryItemId);let l=this.queryItem;this.fieldId=l.field,this.field=this.metadataService.getField(this.collectionId,this.fieldId),this.hasValueList(this.field)?this.options=Object(h.map)(this.field.values.list,e=>{let n=this.getValueLabel(this.field,e),t=this.createSelectOption(n,e);return this.getPredicateValue(l)===e&&(this.selectedOption=t),t}):this.logger.error("Enum of single field did not provide a list of values",this.field)}getValueLabel(l,e){return l&&l.labels.values&&e?l.labels.values[e]:""}createSelectOption(l,e){return{label:l,value:e}}hasValueList(l){return!!(l&&l.values&&l.values.list&&l.values.list.length>0)}}var il=n("F5Xg"),sl=t.sb({encapsulation:2,styles:[],data:{}});function rl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"div",[["class","component--search-enum-single"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,1,"select-input",[["floatLabel","never"]],null,[[null,"valueChange"]],function(l,e,n){var t=!0;return"valueChange"===e&&(t=!1!==l.component.updateValue(n)&&t),t},U.b,U.a)),t.tb(2,638976,null,0,H.a,[],{placeholder:[0,"placeholder"],floatLabel:[1,"floatLabel"],selectedOption:[2,"selectedOption"],options:[3,"options"]},{valueChange:"valueChange"})],function(l,e){var n=e.component;l(e,2,0,n.placeholder,"never",n.selectedOption,n.options)},null)}function ol(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"div",[["class","component--search-enum-single cb-nowrap"]],null,null,null,null,null)),(l()(),t.Ob(1,null,[" ","\n"]))],null,function(l,e){var n=e.component;l(e,1,0,null==n.selectedOption?null:n.selectedOption.label)})}function cl(l){return t.Qb(0,[(l()(),t.kb(16777216,null,null,1,null,rl)),t.tb(1,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,ol)),t.tb(3,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,1,0,!n.isReadOnly),l(e,3,0,n.isReadOnly)},null)}var bl=n("RUv8"),dl=n("GELA"),hl=n("qOMY");class ml{constructor(l){this.searchStateService=l}ngOnInit(){this.setup()}handleKeyDown(l,e){l.keyCode===hl.a.ENTER&&(this[e]=l.target.value,this.updateValues())}updateFirstDate(l){this.firstDate=l,this.updateValues()}updateSecondDate(l){this.secondDate=l,this.updateValues()}setup(){this.queryItem=this.searchStateService.getQueryItem(this.queryItemId);let l=this.queryItem.predicateValues||[];this.firstDate=l[0],this.secondDate=l[1]}updateValues(){(2!==this.numOfValues||this.firstDate&&this.secondDate)&&this.searchStateService.setPredicateValues(this.queryItemId,this.getValues())}getValues(){return 1===this.numOfValues?this.firstDate?[this.firstDate]:null:2===this.numOfValues&&(this.firstDate||this.secondDate)?[this.firstDate||null,this.secondDate||null]:null}}var pl=t.sb({encapsulation:2,styles:[],data:{}});function gl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"span",[["class","joining-between"]],null,null,null,null,null)),(l()(),t.Ob(1,null,[" "," "])),t.Kb(2,1)],null,function(l,e){var n=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent.parent,0),"CBL.SEARCH.JOINING_BETWEEN"));l(e,1,0,n)})}function fl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,1,"text-input",[["floatLabel","never"]],null,[[null,"blurValue"],[null,"keydown"]],function(l,e,n){var t=!0,u=l.component;return"blurValue"===e&&(t=!1!==u.updateSecondDate(n)&&t),"keydown"===e&&(t=!1!==u.handleKeyDown(n,"secondDate")&&t),t},bl.b,bl.a)),t.tb(2,770048,null,0,dl.a,[],{placeholder:[0,"placeholder"],text:[1,"text"]},{blurValue:"blurValue"})],function(l,e){var n=e.component;l(e,2,0,n.placeholder,n.secondDate)},null)}function vl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,10,"div",[["class","component--search-date layout-row layout-align-center-center"]],null,null,null,null,null)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(3,{"joining-between":0}),(l()(),t.ub(4,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t.ub(5,0,null,null,1,"text-input",[["floatLabel","never"]],null,[[null,"blurValue"],[null,"keydown"]],function(l,e,n){var t=!0,u=l.component;return"blurValue"===e&&(t=!1!==u.updateFirstDate(n)&&t),"keydown"===e&&(t=!1!==u.handleKeyDown(n,"firstDate")&&t),t},bl.b,bl.a)),t.tb(6,770048,null,0,dl.a,[],{placeholder:[0,"placeholder"],text:[1,"text"]},{blurValue:"blurValue"}),(l()(),t.kb(16777216,null,null,1,null,gl)),t.tb(8,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,fl)),t.tb(10,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component,t=l(e,3,0,2==n.numOfValues);l(e,2,0,"component--search-date layout-row layout-align-center-center",t),l(e,6,0,n.placeholder,n.firstDate),l(e,8,0,2==n.numOfValues),l(e,10,0,2==n.numOfValues)},null)}function yl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t.Ob(1,null,[" "," "," "])),t.Kb(2,1)],null,function(l,e){var n=e.component,u=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent.parent,0),"CBL.SEARCH.JOINING_BETWEEN"));l(e,1,0,u,n.secondDate)})}function Il(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,3,"div",[["class","component--search-date cb-nowrap"]],null,null,null,null,null)),(l()(),t.Ob(1,null,[" "," "])),(l()(),t.kb(16777216,null,null,1,null,yl)),t.tb(3,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){l(e,3,0,2===e.component.numOfValues)},function(l,e){l(e,1,0,e.component.firstDate)})}function Sl(l){return t.Qb(0,[t.Ib(0,b.a,[d.a]),(l()(),t.kb(16777216,null,null,1,null,vl)),t.tb(2,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,Il)),t.tb(4,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,2,0,!n.isReadOnly),l(e,4,0,n.isReadOnly)},null)}var kl=n("rDbB"),Ll=n("0XCs"),Cl=n("omos");class El{constructor(l,e,n){this.searchStateService=l,this.metadataService=e,this.logService=n}ngOnInit(){this.initializeLogger(),this.setNumberValues(),this.setPrecisionAndIsPercentage()}handleKeyDown(l,e){l.keyCode===hl.a.ENTER&&(this[e]=l.value,this.updatePredicateValues())}handleValueUpdate(l,e){this[e]=l,this.updatePredicateValues()}setPrecisionAndIsPercentage(){let l=this.getPredicateField();if(this.isDecimal){let{decimal:e}=l.display;if(!e)return this.logger.error("Decimal field did not come with a valid precision",{queryItem:this.getPredicate}),this.precision=2,void(this.isPercentage=!1);e.precision&&Object(h.isInteger)(e.precision)&&e.precision>=1?this.precision=e.precision:(this.logger.error("Decimal field did not come with a valid precision",{queryItem:this.getPredicate}),this.precision=2),this.isPercentage=!!e.is_percentage&&e.is_percentage}else this.precision=0,this.isPercentage=!1}initializeLogger(){this.logger=this.logService.getLogger("SearchTextShortComponent")}setNumberValues(){let l=this.getPredicate();if(l){let e=this.getPredicateValues(l);e&&(this.firstNumber=e[0],2===this.numOfValues&&(this.secondNumber=e[1]))}}updatePredicateValues(){(!(this.numOfValues>=2)||this.firstNumber&&this.secondNumber)&&this.searchStateService.setPredicateValues(this.queryItemId,this.getValues())}getValues(){return 1===this.numOfValues?Object(h.isNumber)(this.firstNumber)?[this.firstNumber]:null:this.numOfValues>=2&&Object(h.isNumber)(this.firstNumber)&&Object(h.isNumber)(this.secondNumber)?[this.firstNumber||null,this.secondNumber||null]:null}getPredicateField(){let l=this.getPredicate();if(!l)return null;try{let n=l.field;return this.metadataService.getField(this.collectionId,n)||(this.logger.error("Predicate fieldId available on the provided collection",{collectionId:this.collectionId,fieldId:n,predicate:l}),null)}catch(e){return this.logger.error("Predicate field is in an unexpected format",{predicate:l,error:e}),null}}getPredicate(){let l=this.searchStateService.getQueryItem(this.queryItemId);return l?l&&l.getType()!==m.F.TypeEnum.predicate?(this.logger.error("Query item was not of the expected type",l),null):l:null}getPredicateValues(l){try{return l.predicateValues?Object(h.isArray)(l.predicateValues)&&l.predicateValues.length===this.numOfValues&&!Object(h.some)(l.predicateValues,l=>!Object(h.isNumber)(l))?l.predicateValues:(this.logger.error("Predicate values are in an unexpected format",l),null):null}catch(e){return this.logger.error("Predicate values are in an unexpected format",{predicate:l,error:e}),null}}}var Ol=t.sb({encapsulation:2,styles:[],data:{}});function Gl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"span",[["class","joining-between"]],null,null,null,null,null)),(l()(),t.Ob(1,null,[" "," "])),t.Kb(2,1)],null,function(l,e){var n=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent.parent,0),"CBL.SEARCH.JOINING_BETWEEN"));l(e,1,0,n)})}function Pl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"number-input",[["floatLabel","never"]],null,[[null,"blurValue"],[null,"keyDown"]],function(l,e,n){var t=!0,u=l.component;return"blurValue"===e&&(t=!1!==u.handleValueUpdate(n,"secondNumber")&&t),"keyDown"===e&&(t=!1!==u.handleKeyDown(n,"secondNumber")&&t),t},kl.b,kl.a)),t.tb(1,770048,null,0,Ll.a,[Cl.a],{placeholder:[0,"placeholder"],fieldValue:[1,"fieldValue"],precision:[2,"precision"],isPercentage:[3,"isPercentage"]},{blurValue:"blurValue",keyDown:"keyDown"})],function(l,e){var n=e.component;l(e,1,0,n.placeholder,n.secondNumber,n.precision,n.isPercentage)},null)}function wl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,9,"div",[["class","component--search-number layout-row layout-align-start-center"]],null,null,null,null,null)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(3,{"joining-between":0}),(l()(),t.ub(4,0,null,null,1,"number-input",[["floatLabel","never"]],null,[[null,"blurValue"],[null,"keyDown"]],function(l,e,n){var t=!0,u=l.component;return"blurValue"===e&&(t=!1!==u.handleValueUpdate(n,"firstNumber")&&t),"keyDown"===e&&(t=!1!==u.handleKeyDown(n,"firstNumber")&&t),t},kl.b,kl.a)),t.tb(5,770048,null,0,Ll.a,[Cl.a],{placeholder:[0,"placeholder"],fieldValue:[1,"fieldValue"],precision:[2,"precision"],isPercentage:[3,"isPercentage"]},{blurValue:"blurValue",keyDown:"keyDown"}),(l()(),t.kb(16777216,null,null,1,null,Gl)),t.tb(7,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,Pl)),t.tb(9,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component,t=l(e,3,0,2==n.numOfValues);l(e,2,0,"component--search-number layout-row layout-align-start-center",t),l(e,5,0,n.placeholder,n.firstNumber,n.precision,n.isPercentage),l(e,7,0,n.numOfValues>1),l(e,9,0,n.numOfValues>1)},null)}function xl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t.Ob(1,null,[" "," "," "])),t.Kb(2,1)],null,function(l,e){var n=e.component,u=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent.parent,0),"CBL.SEARCH.JOINING_BETWEEN"));l(e,1,0,u,n.secondNumber)})}function _l(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,3,"div",[["class","component--search-number cb-nowrap"]],null,null,null,null,null)),(l()(),t.Ob(1,null,[" "," "])),(l()(),t.kb(16777216,null,null,1,null,xl)),t.tb(3,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){l(e,3,0,e.component.numOfValues>1)},function(l,e){l(e,1,0,e.component.firstNumber)})}function Tl(l){return t.Qb(0,[t.Ib(0,b.a,[d.a]),(l()(),t.kb(16777216,null,null,1,null,wl)),t.tb(2,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,_l)),t.tb(4,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,2,0,!n.isReadOnly),l(e,4,0,n.isReadOnly)},null)}var Rl=n("oc/z");class Al{constructor(l){this.searchStateService=l}ngOnInit(){this.setup()}handleKeyDown(l,e){l.keyCode===hl.a.ENTER&&(this[e]=l.value,this.updateValues())}handleValueUpdate(l,e){this[e]=l,this.updateValues()}setup(){this.precision=this.decimal?2:0,this.queryItem=this.searchStateService.getQueryItem(this.queryItemId);let l=this.queryItem,e=l.predicateValues?l.predicateValues:[];e&&e[0]&&e[0].value&&(this.firstMoney=e[0].value),e&&e[1]&&e[1].value&&(this.secondMoney=e[1].value)}formatValue(l){return{value:l,currency:"usd"}}updateValues(){(2!==this.numOfValues||this.firstMoney&&this.secondMoney)&&this.searchStateService.setPredicateValues(this.queryItemId,this.getValues())}getValues(){return 1===this.numOfValues?"number"==typeof this.firstMoney?[this.formatValue(this.firstMoney)]:null:2===this.numOfValues?"number"!=typeof this.firstMoney&&"number"!=typeof this.secondMoney?null:[this.formatValue(this.firstMoney),this.formatValue(this.secondMoney)]:null}}var Dl=t.sb({encapsulation:2,styles:[],data:{}});function Fl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"span",[["class","joining-between"]],null,null,null,null,null)),(l()(),t.Ob(1,null,[" "," "])),t.Kb(2,1)],null,function(l,e){var n=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent.parent,0),"CBL.SEARCH.JOINING_BETWEEN"));l(e,1,0,n)})}function Ml(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"number-input",[["floatLabel","never"]],null,[[null,"blurValue"],[null,"keyDown"]],function(l,e,n){var t=!0,u=l.component;return"blurValue"===e&&(t=!1!==u.handleValueUpdate(n,"secondMoney")&&t),"keyDown"===e&&(t=!1!==u.handleKeyDown(n,"secondMoney")&&t),t},kl.b,kl.a)),t.tb(1,770048,null,0,Ll.a,[Cl.a],{placeholder:[0,"placeholder"],fieldValue:[1,"fieldValue"],precision:[2,"precision"]},{blurValue:"blurValue",keyDown:"keyDown"})],function(l,e){var n=e.component;l(e,1,0,n.placeholder,n.secondMoney,n.precision)},null)}function Vl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,4,"div",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,1,"icon",[["class","cb-margin-small-bottom"],["key","attach-money"]],[[8,"className",0]],null,null,o.b,o.a)),t.tb(2,573440,null,0,c.a,[u.e,t.k],{key:[0,"key"],class:[1,"class"]},null),(l()(),t.kb(16777216,null,null,1,null,Ml)),t.tb(4,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,2,0,"attach-money","cb-margin-small-bottom"),l(e,4,0,2==n.numOfValues)},function(l,e){l(e,1,0,t.Gb(e,2).classes)})}function Ql(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,9,"div",[["class","component--search-money layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,4,"div",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(2,0,null,null,1,"icon",[["class","cb-margin-small-bottom"],["key","attach-money"]],[[8,"className",0]],null,null,o.b,o.a)),t.tb(3,573440,null,0,c.a,[u.e,t.k],{key:[0,"key"],class:[1,"class"]},null),(l()(),t.ub(4,0,null,null,1,"number-input",[["floatLabel","never"]],null,[[null,"blurValue"],[null,"keyDown"]],function(l,e,n){var t=!0,u=l.component;return"blurValue"===e&&(t=!1!==u.handleValueUpdate(n,"firstMoney")&&t),"keyDown"===e&&(t=!1!==u.handleKeyDown(n,"firstMoney")&&t),t},kl.b,kl.a)),t.tb(5,770048,null,0,Ll.a,[Cl.a],{placeholder:[0,"placeholder"],fieldValue:[1,"fieldValue"],precision:[2,"precision"]},{blurValue:"blurValue",keyDown:"keyDown"}),(l()(),t.kb(16777216,null,null,1,null,Fl)),t.tb(7,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,Vl)),t.tb(9,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,3,0,"attach-money","cb-margin-small-bottom"),l(e,5,0,n.placeholder,n.firstMoney,n.precision),l(e,7,0,2===n.numOfValues),l(e,9,0,2==n.numOfValues)},function(l,e){l(e,2,0,t.Gb(e,3).classes)})}function Bl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,3,"span",[],null,null,null,null,null)),(l()(),t.Ob(1,null,[" "," $"," "])),t.Kb(2,1),t.Kb(3,1)],null,function(l,e){var n=e.component,u=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent.parent,0),"CBL.SEARCH.JOINING_BETWEEN")),a=t.Pb(e,1,1,l(e,3,0,t.Gb(e.parent.parent,1),n.firstMoney));l(e,1,0,u,a)})}function Nl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,4,"div",[["class","component--search-money cb-nowrap"]],null,null,null,null,null)),(l()(),t.Ob(1,null,[" $"," "])),t.Kb(2,1),(l()(),t.kb(16777216,null,null,1,null,Bl)),t.tb(4,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){l(e,4,0,2===e.component.numOfValues)},function(l,e){var n=e.component,u=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent,1),n.firstMoney));l(e,1,0,u)})}function ql(l){return t.Qb(0,[t.Ib(0,b.a,[d.a]),t.Ib(0,Rl.a,[]),(l()(),t.kb(16777216,null,null,1,null,Ql)),t.tb(3,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,Nl)),t.tb(5,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,3,0,!n.isReadOnly),l(e,5,0,n.isReadOnly)},null)}var Kl=n("JO7T"),Ul=n("Twrc"),Hl=n("KYkt");class jl{constructor(l,e,n,t){this.searchStateService=l,this.autocompleteService=e,this.metadataService=n,this.permissionService=t,this.selectedItems=[],this.entityDefs=[]}ngOnInit(){this.setup()}updateValues(l){let e=Object(h.map)(l,l=>l.identifier.uuid);this.searchStateService.setPredicateValues(this.queryItemId,e.length>0?e:null)}setup(){this.maximumNumberOfItems=this.permissionService.getMaxQueryValuesLimit(),this.queryItem=this.searchStateService.getQueryItem(this.queryItemId);let l=this.queryItem,e=this.metadataService.getField(this.collectionId,this.fieldId);this.fieldCollectionIds=e.values.collection_ids;for(let n=0;n<this.fieldCollectionIds.length;n++){let l=this.metadataService.getEntityDef(this.fieldCollectionIds[n]);l&&this.entityDefs.push(l)}this.setSelectedItems(l&&l.predicateValues?l.predicateValues:[])}setSelectedItems(l){if(Object(h.isEmpty)(l))return void(this.selectedItems=[]);let e=this.selectedItems.map(l=>l.identifier.uuid);Object(h.isEqual)(e,l)||(this.selectedItems=[],this.autocompleteService.queryEntitiesByUuid(l).then(l=>{this.selectedItems=l},l=>this.selectedItems=[]))}}var zl=n("X/tG"),$l=t.sb({encapsulation:2,styles:[],data:{}});function Jl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"div",[["class","component--search-identifier layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,1,"multi-entity-input",[["floatLabel","never"]],null,[[null,"valueChange"]],function(l,e,n){var t=!0;return"valueChange"===e&&(t=!1!==l.component.updateValues(n)&&t),t},Kl.b,Kl.a)),t.tb(2,638976,null,0,Ul.a,[Hl.a,d.a],{placeholder:[0,"placeholder"],selectedEntities:[1,"selectedEntities"],collectionIds:[2,"collectionIds"],maximumItems:[3,"maximumItems"]},{valueChange:"valueChange"})],function(l,e){var n=e.component;l(e,2,0,n.placeholder,n.selectedItems,n.fieldCollectionIds,n.maximumNumberOfItems)},null)}function Wl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"span",[["class","cb-margin-medium-right cb-nowrap"]],[[1,"aria-label",0]],null,null,null,null)),(l()(),t.Ob(1,null,[" ",""," "]))],null,function(l,e){l(e,0,0,null==e.context.$implicit.identifier?null:e.context.$implicit.identifier.value),l(e,1,0,null==e.context.$implicit.identifier?null:e.context.$implicit.identifier.value,null!=e.context.$implicit.identifier&&e.context.$implicit.identifier.value&&e.context.last?"":", ")})}function Yl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"span",[["class","flex layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,Wl)),t.tb(2,278528,null,0,u.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"]},null)],function(l,e){l(e,2,0,e.component.selectedItems)},null)}function Xl(l){return t.Qb(0,[(l()(),t.kb(16777216,null,null,1,null,Jl)),t.tb(1,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,Yl)),t.tb(3,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,1,0,!n.isReadOnly),l(e,3,0,n.isReadOnly)},null)}class Zl{constructor(l,e){this.searchStateService=l,this.logService=e}ngOnInit(){this.initializeLogger(),this.setTextValue()}ngOnDestroy(){}handleKeyDown(l){l.keyCode===hl.a.ENTER&&this.handleValueUpdate(l.value)}handleValueUpdate(l){l&&Object(h.isString)(l)?this.searchStateService.setPredicateValues(this.queryItemId,[l]):this.searchStateService.setPredicateValues(this.queryItemId,null)}initializeLogger(){this.logger=this.logService.getLogger("SearchTextShortComponent")}setTextValue(){let l=this.getPredicate();l&&(this.selectedValue=this.getPredicateValue(l))}getPredicate(){let l=this.searchStateService.getQueryItem(this.queryItemId);return l?l&&l.getType()!==m.F.TypeEnum.predicate?(this.logger.error("Query item was not of the expected type",l),null):l:null}getPredicateValue(l){try{return l.predicateValues?Object(h.isArray)(l.predicateValues)&&1===l.predicateValues.length&&Object(h.isString)(l.predicateValues[0])?l.predicateValues[0]:(this.logger.error("Predicate values are in an unexpected format",l),""):""}catch(e){return this.logger.error("Predicate values are in an unexpected format",{predicate:l,error:e}),""}}}var le=t.sb({encapsulation:2,styles:[],data:{}});function ee(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"div",[["class","component--search-text-short"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,1,"text-input",[["floatLabel","never"]],null,[[null,"blurValue"],[null,"keyDown"]],function(l,e,n){var t=!0,u=l.component;return"blurValue"===e&&(t=!1!==u.handleValueUpdate(n)&&t),"keyDown"===e&&(t=!1!==u.handleKeyDown(n)&&t),t},bl.b,bl.a)),t.tb(2,770048,null,0,dl.a,[],{placeholder:[0,"placeholder"],text:[1,"text"]},{blurValue:"blurValue",keyDown:"keyDown"})],function(l,e){var n=e.component;l(e,2,0,n.placeholder,n.selectedValue)},null)}function ne(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"div",[["class","component--search-text-short cb-nowrap"]],null,null,null,null,null)),(l()(),t.Ob(1,null,[" ","\n"]))],null,function(l,e){l(e,1,0,e.component.selectedValue)})}function te(l){return t.Qb(0,[(l()(),t.kb(16777216,null,null,1,null,ee)),t.tb(1,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,ne)),t.tb(3,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,1,0,!n.isReadOnly),l(e,3,0,n.isReadOnly)},null)}var ue=n("GAmF"),ae=n("Yo7+");class ie{constructor(l,e){this.searchStateService=l,this.logService=e}ngOnInit(){this.initializeLogger(),this.setTextValues()}handleValuesUpdate(l){l&&Object(h.isArray)(l)&&l.length>0?this.searchStateService.setPredicateValues(this.queryItemId,l):this.searchStateService.setPredicateValues(this.queryItemId,null)}initializeLogger(){this.logger=this.logService.getLogger("SearchTextMultiComponent")}setTextValues(){let l=this.getPredicate();l&&(this.selectedValues=this.getPredicateValues(l))}getPredicate(){let l=this.searchStateService.getQueryItem(this.queryItemId);return l?l&&l.getType()!==m.F.TypeEnum.predicate?(this.logger.error("Query item was not of the expected type",l),null):l:null}getPredicateValues(l){return l.predicateValues?Object(h.isArray)(l.predicateValues)?l.predicateValues:(this.logger.error("Predicate values are in an unexpected format",l),[]):[]}}var se=t.sb({encapsulation:2,styles:[],data:{}});function re(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"div",[["class","component--search-text-short-multi"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,1,"text-multi-input",[["floatLabel","never"]],null,[[null,"valueChange"]],function(l,e,n){var t=!0;return"valueChange"===e&&(t=!1!==l.component.handleValuesUpdate(n)&&t),t},ue.b,ue.a)),t.tb(2,638976,null,0,ae.a,[],{placeholder:[0,"placeholder"],values:[1,"values"]},{valueChange:"valueChange"})],function(l,e){var n=e.component;l(e,2,0,n.placeholder,n.selectedValues)},null)}function oe(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"span",[["class","cb-margin-medium-right cb-nowrap"]],[[1,"aria-label",0]],null,null,null,null)),(l()(),t.Ob(1,null,[" ",""," "]))],null,function(l,e){l(e,0,0,e.context.$implicit),l(e,1,0,e.context.$implicit,e.context.last?"":", ")})}function ce(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"div",[["class","component--search-text-short-multi cb-nowrap"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,oe)),t.tb(2,278528,null,0,u.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"]},null)],function(l,e){l(e,2,0,e.component.selectedValues)},null)}function be(l){return t.Qb(0,[(l()(),t.kb(16777216,null,null,1,null,re)),t.tb(1,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,ce)),t.tb(3,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,1,0,!n.isReadOnly),l(e,3,0,n.isReadOnly)},null)}class de{constructor(l){this.metadataService=l}ngOnInit(){this.setup()}setup(){this.fieldId=this.predicate.field,this.operatorId=this.predicate.operator;let l=this.metadataService.getField(this.collectionId,this.fieldId);if(this.fieldTypeId=l&&l.type_id,this.placeholder=l.labels.placeholder,this.predicate.operator){let l=this.metadataService.getOperator(this.fieldTypeId,this.predicate.operator);this.numOfValues=l.num_fields,this.valueComponentType=this.metadataService.getValueComponentType(this.fieldTypeId,this.operatorId,this.numOfValues)}}}var he=t.sb({encapsulation:2,styles:[],data:{}});function me(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"search-boolean",[],null,null,null,W,z)),t.tb(1,114688,null,0,j,[g.a,d.a],{queryItemId:[0,"queryItemId"],isReadOnly:[1,"isReadOnly"]},null)],function(l,e){var n=e.component;l(e,1,0,n.predicate.id,n.isReadOnly)},null)}function pe(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"search-enum-multi",[],null,null,null,ul,ll)),t.tb(1,114688,null,0,Z,[g.a,y.a],{collectionId:[0,"collectionId"],queryItemId:[1,"queryItemId"],placeholder:[2,"placeholder"],isReadOnly:[3,"isReadOnly"]},null)],function(l,e){var n=e.component;l(e,1,0,n.collectionId,n.predicate.id,n.placeholder,n.isReadOnly)},null)}function ge(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"search-enum-single",[],null,null,null,cl,sl)),t.tb(1,114688,null,0,al,[g.a,y.a,il.a],{collectionId:[0,"collectionId"],queryItemId:[1,"queryItemId"],placeholder:[2,"placeholder"],isReadOnly:[3,"isReadOnly"]},null)],function(l,e){var n=e.component;l(e,1,0,n.collectionId,n.predicate.id,n.placeholder,n.isReadOnly)},null)}function fe(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"search-date",[],null,null,null,Sl,pl)),t.tb(1,114688,null,0,ml,[g.a],{queryItemId:[0,"queryItemId"],numOfValues:[1,"numOfValues"],placeholder:[2,"placeholder"],isReadOnly:[3,"isReadOnly"]},null)],function(l,e){var n=e.component;l(e,1,0,n.predicate.id,n.numOfValues,n.placeholder,n.isReadOnly)},null)}function ve(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"search-number",[],null,null,null,Tl,Ol)),t.tb(1,114688,null,0,El,[g.a,y.a,il.a],{collectionId:[0,"collectionId"],queryItemId:[1,"queryItemId"],numOfValues:[2,"numOfValues"],placeholder:[3,"placeholder"],isDecimal:[4,"isDecimal"],isReadOnly:[5,"isReadOnly"]},null)],function(l,e){var n=e.component;l(e,1,0,n.collectionId,n.predicate.id,n.numOfValues,n.placeholder,"decimal"==n.valueComponentType,n.isReadOnly)},null)}function ye(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"search-money",[],null,null,null,ql,Dl)),t.tb(1,114688,null,0,Al,[g.a],{queryItemId:[0,"queryItemId"],numOfValues:[1,"numOfValues"],placeholder:[2,"placeholder"],isReadOnly:[3,"isReadOnly"]},null)],function(l,e){var n=e.component;l(e,1,0,n.predicate.id,n.numOfValues,n.placeholder,n.isReadOnly)},null)}function Ie(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"search-money",[],null,null,null,ql,Dl)),t.tb(1,114688,null,0,Al,[g.a],{queryItemId:[0,"queryItemId"],numOfValues:[1,"numOfValues"],placeholder:[2,"placeholder"],decimal:[3,"decimal"],isReadOnly:[4,"isReadOnly"]},null)],function(l,e){var n=e.component;l(e,1,0,n.predicate.id,n.numOfValues,n.placeholder,!0,n.isReadOnly)},null)}function Se(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"search-identifier",[],null,null,null,Xl,$l)),t.tb(1,114688,null,0,jl,[g.a,zl.a,y.a,f.a],{placeholder:[0,"placeholder"],isReadOnly:[1,"isReadOnly"],queryItemId:[2,"queryItemId"],fieldId:[3,"fieldId"],collectionId:[4,"collectionId"]},null)],function(l,e){var n=e.component;l(e,1,0,n.placeholder,n.isReadOnly,n.predicate.id,n.fieldId,n.collectionId)},null)}function ke(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"search-text-short",[],null,null,null,te,le)),t.tb(1,245760,null,0,Zl,[g.a,il.a],{queryItemId:[0,"queryItemId"],placeholder:[1,"placeholder"],isReadOnly:[2,"isReadOnly"]},null)],function(l,e){var n=e.component;l(e,1,0,n.predicate.id,n.placeholder,n.isReadOnly)},null)}function Le(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"search-text-multi",[],null,null,null,be,se)),t.tb(1,114688,null,0,ie,[g.a,il.a],{queryItemId:[0,"queryItemId"],placeholder:[1,"placeholder"],isReadOnly:[2,"isReadOnly"]},null)],function(l,e){var n=e.component;l(e,1,0,n.predicate.id,n.placeholder,n.isReadOnly)},null)}function Ce(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,23,"div",[["class","component--values queryItemFacet layout-row layout-align-start-center"]],null,null,null,null,null)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(3,{"read-only":0}),(l()(),t.kb(16777216,null,null,1,null,me)),t.tb(5,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,pe)),t.tb(7,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,ge)),t.tb(9,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,fe)),t.tb(11,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,ve)),t.tb(13,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,ye)),t.tb(15,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,Ie)),t.tb(17,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,Se)),t.tb(19,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,ke)),t.tb(21,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,Le)),t.tb(23,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component,t=l(e,3,0,n.isReadOnly);l(e,2,0,"component--values queryItemFacet layout-row layout-align-start-center",t),l(e,5,0,"boolean"==n.valueComponentType),l(e,7,0,"enumMulti"==n.valueComponentType),l(e,9,0,"enumSingle"==n.valueComponentType),l(e,11,0,"date"==n.valueComponentType),l(e,13,0,"integer"==n.valueComponentType||"decimal"==n.valueComponentType),l(e,15,0,"money"==n.valueComponentType),l(e,17,0,"money_decimal"==n.valueComponentType),l(e,19,0,"identifier"==n.valueComponentType),l(e,21,0,"text"==n.valueComponentType),l(e,23,0,"text_multi"==n.valueComponentType)},null)}class Ee{constructor(l){this.searchStateService=l}removeQueryItem(){this.searchStateService.removeQueryItem(this.queryItemId)}}var Oe=t.sb({encapsulation:2,styles:[],data:{}});function Ge(l){return t.Qb(0,[t.Ib(0,b.a,[d.a]),(l()(),t.ub(1,0,null,null,5,"div",[["class","component--query-item-remove"]],null,null,null,null,null)),(l()(),t.ub(2,0,null,null,4,"button",[["class","mat-icon-button"],["mat-icon-button",""],["type","button"]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.removeQueryItem()&&t),t},a.d,a.b)),t.tb(3,180224,null,0,i.b,[t.k,s.f,[2,r.a]],null,null),t.Kb(4,1),(l()(),t.ub(5,0,null,0,1,"icon",[["key","remove"]],[[8,"className",0]],null,null,o.b,o.a)),t.tb(6,573440,null,0,c.a,[u.e,t.k],{key:[0,"key"]},null)],function(l,e){l(e,6,0,"remove")},function(l,e){var n=t.Pb(e,2,0,l(e,4,0,t.Gb(e,0),"CBL.SEARCH.REMOVE_FILTER"));l(e,2,0,n,t.Gb(e,3).disabled||null,"NoopAnimations"===t.Gb(e,3)._animationMode),l(e,5,0,t.Gb(e,6).classes)})}var Pe=n("0Fmc"),we=n("TpTQ"),xe=n("k6lf"),_e=n("TejB");class Te{constructor(l,e,n,t){this.labelService=l,this.metadataService=e,this.dialogService=n,this.themeService=t}ngOnInit(){if(this.predicate.field){this.selectedField=this.metadataService.getField(this.parentCollectionId,this.predicate.field);let l=this.metadataService.getFieldTheme(this.parentCollectionId,this.predicate.field);l&&l.id&&this.themeService.isPartnerTheme(l.id)&&(this.partnerThemeId=l.id)}else Promise.resolve().then(()=>this.showQueryItemDrillPanel())}showQueryItemDrillPanel(){let l={title:this.labelService.getLabel("CBL.SEARCH.EDIT_FIELD"),search:this.search,parentCollectionId:this.parentCollectionId,queryItem:this.predicate};this.dialogService.showDialog(_e.a,l)}}var Re=n("GKMj"),Ae=t.sb({encapsulation:2,styles:[],data:{}});function De(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"div",[["class","flex-none field-theme-icon layout-row layout-align-center-center"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,1,"theme-icon",[],null,null,null,Pe.b,Pe.a)),t.tb(2,638976,null,0,we.a,[t.k,xe.a],{themeId:[0,"themeId"]},null)],function(l,e){l(e,2,0,e.component.partnerThemeId)},null)}function Fe(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"span",[["class","cb-overflow-ellipsis cb-display-block"]],null,null,null,null,null)),(l()(),t.Ob(1,null,[" "," "])),t.Kb(2,1)],null,function(l,e){var n=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent.parent,0),"CBL.SEARCH.FIELD_PLACEHOLDER"));l(e,1,0,n)})}function Me(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,4,"span",[["class","cb-overflow-ellipsis cb-display-block"]],[[1,"aria-label",0]],null,null,null,null)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(3,{fieldSelected:0}),(l()(),t.Ob(4,null,[" "," "]))],function(l,e){var n=l(e,3,0,e.component.selectedField);l(e,2,0,"cb-overflow-ellipsis cb-display-block",n)},function(l,e){var n=e.component;l(e,0,0,n.selectedField.labels.name),l(e,4,0,n.selectedField.labels.name)})}function Ve(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,10,"button",[["class","component--field queryItemFacet layout-row"],["mat-button",""],["type","button"]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.showQueryItemDrillPanel()&&t),t},a.d,a.b)),t.tb(1,180224,null,0,i.b,[t.k,s.f,[2,r.a]],null,null),t.Kb(2,1),(l()(),t.ub(3,0,null,0,7,"div",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,De)),t.tb(5,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ub(6,0,null,null,4,"div",[["class","flex"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,Fe)),t.tb(8,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,Me)),t.tb(10,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,5,0,n.partnerThemeId),l(e,8,0,!n.selectedField),l(e,10,0,n.selectedField)},function(l,e){var n=t.Pb(e,0,0,l(e,2,0,t.Gb(e.parent,0),"CBL.SEARCH.EDIT_FIELD"));l(e,0,0,n,t.Gb(e,1).disabled||null,"NoopAnimations"===t.Gb(e,1)._animationMode)})}function Qe(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,4,"span",[["class","cb-overflow-ellipsis cb-display-block"]],null,null,null,null,null)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(3,{fieldSelected:0}),(l()(),t.Ob(4,null,[" "," "]))],function(l,e){var n=l(e,3,0,e.component.selectedField);l(e,2,0,"cb-overflow-ellipsis cb-display-block",n)},function(l,e){l(e,4,0,e.component.selectedField.labels.name)})}function Be(l){return t.Qb(0,[(l()(),t.ub(0,16777216,null,null,6,"div",[["class","component--field queryItemFacet read-only"]],null,[[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(l,e,n){var u=!0;return"longpress"===e&&(u=!1!==t.Gb(l,4).show()&&u),"keydown"===e&&(u=!1!==t.Gb(l,4)._handleKeydown(n)&&u),"touchend"===e&&(u=!1!==t.Gb(l,4)._handleTouchend()&&u),u},null,null)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(3,{onlyChild:0}),t.tb(4,212992,null,0,D.d,[F.c,t.k,A.b,t.P,t.y,x.a,s.c,s.f,D.b,[2,w.b],[2,D.a],[2,M.g]],{message:[0,"message"]},null),(l()(),t.kb(16777216,null,null,1,null,Qe)),t.tb(6,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(0,null,null,0))],function(l,e){var n=e.component,t=l(e,3,0,n.isOnlyChild);l(e,2,0,"component--field queryItemFacet read-only",t),l(e,4,0,n.selectedField.labels.name),l(e,6,0,n.selectedField)},null)}function Ne(l){return t.Qb(0,[t.Ib(0,b.a,[d.a]),(l()(),t.kb(16777216,null,null,1,null,Ve)),t.tb(2,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,Be)),t.tb(4,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,2,0,!n.isReadOnly),l(e,4,0,n.isReadOnly)},null)}class qe{}var Ke=t.sb({encapsulation:2,styles:[],data:{}});function Ue(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"operators",[["class","flex-none"]],null,null,null,K,Q)),t.tb(1,114688,null,0,V,[g.a,y.a],{collectionId:[0,"collectionId"],predicate:[1,"predicate"],isReadOnly:[2,"isReadOnly"]},null)],function(l,e){var n=e.component;l(e,1,0,n.parentCollectionId,n.predicate,n.isReadOnly)},null)}function He(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,3,"div",[["class","queryItemFacet placeholder operatorPlaceholder layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t.Ob(2,null,["",""])),t.Kb(3,1)],null,function(l,e){var n=t.Pb(e,2,0,l(e,3,0,t.Gb(e.parent,0),"CBL.SEARCH.OPERATOR_PLACEHOLDER"));l(e,2,0,n)})}function je(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"values",[],null,null,null,Ce,he)),t.tb(1,114688,null,0,de,[y.a],{collectionId:[0,"collectionId"],predicate:[1,"predicate"],isReadOnly:[2,"isReadOnly"]},null)],function(l,e){var n=e.component;l(e,1,0,n.parentCollectionId,n.predicate,n.isReadOnly)},null)}function ze(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,3,"div",[["class","queryItemFacet placeholder valuesPlaceholder layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t.Ob(2,null,["",""])),t.Kb(3,1)],null,function(l,e){var n=t.Pb(e,2,0,l(e,3,0,t.Gb(e.parent,0),"CBL.SEARCH.VALUE_PLACEHOLDER"));l(e,2,0,n)})}function $e(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"query-item-remove",[],null,null,null,Ge,Oe)),t.tb(1,49152,null,0,Ee,[g.a],{queryItemId:[0,"queryItemId"]},null)],function(l,e){l(e,1,0,e.component.predicate.id)},null)}function Je(l){return t.Qb(0,[t.Ib(0,b.a,[d.a]),(l()(),t.ub(1,0,null,null,18,"div",[["class","component--predicate layout-row layout-align-start-start"]],null,null,null,null,null)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(3,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(4,{lastChild:0,onlyChild:1,"read-only":2}),(l()(),t.ub(5,0,null,null,3,"div",[["class","fieldWrapper flex-none"]],null,null,null,null,null)),(l()(),t.ub(6,0,null,null,1,"field",[],null,null,null,Ne,Ae)),t.tb(7,114688,null,0,Te,[d.a,y.a,Re.a,xe.a],{search:[0,"search"],parentCollectionId:[1,"parentCollectionId"],predicate:[2,"predicate"],isLastChild:[3,"isLastChild"],isOnlyChild:[4,"isOnlyChild"],isReadOnly:[5,"isReadOnly"]},null),t.Fb(null,0),(l()(),t.ub(9,0,null,null,10,"div",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,Ue)),t.tb(11,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,He)),t.tb(13,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,je)),t.tb(15,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,ze)),t.tb(17,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,$e)),t.tb(19,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component,t=l(e,4,0,n.isLastChild,n.isOnlyChild,n.isReadOnly);l(e,3,0,"component--predicate layout-row layout-align-start-start",t),l(e,7,0,n.search,n.parentCollectionId,n.predicate,n.isLastChild,n.isOnlyChild,n.isReadOnly),l(e,11,0,n.predicate.field),l(e,13,0,!n.predicate.field),l(e,15,0,n.predicate.operator),l(e,17,0,!n.predicate.operator),l(e,19,0,!n.isReadOnly)},null)}class We{ngOnChanges(l){l.queryItem&&this.setType()}setType(){this.type=m.F.TypeEnum[this.queryItem.getType()]}}class Ye{constructor(l,e,n,t){this.labelService=l,this.metadataService=e,this.themeService=n,this.dialogService=t}ngOnInit(){this.selectedRelationship=this.metadataService.getRelationshipByCollectionId(this.parentCollectionId,this.subquery.relCollectionId);let l=this.metadataService.getEntityDefTheme(this.subquery.relCollectionId);l&&l.id&&this.themeService.isPartnerTheme(l.id)&&(this.partnerThemeId=l.id)}showQueryItemDrillPanel(){let l={title:this.labelService.getLabel("CBL.SEARCH.EDIT_FIELD"),search:this.search,parentCollectionId:this.parentCollectionId,queryItem:this.subquery};this.dialogService.showDialog(_e.a,l)}}var Xe=t.sb({encapsulation:2,styles:[],data:{}});function Ze(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"div",[["class","flex-none relationship-theme-icon layout-row layout-align-center-center"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,1,"theme-icon",[],null,null,null,Pe.b,Pe.a)),t.tb(2,638976,null,0,we.a,[t.k,xe.a],{themeId:[0,"themeId"]},null)],function(l,e){l(e,2,0,e.component.partnerThemeId)},null)}function ln(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"span",[["class","cb-overflow-ellipsis cb-display-block"]],null,null,null,null,null)),(l()(),t.Ob(1,null,[" "," "])),t.Kb(2,1)],null,function(l,e){var n=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent.parent,0),"CBL.SEARCH.FIELD_PLACEHOLDER"));l(e,1,0,n)})}function en(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,4,"span",[["class","cb-overflow-ellipsis cb-display-block"]],[[1,"aria-label",0]],null,null,null,null)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(3,{relationshipSelected:0}),(l()(),t.Ob(4,null,[" "," "]))],function(l,e){var n=l(e,3,0,e.component.selectedRelationship);l(e,2,0,"cb-overflow-ellipsis cb-display-block",n)},function(l,e){var n=e.component;l(e,0,0,n.selectedRelationship.labels.name),l(e,4,0,n.selectedRelationship.labels.name)})}function nn(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,10,"button",[["class","component--relationship queryItemFacet layout-row"],["mat-button",""],["type","button"]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.showQueryItemDrillPanel()&&t),t},a.d,a.b)),t.tb(1,180224,null,0,i.b,[t.k,s.f,[2,r.a]],null,null),t.Kb(2,1),(l()(),t.ub(3,0,null,0,7,"div",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,Ze)),t.tb(5,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ub(6,0,null,null,4,"div",[["class","flex"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,ln)),t.tb(8,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,en)),t.tb(10,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,5,0,n.partnerThemeId),l(e,8,0,!n.selectedRelationship),l(e,10,0,n.selectedRelationship)},function(l,e){var n=t.Pb(e,0,0,l(e,2,0,t.Gb(e.parent,0),"CBL.SEARCH.EDIT_FIELD"));l(e,0,0,n,t.Gb(e,1).disabled||null,"NoopAnimations"===t.Gb(e,1)._animationMode)})}function tn(l){return t.Qb(0,[(l()(),t.ub(0,16777216,null,null,5,"span",[["class","cb-overflow-ellipsis cb-display-block"]],[[1,"aria-label",0]],[[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(l,e,n){var u=!0;return"longpress"===e&&(u=!1!==t.Gb(l,4).show()&&u),"keydown"===e&&(u=!1!==t.Gb(l,4)._handleKeydown(n)&&u),"touchend"===e&&(u=!1!==t.Gb(l,4)._handleTouchend()&&u),u},null,null)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(3,{relationshipSelected:0}),t.tb(4,212992,null,0,D.d,[F.c,t.k,A.b,t.P,t.y,x.a,s.c,s.f,D.b,[2,w.b],[2,D.a],[2,M.g]],{message:[0,"message"]},null),(l()(),t.Ob(5,null,[" "," "])),(l()(),t.kb(0,null,null,0))],function(l,e){var n=e.component,t=l(e,3,0,n.selectedRelationship);l(e,2,0,"cb-overflow-ellipsis cb-display-block",t),l(e,4,0,n.selectedRelationship.labels.name)},function(l,e){var n=e.component;l(e,0,0,n.selectedRelationship.labels.name),l(e,5,0,n.selectedRelationship.labels.name)})}function un(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,5,"div",[["class","component--relationship queryItemFacet layout-row read-only"]],null,null,null,null,null)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(3,{onlyChild:0}),(l()(),t.kb(16777216,null,null,1,null,tn)),t.tb(5,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component,t=l(e,3,0,n.isOnlyChild);l(e,2,0,"component--relationship queryItemFacet layout-row read-only",t),l(e,5,0,n.selectedRelationship)},null)}function an(l){return t.Qb(0,[t.Ib(0,b.a,[d.a]),(l()(),t.kb(16777216,null,null,1,null,nn)),t.tb(2,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,un)),t.tb(4,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,2,0,!n.isReadOnly),l(e,4,0,n.isReadOnly)},null)}class sn{constructor(l){this.metadataService=l}ngOnInit(){let l=this.metadataService.getRelationshipByCollectionId(this.parentCollectionId,this.subquery.relCollectionId),e=l&&l.target&&l.target.entity_def_id;e&&(this.collectionId=e)}trackByQueryItemId(l){return l.id?l.id:void 0}}var rn=t.sb({encapsulation:2,styles:[],data:{}});function on(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"query-item-add",[["query-item-add-for-predicate",""]],null,null,null,C,I)),t.tb(1,573440,null,0,p,[g.a,f.a,v.a,y.a],{search:[0,"search"],subquery:[1,"subquery"],parentCollectionId:[2,"parentCollectionId"]},null)],function(l,e){var n=e.component;l(e,1,0,n.search,n.subquery,n.collectionId)},null)}function cn(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"query-item-add",[["query-item-add-for-subquery",""]],null,null,null,C,I)),t.tb(1,573440,null,0,p,[g.a,f.a,v.a,y.a],{search:[0,"search"],subquery:[1,"subquery"],parentCollectionId:[2,"parentCollectionId"]},null)],function(l,e){var n=e.component;l(e,1,0,n.search,n.subquery,n.collectionId)},null)}function bn(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,7,"div",[["class","layout-row"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,6,"div",[["class","flex"]],null,null,null,null,null)),(l()(),t.ub(2,0,null,null,5,"query-item",[],null,null,null,fn,mn)),t.tb(3,573440,null,0,We,[],{queryItem:[0,"queryItem"],parentCollectionId:[1,"parentCollectionId"],search:[2,"search"],isLastChild:[3,"isLastChild"],isFirstChild:[4,"isFirstChild"],isOnlyChild:[5,"isOnlyChild"],isReadOnly:[6,"isReadOnly"]},null),(l()(),t.kb(16777216,null,0,1,null,on)),t.tb(5,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,1,1,null,cn)),t.tb(7,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,3,0,e.context.$implicit,n.collectionId,n.search,e.context.last,e.context.first,e.context.first&&e.context.last,n.isReadOnly),l(e,5,0,e.context.last&&!n.isReadOnly),l(e,7,0,e.context.last&&!n.isReadOnly)},null)}function dn(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"div",[["class","queryItemGroup flex-none"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,bn)),t.tb(2,278528,null,0,u.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(l,e){var n=e.component;l(e,2,0,n.subquery.getQueryItems(),n.trackByQueryItemId)},null)}function hn(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,9,"div",[["class","component--subquery layout-row"]],null,null,null,null,null)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(3,{lastChild:0,onlyChild:1,"read-only":2}),(l()(),t.ub(4,0,null,null,3,"div",[["class","fieldWrapper flex-none"]],null,null,null,null,null)),(l()(),t.ub(5,0,null,null,1,"relationship",[],null,null,null,an,Xe)),t.tb(6,114688,null,0,Ye,[d.a,y.a,xe.a,Re.a],{search:[0,"search"],parentCollectionId:[1,"parentCollectionId"],subquery:[2,"subquery"],isLastChild:[3,"isLastChild"],isOnlyChild:[4,"isOnlyChild"],isReadOnly:[5,"isReadOnly"]},null),t.Fb(null,0),(l()(),t.kb(16777216,null,null,1,null,dn)),t.tb(9,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component,t=l(e,3,0,n.isLastChild,n.isOnlyChild,n.isReadOnly);l(e,2,0,"component--subquery layout-row",t),l(e,6,0,n.search,n.parentCollectionId,n.subquery,n.isLastChild,n.isOnlyChild,n.isReadOnly),l(e,9,0,n.subquery.getQueryItems().length>0)},null)}var mn=t.sb({encapsulation:2,styles:[],data:{}});function pn(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"predicate",[],null,null,null,Je,Ke)),t.tb(1,49152,null,0,qe,[],{search:[0,"search"],parentCollectionId:[1,"parentCollectionId"],predicate:[2,"predicate"],isLastChild:[3,"isLastChild"],isOnlyChild:[4,"isOnlyChild"],isReadOnly:[5,"isReadOnly"]},null),t.Fb(0,0)],function(l,e){var n=e.component;l(e,1,0,n.search,n.parentCollectionId,n.queryItem,n.isLastChild,n.isOnlyChild,n.isReadOnly)},null)}function gn(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"subquery",[],null,null,null,hn,rn)),t.tb(1,114688,null,0,sn,[y.a],{parentCollectionId:[0,"parentCollectionId"],search:[1,"search"],subquery:[2,"subquery"],isLastChild:[3,"isLastChild"],isOnlyChild:[4,"isOnlyChild"],isReadOnly:[5,"isReadOnly"]},null),t.Fb(0,1)],function(l,e){var n=e.component;l(e,1,0,n.parentCollectionId,n.search,n.queryItem,n.isLastChild,n.isOnlyChild,n.isReadOnly)},null)}function fn(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,7,"div",[["class","component--query-item layout-row"]],null,null,null,null,null)),t.Lb(512,null,u.E,u.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,u.n,[u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Jb(3,{firstChild:0,"read-only":1}),(l()(),t.kb(16777216,null,null,1,null,pn)),t.tb(5,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,gn)),t.tb(7,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component,t=l(e,3,0,n.isFirstChild,n.isReadOnly);l(e,2,0,"component--query-item layout-row",t),l(e,5,0,"predicate"===n.type),l(e,7,0,"sub_query"===n.type)},null)}n("KVmP"),n.d(e,"a",function(){return vn}),n.d(e,"b",function(){return Ln});var vn=t.sb({encapsulation:2,styles:[],data:{}});function yn(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"query-item-add",[["query-item-add-for-predicate",""]],null,null,null,C,I)),t.tb(1,573440,null,0,p,[g.a,f.a,v.a,y.a],{search:[0,"search"],parentCollectionId:[1,"parentCollectionId"]},null)],function(l,e){var n=e.component;l(e,1,0,n.search,n.search.collectionId)},null)}function In(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"query-item-add",[["query-item-add-for-subquery",""]],null,null,null,C,I)),t.tb(1,573440,null,0,p,[g.a,f.a,v.a,y.a],{search:[0,"search"],parentCollectionId:[1,"parentCollectionId"]},null)],function(l,e){var n=e.component;l(e,1,0,n.search,n.search.collectionId)},null)}function Sn(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,5,"query-item",[],null,null,null,fn,mn)),t.tb(2,573440,null,0,We,[],{queryItem:[0,"queryItem"],parentCollectionId:[1,"parentCollectionId"],search:[2,"search"],isLastChild:[3,"isLastChild"],isFirstChild:[4,"isFirstChild"],isOnlyChild:[5,"isOnlyChild"],isReadOnly:[6,"isReadOnly"]},null),(l()(),t.kb(16777216,null,0,1,null,yn)),t.tb(4,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,1,1,null,In)),t.tb(6,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,2,0,e.context.$implicit,n.search.collectionId,n.search,e.context.last,e.context.first,e.context.first&&e.context.last,n.isReadOnly),l(e,4,0,e.context.last&&!n.isReadOnly),l(e,6,0,e.context.last&&!n.isReadOnly)},null)}function kn(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"query-item-add",[],null,null,null,C,I)),t.tb(1,573440,null,0,p,[g.a,f.a,v.a,y.a],{search:[0,"search"],parentCollectionId:[1,"parentCollectionId"],isOnlyChild:[2,"isOnlyChild"]},null)],function(l,e){var n=e.component;l(e,1,0,n.search,n.search.collectionId,!0)},null)}function Ln(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,3,"div",[["class","component--filters"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,2,"div",[["class","queryItemGroup"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,Sn)),t.tb(3,278528,null,0,u.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(l()(),t.kb(16777216,null,null,1,null,kn)),t.tb(5,16384,null,0,u.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,3,0,n.queryItems,n.trackQueryItem),l(e,5,0,!((null==n.queryItems?null:n.queryItems.length)>0||n.isReadOnly))},null)}},Twrc:function(l,e,n){"use strict";n.d(e,"a",function(){return u});var t=n("Mlb/");class u{constructor(l,e){this.overlayComponent=l,this.labelService=e,this.isSubfield=!1,this.isRequired=!1,this.isDisabled=!1,this.disabledTooltip="",this.errors=[],this.showHoverPreview=!1,this.valueChange=new t.m,this.hasMaximumItems=!1}ngOnInit(){this.selectedEntities=this.getSelectedEntities(),this.maxItemsLabel=this.labelService.getLabel("CBL.INPUTS.HAS_MAX_ITEMS")}ngOnChanges(l){this.runValidation()}selectEntity(l){l&&(this.isEntitySelected(l)?(this.alreadySelectedEntity=l,setTimeout(()=>delete this.alreadySelectedEntity,400)):(this.selectedEntities.push(l),this.valueChange.emit(this.selectedEntities),this.runValidation()))}removeEntity(l){if(l&&this.isEntitySelected(l)){const e=this.selectedEntities.findIndex(e=>l.identifier.uuid===e.identifier.uuid);e>-1&&(this.selectedEntities.splice(e,1),this.valueChange.emit(this.selectedEntities),this.runValidation())}}isEntitySelected(l){if(l)return 0!==this.selectedEntities.length&&!!this.selectedEntities.find(e=>l.identifier.uuid===e.identifier.uuid)}runValidation(){this.hasMaximumItems=!!(this.maximumItems&&this.selectedEntities.length>=this.maximumItems)}getSelectedEntities(){return this.selectedEntities&&this.selectedEntities.length>=0?this.selectedEntities:[]}}},aMtI:function(l,e,n){"use strict";n.d(e,"a",function(){return o});var t=n("9va6"),u=n("EYJY"),a=n("ccoi"),i=n("Mlb/"),s=n("ue+9"),r=n("rILe");let o=(()=>{class l{constructor(l,e,n,t,a,s,r,o,c,b,d,h){this.labelService=l,this.dialogService=e,this.searchStateService=n,this.searchResultService=t,this.searchUpsellService=a,this.permService=s,this.progressService=r,this.metadataService=o,this.route=c,this.toastService=b,this.util=d,this.logService=h,this.searchHandler=new i.m,this.showTimelineHandler=new i.m,this.columns=[],this.rows=[],this.selectedRows=new Map,this.currentPage=1,this.pageSize=50,this.showAllResultsUpsell=!1,this.showForbiddenUpsell=!1,this.blurredRows=[],this.onDestroy=new u.a}ngOnInit(){this.logger=this.logService.getLogger("ResultsComponent"),this.isStaticList=this.getIsStaticList(),this.searchResultService.getSearchResultsObservable().pipe(Object(a.a)(this.onDestroy)).subscribe(l=>{this.setupParamsSubscription(),this.handleResultsChanged(l)}),this.searchInProgress=this.searchResultService.getSearchInProgressObservable(),this.searchInProgress.pipe(Object(a.a)(this.onDestroy)).subscribe(l=>{l&&(this.rows=[])}),this.currentPage=this.searchResultService.parsePageId(this.pageId).page,this.pageSize=this.searchResultService.getPageSize();let l=this.searchResultService.getResult(this.pageId);l?(this.handleResultsChanged(l),this.setupParamsSubscription()):this.searchResultService.search(this.pageId);const e=this.search.getList();this.showQuickAdd=e&&e.list_type===s.C.List_typeEnum.static&&e.is_owner}ngOnChanges(l){if(l.search&&l.search.previousValue){let{currentValue:e,previousValue:n}=l.search;n.collectionId!==e.collectionId&&(this.selectedRows.clear(),this.columns=this.getColumns(e.collectionId,e.getColumns()),this.showQuickAdd&&this.quickAdd.clearInput())}if(l.pageId){let{currentValue:e,previousValue:n,firstChange:t}=l.pageId;!e&&!n||e===n||(this.currentPage=this.searchResultService.parsePageId(e).page,t||this.searchResultService.search(e))}this.setup()}ngOnDestroy(){this.onDestroy.next(),this.dialogService.closeAllDialogs()}handleRemove(){this.searchResultService.search(this.pageId,!0),this.selectedRows.clear()}searchClickHandler(){this.searchHandler.emit()}showTimelineClickHandler(){this.showTimelineHandler.emit()}shouldShowStatistics(){return this.searchStateService.getFieldAggregators().length>0}selectAll(){this.progressService.startProgress(l.PROGRESS_KEY),this.searchResultService.getFullSearchResults().toPromise().then(this.handleSelectAllResults.bind(this),()=>{this.toastService.showSimpleToast("CBL.COMMON.FAILURE"),this.selectIsCapped=!1}).then(()=>{this.progressService.stopProgress(l.PROGRESS_KEY)})}deselectAll(){this.selectedRows.clear(),this.selectIsCapped=!1}selectPage(){this.rows.forEach(l=>{this.selectedRows.set(l.properties.identifier.uuid,l)})}deselectPage(){this.rows.forEach(l=>{this.selectedRows.delete(l.properties.identifier.uuid)}),this.selectIsCapped=!1}setIsSelected(l,e){l?this.selectedRows.set(e.properties.identifier.uuid,e):(this.selectIsCapped=!1,this.selectedRows.delete(e.properties.identifier.uuid))}isRowSelected(l){return!(!l||!l.properties||!this.selectedRows.get(l.properties.identifier.uuid))}trackByColumnId(l,e){return e?this.collectionId+" "+e.id:void 0}trackByRow(l,e){return e?e.properties.identifier.uuid:void 0}setSort(l){l.direction!==s.E.SortEnum.asc&&l.direction!==s.E.SortEnum.desc||(this.searchStateService.setOrder(l.columnId,l.direction),this.searchResultService.search(this.pageId))}removeSort(l){this.searchStateService.removeOrder(),this.searchResultService.search(this.pageId)}removeColumn(l){let e=this.columns.map(l=>l.id),n=this.searchStateService.getOrder(),u=Object(t.indexOf)(e,l);if(u>-1){this.columns.splice(u,1),this.searchStateService.unselectColumn(l);let e=this.searchStateService.getOrder();Object(t.isEqual)(n,e)||this.searchResultService.search(this.pageId)}}moveColumn(l){let e=this.columns.map(l=>l.id),n=e.indexOf(l.columnId),t=-1;if("start"===l.location?t=0:"left"===l.location?t=n-1:"end"===l.location?t=e.length-1:"right"===l.location&&(t=n+1),n>-1&&t>-1&&n!==t){let l=this.columns.splice(n,1)[0];this.columns.splice(t,0,l);let e=this.columns.map(l=>l.id);this.searchStateService.setSelectedColumns(e)}}showColumnPanel(){let l={title:this.labelService.getLabel("CBL.SEARCH.COLUMNS.EDIT_COLUMNS"),searchId:this.search.id};this.dialogService.showDialog(r.a,l)}setupParamsSubscription(){this.paramsSubscription||(this.paramsSubscription=this.route.params.pipe(Object(a.a)(this.onDestroy)).subscribe(()=>{this.triggerAutomaticSearch()}))}triggerAutomaticSearch(){this.searchResultService.search(this.pageId)}setup(){this.updateSort();let{collectionId:l}=this.searchStateService.getSearchInfo();this.collectionId=l}handleResultsChanged(l){this.results=l;let e=this.searchResultService.getSearchError();this.forbiddenResults=e&&e.isForbidden(),this.setUpsell(l);let n=this.searchStateService.getSelectedColumns()||[],{collectionId:t}=this.searchStateService.getSearchInfo();this.collectionId=t,this.columns=this.getColumns(t,n),this.updateSort(),this.updateResults(l)}handleSelectAllResults(l){let e=l.data.entities;this.selectIsCapped=l.data.count>e.length&&!this.permService.hasNerfedSearchResultLimit(),this.selectedRows.clear(),e.forEach(l=>{this.selectedRows.set(l.properties.identifier.uuid,l)})}updateResults(l){let e=[];l&&l.entities?e=l.entities:this.logger.error("Attempted to update results with invalid results data",{results:l}),this.rows=e,this.aggregates=l&&l.aggregates?l.aggregates:{}}getColumns(l,e){let n=this.metadataService.getSortableFieldTypeIds(),u=[];return Object(t.forEach)(e,e=>{let a=this.metadataService.getField(l,e);if(!this.util.isUndefinedOrNull(a)){let l=Object(t.cloneDeep)(a);l.isSortable=n.indexOf(l.type_id)>-1,l.sortUpsell=this.permService.canOrderByField()?null:"column_sort",l.facet_id&&(l.facet=this.metadataService.getFacet(this.collectionId,l.facet_id)),l.theme=this.metadataService.getFieldTheme(this.collectionId,a.id),u.push(l)}}),u}updateSort(){let l=this.searchStateService.getOrder();this.order=l&&l.length>0?l[0]:null}getIsStaticList(){const l=this.search.getList();return!(!l||l.list_type!==s.C.List_typeEnum.static)}setUpsell(l){const e=this.searchUpsellService.getFeatureSetForPage(this.currentPage),n="results"===e;this.blurredRows=l&&l.hiddenEntities||[],this.showAllResultsUpsell=n&&this.blurredRows.length>0,this.showForbiddenUpsell="forbidden"===e;const t=this.metadataService.getEntityDef(this.search.collectionId);this.upsellHeadLineTextContext={totalResultsCount:l.labels&&l.labels.displayTotalResultCount||"",pluralEntityDefLabel:(t&&t.labels&&t.labels.plural).toLowerCase()}}}return l.PROGRESS_KEY="RESULTS",l})()},fMOt:function(l,e,n){"use strict";var t=n("Mlb/"),u=n("Edtt"),a=n("W9sv"),i=n("vk2e"),s=n("0Fmc"),r=n("TpTQ"),o=n("k6lf"),c=n("Htug"),b=n("nJV+"),d=n("3cWx"),h=n("2jA9"),m=n("e9Gc"),p=n("ba/H"),g=n("e5VU"),f=n("t4Na"),v=n("7IHI"),y=n("xnXp"),I=n("dtzk"),S=n("m6Zr"),k=n("YECi"),L=n("NA1h"),C=n("yGyd"),E=n("cEY+"),O=t.sb({encapsulation:2,styles:[],data:{}});function G(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"funding-round",[],null,null,null,d.b,d.a)),t.tb(1,114688,null,0,h.a,[i.d,m.a,p.a,g.a],{activity:[0,"activity"]},null)],function(l,e){l(e,1,0,e.component.activity)},null)}function P(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"acquisition",[],null,null,null,f.b,f.a)),t.tb(1,114688,null,0,v.a,[i.d,m.a,p.a,g.a],{activity:[0,"activity"]},null)],function(l,e){l(e,1,0,e.component.activity)},null)}function w(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"ipo",[],null,null,null,y.b,y.a)),t.tb(1,114688,null,0,I.a,[g.a,p.a,m.a],{activity:[0,"activity"]},null)],function(l,e){l(e,1,0,e.component.activity)},null)}function x(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"fund-raise",[],null,null,null,S.b,S.a)),t.tb(1,114688,null,0,k.a,[i.d,m.a,p.a,g.a],{activity:[0,"activity"]},null)],function(l,e){l(e,1,0,e.component.activity)},null)}function _(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"press-reference",[],null,null,null,L.b,L.a)),t.tb(1,114688,null,0,C.a,[m.a,g.a],{pressReferenceSet:[0,"pressReferenceSet"]},null)],function(l,e){l(e,1,0,e.component.activity)},null)}function T(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,10,"div",[["class","component--activity-row cb-border-top cb-padding-medium"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,G)),t.tb(2,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,P)),t.tb(4,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,w)),t.tb(6,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,x)),t.tb(8,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,_)),t.tb(10,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,2,0,"funding_round"==n.activity.entity_def_id),l(e,4,0,"acquisition"==n.activity.entity_def_id),l(e,6,0,"ipo"==n.activity.entity_def_id),l(e,8,0,"fund"==n.activity.entity_def_id),l(e,10,0,"press_reference"==n.activity.entity_def_id)},null)}var R=n("jmHW"),A=n("pk7F"),D=n("Ienz"),F=n("P6pJ"),M=n("BRL0"),V=n("QwqU"),Q=t.sb({encapsulation:2,styles:[],data:{}});function B(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"activity-row",[],null,null,null,T,O)),t.tb(1,49152,null,0,E.a,[],{activity:[0,"activity"]},null)],function(l,e){l(e,1,0,e.context.$implicit)},null)}function N(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"activity-row",[],[[8,"hidden",0]],null,null,T,O)),t.tb(1,49152,null,0,E.a,[],{activity:[0,"activity"]},null)],function(l,e){l(e,1,0,e.context.$implicit)},function(l,e){l(e,0,0,!e.component.showExtraActivities)})}function q(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,9,"div",[["class","cb-border-top layout-column layout-align-center-center"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,8,"button",[["class","cb-text-transform-upper"],["color","primary"],["mat-button",""]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.showExtraActivityRows()&&t),t},R.d,R.b)),t.tb(2,180224,null,0,A.b,[t.k,D.f,[2,F.a]],{color:[0,"color"]},null),t.Kb(3,1),(l()(),t.ub(4,0,null,0,5,"div",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(5,0,null,null,1,"icon",[["class","flex-none cb-margin-small-right"],["color","inherit"],["key","chevron-down"]],[[8,"className",0]],null,null,c.b,c.a)),t.tb(6,573440,null,0,b.a,[i.e,t.k],{key:[0,"key"],color:[1,"color"],class:[2,"class"]},null),(l()(),t.ub(7,0,null,null,2,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(8,null,["",""])),t.Kb(9,1)],function(l,e){l(e,2,0,"primary"),l(e,6,0,"chevron-down","inherit","flex-none cb-margin-small-right")},function(l,e){var n=t.Pb(e,1,0,l(e,3,0,t.Gb(e.parent.parent,0),"CBL.TIMELINE.SHOW_ALL"));l(e,1,0,n,t.Gb(e,2).disabled||null,"NoopAnimations"===t.Gb(e,2)._animationMode),l(e,5,0,t.Gb(e,6).classes);var u=t.Pb(e,8,0,l(e,9,0,t.Gb(e.parent.parent,0),"CBL.TIMELINE.SHOW_ALL"));l(e,8,0,u)})}function K(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,9,"div",[["class","cb-border-top layout-column layout-align-center-center"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,8,"button",[["class","cb-text-transform-upper"],["color","primary"],["mat-button",""]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.hideExtraActivityRows()&&t),t},R.d,R.b)),t.tb(2,180224,null,0,A.b,[t.k,D.f,[2,F.a]],{color:[0,"color"]},null),t.Kb(3,1),(l()(),t.ub(4,0,null,0,5,"div",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(5,0,null,null,1,"icon",[["class","flex-none cb-margin-small-right"],["color","inherit"],["key","chevron-up"]],[[8,"className",0]],null,null,c.b,c.a)),t.tb(6,573440,null,0,b.a,[i.e,t.k],{key:[0,"key"],color:[1,"color"],class:[2,"class"]},null),(l()(),t.ub(7,0,null,null,2,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(8,null,["",""])),t.Kb(9,1)],function(l,e){l(e,2,0,"primary"),l(e,6,0,"chevron-up","inherit","flex-none cb-margin-small-right")},function(l,e){var n=t.Pb(e,1,0,l(e,3,0,t.Gb(e.parent.parent,0),"CBL.TIMELINE.HIDE"));l(e,1,0,n,t.Gb(e,2).disabled||null,"NoopAnimations"===t.Gb(e,2)._animationMode),l(e,5,0,t.Gb(e,6).classes);var u=t.Pb(e,8,0,l(e,9,0,t.Gb(e.parent.parent,0),"CBL.TIMELINE.HIDE"));l(e,8,0,u)})}function U(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,q)),t.tb(2,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,K)),t.tb(4,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(0,null,null,0))],function(l,e){var n=e.component;l(e,2,0,!n.showExtraActivities),l(e,4,0,n.showExtraActivities)},null)}function H(l){return t.Qb(0,[t.Ib(0,M.a,[p.a]),t.Ib(0,i.A,[]),(l()(),t.ub(2,0,null,null,14,"div",[["class","cb-margin-large-bottom cb-background-white mat-elevation-z2"]],null,null,null,null,null)),(l()(),t.ub(3,0,null,null,7,"div",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(4,0,null,null,2,"div",[["class","cb-padding-medium flex-none cb-line-height-none"]],[[4,"background-color",null]],null,null,null,null)),(l()(),t.ub(5,0,null,null,1,"theme-icon",[["color","light"]],null,null,null,s.b,s.a)),t.tb(6,638976,null,0,r.a,[t.k,o.a],{themeId:[0,"themeId"],color:[1,"color"]},null),(l()(),t.ub(7,0,null,null,3,"span",[["class","cb-padding-medium-left"]],null,null,null,null,null)),(l()(),t.Ob(8,null,[" "," (",") "])),t.Kb(9,1),t.Kb(10,1),(l()(),t.kb(16777216,null,null,1,null,B)),t.tb(12,278528,null,0,i.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"]},null),(l()(),t.kb(16777216,null,null,1,null,N)),t.tb(14,278528,null,0,i.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"]},null),(l()(),t.kb(16777216,null,null,1,null,U)),t.tb(16,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,6,0,n.activityGroup.themeId,"light"),l(e,12,0,n.visibleActivities),l(e,14,0,n.extraActivities),l(e,16,0,!!n.extraActivities.length)},function(l,e){var n=e.component;l(e,4,0,n.iconBackgroundColor);var u=t.Pb(e,8,0,l(e,10,0,t.Gb(e,0),"CBL.TIMELINE.ACTIVITY_NAMES."+t.Pb(e,8,0,l(e,9,0,t.Gb(e,1),n.activityGroup.entityDefId))));l(e,8,0,u,n.activityGroup.activities.length)})}var j=n("pdeR"),z=n("kALn"),$=n("6YJn"),J=n("Kfqh"),W=n("kAjB"),Y=n("QZuW"),X=n("EcxS"),Z=n("Z7++"),ll=n("cwgC"),el=n("iRHA"),nl=n("9va6");class tl{constructor(l,e,n){this.platformService=l,this.ngZone=e,this.elementRef=n,this.onScroll=new t.m}ngAfterContentInit(){this.platformService.isBrowser()&&(this.nativeElem=this.elementRef.nativeElement,this.addEventListener())}ngOnDestroy(){this.platformService.isBrowser()&&this.ngZone.runOutsideAngular(()=>{this.nativeElem.removeEventListener("scroll",this.regulatedOnScroll)})}addEventListener(){this.ngZone.runOutsideAngular(()=>{let l=()=>{let l=this.nativeElem.scrollTop;this.ngZone.run(()=>{this.onScroll.emit(l)})};this.regulatedOnScroll="throttle"===this.regulateExecutionBy?Object(nl.throttle)(l,this.wait):"debounce"===this.regulateExecutionBy?Object(nl.debounce)(l,this.wait):l,this.nativeElem.addEventListener("scroll",this.regulatedOnScroll)})}}var ul=n("pees");n("ldOK"),n("fSIr"),n("EwV0"),n("GKMj"),n("nkAL"),n("qk26"),n("sl8x"),n.d(e,"a",function(){return al}),n.d(e,"b",function(){return Ll});var al=t.sb({encapsulation:2,styles:[],data:{}});function il(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function sl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function rl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function ol(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,4,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(l,e,n){var u=!0;return"click"===e&&(u=!1!==t.Gb(l,1)._selectViaInteraction()&&u),"keydown"===e&&(u=!1!==t.Gb(l,1)._handleKeydown(n)&&u),u},u.e,u.b)),t.tb(1,8568832,[[12,4]],0,a.p,[t.k,t.h,[2,a.j],[2,a.o]],{value:[0,"value"]},null),(l()(),t.kb(16777216,null,0,2,null,rl)),t.tb(3,540672,null,0,i.w,[t.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),t.Jb(4,{canUserSelectActivityEntityDefId:0,activityEntityDefId:1})],function(l,e){var n=e.component;l(e,1,0,e.context.$implicit);var u=l(e,4,0,n.canUserSelectActivityEntityDefId,e.context.$implicit);l(e,3,0,u,t.Gb(e.parent,45))},function(l,e){l(e,0,0,t.Gb(e,1)._getTabIndex(),t.Gb(e,1).selected,t.Gb(e,1).multiple,t.Gb(e,1).active,t.Gb(e,1).id,t.Gb(e,1)._getAriaSelected(),t.Gb(e,1).disabled.toString(),t.Gb(e,1).disabled)})}function cl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"theme-icon",[["class","cb-margin-medium-right flex-none"],["size","large"]],null,null,null,s.b,s.a)),t.tb(1,638976,null,0,r.a,[t.k,o.a],{themeId:[0,"themeId"],size:[1,"size"]},null)],function(l,e){l(e,1,0,e.component.activityEntityDefThemes[e.parent.context.activityEntityDefId],"large")},null)}function bl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"icon",[["class","cb-margin-medium-right flex-none"],["key","all"],["size","large"]],[[8,"className",0]],null,null,c.b,c.a)),t.tb(1,573440,null,0,b.a,[i.e,t.k],{key:[0,"key"],size:[1,"size"],class:[2,"class"]},null)],function(l,e){l(e,1,0,"all","large","cb-margin-medium-right flex-none")},function(l,e){l(e,0,0,t.Gb(e,1).classes)})}function dl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"icon",[["class","cb-margin-medium-right flex-none"],["color","pro"],["key","pro"],["size","large"]],[[8,"className",0]],null,null,c.b,c.a)),t.tb(1,573440,null,0,b.a,[i.e,t.k],{key:[0,"key"],color:[1,"color"],size:[2,"size"],class:[3,"class"]},null)],function(l,e){l(e,1,0,"pro","pro","large","cb-margin-medium-right flex-none")},function(l,e){l(e,0,0,t.Gb(e,1).classes)})}function hl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,10,"div",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,cl)),t.tb(2,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,bl)),t.tb(4,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,dl)),t.tb(6,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ub(7,0,null,null,3,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(8,null,["",""])),t.Kb(9,1),t.Kb(10,1)],function(l,e){l(e,2,0,e.context.canUserSelectActivityEntityDefId&&"all"!==e.context.activityEntityDefId),l(e,4,0,"all"===e.context.activityEntityDefId),l(e,6,0,!e.context.canUserSelectActivityEntityDefId&&"all"!==e.context.activityEntityDefId)},function(l,e){var n=t.Pb(e,8,0,l(e,10,0,t.Gb(e.parent,0),"CBL.TIMELINE.ACTIVITY_NAMES."+t.Pb(e,8,0,l(e,9,0,t.Gb(e.parent,1),e.context.activityEntityDefId||"all"))));l(e,8,0,n)})}function ml(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),t.Ob(1,null,[" "," "])),t.Kb(2,1)],null,function(l,e){var n=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent,0),"CBL.COMMON.OOPS"));l(e,1,0,n)})}function pl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),t.Ob(1,null,[" "," "])),t.Kb(2,1)],null,function(l,e){var n=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent,0),"CBL.COMMON.PROBLEM"));l(e,1,0,n)})}function gl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),t.Ob(1,null,[" "," "])),t.Kb(2,1)],null,function(l,e){var n=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent,0),"CBL.TIMELINE.EMPTY_RESULTS_HEADER"));l(e,1,0,n)})}function fl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"activity-group-card",[],null,null,null,H,Q)),t.tb(1,114688,null,0,V.a,[o.a],{activityGroup:[0,"activityGroup"]},null)],function(l,e){l(e,1,0,e.parent.parent.parent.context.$implicit.activityGroups[e.parent.context.$implicit])},null)}function vl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,fl)),t.tb(2,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(0,null,null,0))],function(l,e){l(e,2,0,e.parent.parent.context.$implicit.activityGroups[e.context.$implicit])},null)}function yl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,vl)),t.tb(2,278528,null,0,i.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"]},null),(l()(),t.kb(0,null,null,0))],function(l,e){l(e,2,0,e.component.activityEntityDefIds)},null)}function Il(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,1,"activity-group-card",[],null,null,null,H,Q)),t.tb(1,114688,null,0,V.a,[o.a],{activityGroup:[0,"activityGroup"]},null)],function(l,e){l(e,1,0,e.parent.parent.context.$implicit.activityGroups[e.component.selectedActivityEntityDefId])},null)}function Sl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,Il)),t.tb(2,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(0,null,null,0))],function(l,e){l(e,2,0,e.parent.context.$implicit.activityGroups[e.component.selectedActivityEntityDefId])},null)}function kl(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,12,"div",[["class","layout-row layout-align-center-center"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,11,"div",[["class","flex-100 flex-gt-md-75"]],null,null,null,null,null)),(l()(),t.ub(2,0,null,null,5,"div",[["class","layout-row layout-align-center-center"]],null,null,null,null,null)),(l()(),t.ub(3,0,null,null,0,"div",[["class","cb-border-bottom cb-border-color-divider flex-grow"]],null,null,null,null,null)),(l()(),t.ub(4,0,null,null,2,"span",[["class","cb-font-weight-bold\n                             cb-text-color-medium\n                             cb-padding-large-horizontal\n                             flex-none"]],null,null,null,null,null)),(l()(),t.Ob(5,null,[" "," "])),t.Kb(6,2),(l()(),t.ub(7,0,null,null,0,"div",[["class","cb-border-bottom cb-border-color-divider flex-grow"]],null,null,null,null,null)),(l()(),t.ub(8,0,null,null,4,"div",[["class","cb-padding-xlarge-vertical"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,yl)),t.tb(10,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,Sl)),t.tb(12,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,10,0,"all"===n.selectedActivityEntityDefId||!n.canUserSelectActivityEntityDefId),l(e,12,0,"all"!==n.selectedActivityEntityDefId&&n.canUserSelectActivityEntityDefId)},function(l,e){var n=t.Pb(e,5,0,l(e,6,0,t.Gb(e.parent,2),e.context.$implicit.datetime,"fullDate"));l(e,5,0,n)})}function Ll(l){return t.Qb(0,[t.Ib(0,M.a,[p.a]),t.Ib(0,i.A,[]),t.Ib(0,i.f,[t.t]),t.Mb(402653184,1,{activitiesContainer:0}),t.Mb(402653184,2,{activitiesContent:0}),(l()(),t.ub(5,0,null,null,55,"div",[["class","component--timeline cb-relative flex layout-column"]],null,null,null,null,null)),(l()(),t.ub(6,0,null,null,54,"div",[["class","cb-relative layout-column flex"]],null,null,null,null,null)),(l()(),t.ub(7,0,null,null,39,"div",[["class","mat-elevation-z2 timeline-header flex-none layout-row layout-wrap layout-align-space-between-center cb-z-index-one-up cb-background-white"]],null,null,null,null,null)),(l()(),t.ub(8,0,null,null,1,"div",[["class","flex-noshrink flex-gt-sm-33 flex-order-1 layout-row layout-align-start-center"]],null,null,null,null,null)),t.Fb(null,0),(l()(),t.ub(10,0,null,null,36,"div",[["class","flex-noshrink flex-gt-sm-33 flex-order-3 layout-row layout-align-end-center"]],null,null,null,null,null)),(l()(),t.ub(11,0,null,null,34,"mat-form-field",[["class","cb-padding-large-right mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,j.b,j.a)),t.tb(12,7520256,null,9,z.c,[t.k,t.h,[2,a.h],[2,$.b],[2,z.a],J.a,t.y,[2,F.a]],null,null),t.Mb(603979776,3,{_controlNonStatic:0}),t.Mb(335544320,4,{_controlStatic:0}),t.Mb(603979776,5,{_labelChildNonStatic:0}),t.Mb(335544320,6,{_labelChildStatic:0}),t.Mb(603979776,7,{_placeholderChild:0}),t.Mb(603979776,8,{_errorChildren:1}),t.Mb(603979776,9,{_hintChildren:1}),t.Mb(603979776,10,{_prefixChildren:1}),t.Mb(603979776,11,{_suffixChildren:1}),(l()(),t.ub(22,0,null,1,23,"mat-select",[["class","cb-margin-medium-horizontal cb-font-size-default cb-font-weight-bold mat-select"],["role","listbox"]],[[1,"aria-label",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"ngModelChange"],[null,"selectionChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],function(l,e,n){var u=!0,a=l.component;return"keydown"===e&&(u=!1!==t.Gb(l,26)._handleKeydown(n)&&u),"focus"===e&&(u=!1!==t.Gb(l,26)._onFocus()&&u),"blur"===e&&(u=!1!==t.Gb(l,26)._onBlur()&&u),"ngModelChange"===e&&(u=!1!==(a.selectedActivityEntityDefId=n)&&u),"selectionChange"===e&&(u=!1!==a.changeSelectedActivityEntityDefId()&&u),u},W.b,W.a)),t.tb(23,671744,null,0,Y.x,[[8,null],[8,null],[8,null],[8,null]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),t.Lb(2048,null,Y.t,null,[Y.x]),t.tb(25,16384,null,0,Y.u,[[4,Y.t]],null,null),t.tb(26,2080768,null,3,X.c,[Z.e,t.h,t.y,a.b,t.k,[2,$.b],[2,Y.w],[2,Y.m],[2,z.c],[6,Y.t],[8,null],X.a,D.h],{disabled:[0,"disabled"]},{selectionChange:"selectionChange"}),t.Mb(603979776,12,{options:1}),t.Mb(603979776,13,{optionGroups:1}),t.Mb(603979776,14,{customTrigger:0}),t.Lb(2048,[[3,4],[4,4]],z.d,null,[X.c]),t.Lb(2048,null,a.j,null,[X.c]),t.Kb(32,1),(l()(),t.ub(33,0,null,0,4,"mat-select-trigger",[],null,null,null,null,null)),t.tb(34,16384,[[14,4]],0,X.e,[],null,null),(l()(),t.kb(16777216,null,null,2,null,il)),t.tb(36,540672,null,0,i.w,[t.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),t.Jb(37,{canUserSelectActivityEntityDefId:0,activityEntityDefId:1}),(l()(),t.ub(38,0,null,1,4,"mat-option",[["class","mat-option"],["role","option"],["value","all"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(l,e,n){var u=!0;return"click"===e&&(u=!1!==t.Gb(l,39)._selectViaInteraction()&&u),"keydown"===e&&(u=!1!==t.Gb(l,39)._handleKeydown(n)&&u),u},u.e,u.b)),t.tb(39,8568832,[[12,4]],0,a.p,[t.k,t.h,[2,a.j],[2,a.o]],{value:[0,"value"]},null),(l()(),t.kb(16777216,null,0,2,null,sl)),t.tb(41,540672,null,0,i.w,[t.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),t.Jb(42,{canUserSelectActivityEntityDefId:0,activityEntityDefId:1}),(l()(),t.kb(16777216,null,1,1,null,ol)),t.tb(44,278528,null,0,i.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"]},null),(l()(),t.kb(0,[["optionLayout",2]],1,0,null,hl)),t.Fb(null,1),(l()(),t.ub(47,0,null,null,7,"no-content",[],null,null,null,ll.b,ll.a)),t.tb(48,49152,null,0,el.a,[],{showLoading:[0,"showLoading"],showEmpty:[1,"showEmpty"]},null),(l()(),t.kb(16777216,null,0,1,null,ml)),t.tb(50,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,0,1,null,pl)),t.tb(52,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,0,1,null,gl)),t.tb(54,16384,null,0,i.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ub(55,0,null,null,5,"div",[["class","flex cb-relative"]],null,null,null,null,null)),(l()(),t.ub(56,0,[[1,0],["activitiesContainer",1]],null,4,"div",[["class","cb-absolute-to-cover cb-overflow-y-only cb-padding-xlarge"],["regulateExecutionBy","throttle"],["scrollNotifier",""],["wait","300"]],null,[[null,"onScroll"]],function(l,e,n){var t=!0;return"onScroll"===e&&(t=!1!==l.component.showMoreActivities(n)&&t),t},null,null)),t.tb(57,1196032,null,0,tl,[ul.a,t.y,t.k],{regulateExecutionBy:[0,"regulateExecutionBy"],wait:[1,"wait"]},{onScroll:"onScroll"}),(l()(),t.ub(58,0,[[2,0],["activitiesContent",1]],null,2,"div",[],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,kl)),t.tb(60,278528,null,0,i.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(l,e){var n=e.component;l(e,23,0,n.isLoading,n.selectedActivityEntityDefId),l(e,26,0,n.isLoading);var u=l(e,37,0,n.canUserSelectActivityEntityDefId,n.selectedActivityEntityDefId);l(e,36,0,u,t.Gb(e,45)),l(e,39,0,"all");var a=l(e,42,0,n.canUserSelectActivityEntityDefId,"all");l(e,41,0,a,t.Gb(e,45)),l(e,44,0,n.activityEntityDefIds),l(e,48,0,n.isLoading,!n.isLoading&&(0==n.activityDays.length&&n.hasLoadedResultsAtLeastOnce||n.hasErrorOnInitialLoad)),l(e,50,0,n.hasErrorOnInitialLoad),l(e,52,0,n.hasErrorOnInitialLoad),l(e,54,0,n.hasLoadedResultsAtLeastOnce),l(e,57,0,"throttle","300"),l(e,60,0,n.activityDays,n.trackByLastActivityTime)},function(l,e){l(e,11,1,["standard"==t.Gb(e,12).appearance,"fill"==t.Gb(e,12).appearance,"outline"==t.Gb(e,12).appearance,"legacy"==t.Gb(e,12).appearance,t.Gb(e,12)._control.errorState,t.Gb(e,12)._canLabelFloat,t.Gb(e,12)._shouldLabelFloat(),t.Gb(e,12)._hasFloatingLabel(),t.Gb(e,12)._hideControlPlaceholder(),t.Gb(e,12)._control.disabled,t.Gb(e,12)._control.autofilled,t.Gb(e,12)._control.focused,"accent"==t.Gb(e,12).color,"warn"==t.Gb(e,12).color,t.Gb(e,12)._shouldForward("untouched"),t.Gb(e,12)._shouldForward("touched"),t.Gb(e,12)._shouldForward("pristine"),t.Gb(e,12)._shouldForward("dirty"),t.Gb(e,12)._shouldForward("valid"),t.Gb(e,12)._shouldForward("invalid"),t.Gb(e,12)._shouldForward("pending"),!t.Gb(e,12)._animationsEnabled]);var n=t.Pb(e,22,0,l(e,32,0,t.Gb(e,0),"CBL.TIMELINE.SELECT_ACTIVITY_TYPE"));l(e,22,1,[n,t.Gb(e,25).ngClassUntouched,t.Gb(e,25).ngClassTouched,t.Gb(e,25).ngClassPristine,t.Gb(e,25).ngClassDirty,t.Gb(e,25).ngClassValid,t.Gb(e,25).ngClassInvalid,t.Gb(e,25).ngClassPending,t.Gb(e,26).id,t.Gb(e,26).tabIndex,t.Gb(e,26)._getAriaLabel(),t.Gb(e,26)._getAriaLabelledby(),t.Gb(e,26).required.toString(),t.Gb(e,26).disabled.toString(),t.Gb(e,26).errorState,t.Gb(e,26).panelOpen?t.Gb(e,26)._optionIds:null,t.Gb(e,26).multiple,t.Gb(e,26)._ariaDescribedby||null,t.Gb(e,26)._getAriaActiveDescendant(),t.Gb(e,26).disabled,t.Gb(e,26).errorState,t.Gb(e,26).required,t.Gb(e,26).empty]),l(e,38,0,t.Gb(e,39)._getTabIndex(),t.Gb(e,39).selected,t.Gb(e,39).multiple,t.Gb(e,39).active,t.Gb(e,39).id,t.Gb(e,39)._getAriaSelected(),t.Gb(e,39).disabled.toString(),t.Gb(e,39).disabled)})}},gb1R:function(l,e,n){"use strict";n.d(e,"a",function(){return u});var t=n("Mlb/");let u=(()=>{class l{constructor(){}downloadCSVData(e,n,t){let u=e+".csv",a=[this.getCsvData(n,t)],i=new Blob(a,{type:l.CSV_DATATYPE});if(navigator.msSaveBlob)return void navigator.msSaveBlob(i,u);let s=document.createElement("a");s.href=window.URL.createObjectURL(i),s.setAttribute("download",u),document.body.appendChild(s),s.click(),document.body.removeChild(s)}getCsvData(l,e){let n=this,t="";return l&&e?(t+=l.join(",")+"\n",e.forEach(function(e){t+=l.map(function(l){return n.escape(e[l])}).join(",")+"\n"}),t):t}escape(l){return((l=(l=(l=l||"").replace(/["]/g,'""')).replace(/[\n\r]+/g," ")).indexOf(",")>0||l.indexOf('"')>0)&&(l=['"',l,'"'].join("")),l}}return l.CSV_DATATYPE="text/csv;charset=utf-8;",l.ngInjectableDef=t.Ub({factory:function(){return new l},token:l,providedIn:"root"}),l})()},h092:function(l,e,n){"use strict";n.d(e,"a",function(){return C}),n.d(e,"b",function(){return Q});var t=n("Mlb/"),u=n("jmHW"),a=n("vk2e"),i=n("pk7F"),s=n("Ienz"),r=n("P6pJ"),o=n("dvHj"),c=n("9b0e"),b=n("Z7++"),d=n("Kfqh"),h=n("6YJn"),m=n("C0xW"),p=n("Htug"),g=n("nJV+"),f=n("m6lo"),v=n("ivOl"),y=n("sYue"),I=n("/q/h"),S=n("GKMj"),k=n("BRL0"),L=n("ba/H"),C=(n("5QIx"),n("qk26"),n("qFRT"),n("EwV0"),n("aWYc"),n("sl8x"),n("nkAL"),n("5EQ0"),n("Myyq"),n("Jt2c"),t.sb({encapsulation:2,styles:[],data:{}}));function E(l){return t.Qb(0,[(l()(),t.ub(0,16777216,null,null,9,"button",[["mat-icon-button",""]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(l,e,n){var u=!0,a=l.component;return"longpress"===e&&(u=!1!==t.Gb(l,5).show()&&u),"keydown"===e&&(u=!1!==t.Gb(l,5)._handleKeydown(n)&&u),"touchend"===e&&(u=!1!==t.Gb(l,5)._handleTouchend()&&u),"click"===e&&(u=!1!==a.toggleFiltersClicked()&&u),u},u.d,u.b)),t.Lb(512,null,a.E,a.F,[t.r,t.s,t.k,t.D]),t.tb(2,278528,null,0,a.n,[a.E],{ngClass:[0,"ngClass"]},null),t.Jb(3,{active:0}),t.tb(4,180224,null,0,i.b,[t.k,s.f,[2,r.a]],null,null),t.tb(5,212992,null,0,o.d,[c.c,t.k,b.b,t.P,t.y,d.a,s.c,s.f,o.b,[2,h.b],[2,o.a],[2,m.g]],{message:[0,"message"]},null),t.Kb(6,1),t.Kb(7,1),(l()(),t.ub(8,0,null,0,1,"icon",[["key","filter"]],[[8,"className",0]],null,null,p.b,p.a)),t.tb(9,573440,null,0,g.a,[a.e,t.k],{key:[0,"key"]},null),(l()(),t.kb(0,null,null,0))],function(l,e){var n=l(e,3,0,e.component.showFilters);l(e,2,0,n);var u=t.Pb(e,5,0,l(e,6,0,t.Gb(e.parent,0),"CBL.SEARCH.FILTER_TOOLTIP"));l(e,5,0,u),l(e,9,0,"filter")},function(l,e){var n=t.Pb(e,0,0,l(e,7,0,t.Gb(e.parent,0),"CBL.SEARCH.TOGGLE_FILTERS"));l(e,0,0,n,t.Gb(e,4).disabled||null,"NoopAnimations"===t.Gb(e,4)._animationMode),l(e,8,0,t.Gb(e,9).classes)})}function O(l){return t.Qb(0,[(l()(),t.ub(0,16777216,null,null,7,"button",[["aria-haspopup","true"],["class","mat-menu-trigger"],["mat-icon-button",""]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-expanded",0]],[[null,"mousedown"],[null,"keydown"],[null,"click"],[null,"longpress"],[null,"touchend"]],function(l,e,n){var u=!0;return"mousedown"===e&&(u=!1!==t.Gb(l,2)._handleMousedown(n)&&u),"keydown"===e&&(u=!1!==t.Gb(l,2)._handleKeydown(n)&&u),"click"===e&&(u=!1!==t.Gb(l,2)._handleClick(n)&&u),"longpress"===e&&(u=!1!==t.Gb(l,3).show()&&u),"keydown"===e&&(u=!1!==t.Gb(l,3)._handleKeydown(n)&&u),"touchend"===e&&(u=!1!==t.Gb(l,3)._handleTouchend()&&u),u},u.d,u.b)),t.tb(1,180224,null,0,i.b,[t.k,s.f,[2,r.a]],null,null),t.tb(2,1196032,null,0,f.h,[c.c,t.k,t.P,f.c,[2,f.d],[8,null],[2,h.b],s.f],{menu:[0,"menu"]},null),t.tb(3,212992,null,0,o.d,[c.c,t.k,b.b,t.P,t.y,d.a,s.c,s.f,o.b,[2,h.b],[2,o.a],[2,m.g]],{message:[0,"message"]},null),t.Kb(4,1),t.Kb(5,1),(l()(),t.ub(6,0,null,0,1,"icon",[["key","save"]],[[8,"className",0]],null,null,p.b,p.a)),t.tb(7,573440,null,0,g.a,[a.e,t.k],{key:[0,"key"]},null),(l()(),t.kb(0,null,null,0))],function(l,e){l(e,2,0,t.Gb(e.parent,10));var n=t.Pb(e,3,0,l(e,4,0,t.Gb(e.parent,0),"CBL.SEARCH.SAVE_TOOLTIP"));l(e,3,0,n),l(e,7,0,"save")},function(l,e){var n=t.Pb(e,0,0,l(e,5,0,t.Gb(e.parent,0),"CBL.LISTS.SAVE"));l(e,0,0,n,t.Gb(e,1).disabled||null,"NoopAnimations"===t.Gb(e,1)._animationMode,t.Gb(e,2).menuOpen||null),l(e,6,0,t.Gb(e,7).classes)})}function G(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,8,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"aria-label",0],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(l,e,n){var u=!0,a=l.component;return"click"===e&&(u=!1!==t.Gb(l,1)._checkDisabled(n)&&u),"mouseenter"===e&&(u=!1!==t.Gb(l,1)._handleMouseEnter()&&u),"click"===e&&(u=!1!==a.save(n)&&u),u},v.c,v.a)),t.tb(1,180224,[[1,4],[2,4]],0,f.f,[t.k,a.e,s.f,[2,f.b]],null,null),t.Kb(2,1),(l()(),t.ub(3,0,null,0,5,"span",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(4,0,null,null,1,"icon",[["class","flex-none cb-margin-small-right"],["key","save"],["size","large"]],[[8,"className",0]],null,null,p.b,p.a)),t.tb(5,573440,null,0,g.a,[a.e,t.k],{key:[0,"key"],size:[1,"size"],class:[2,"class"]},null),(l()(),t.ub(6,0,null,null,2,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(7,null,["",""])),t.Kb(8,1)],function(l,e){l(e,5,0,"save","large","flex-none cb-margin-small-right")},function(l,e){var n=t.Pb(e,0,0,l(e,2,0,t.Gb(e.parent,0),"CBL.LISTS.SAVE"));l(e,0,0,n,t.Gb(e,1).role,t.Gb(e,1)._highlighted,t.Gb(e,1)._triggersSubmenu,t.Gb(e,1)._getTabIndex(),t.Gb(e,1).disabled.toString(),t.Gb(e,1).disabled||null),l(e,4,0,t.Gb(e,5).classes);var u=t.Pb(e,7,0,l(e,8,0,t.Gb(e.parent,0),"CBL.LISTS.SAVE"));l(e,7,0,u)})}function P(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"upsell-button",[["featureSet","SAVE_AS"]],null,null,null,y.b,y.a)),t.tb(1,114688,null,0,I.a,[S.a],{label:[0,"label"],isMenuItem:[1,"isMenuItem"],featureSet:[2,"featureSet"]},null),t.Kb(2,1)],function(l,e){var n=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent,0),"CBL.LISTS.SAVE"));l(e,1,0,n,!0,"SAVE_AS")},null)}function w(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,8,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"aria-label",0],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(l,e,n){var u=!0,a=l.component;return"click"===e&&(u=!1!==t.Gb(l,1)._checkDisabled(n)&&u),"mouseenter"===e&&(u=!1!==t.Gb(l,1)._handleMouseEnter()&&u),"click"===e&&(u=!1!==a.saveAs(n)&&u),u},v.c,v.a)),t.tb(1,180224,[[1,4],[2,4]],0,f.f,[t.k,a.e,s.f,[2,f.b]],null,null),t.Kb(2,1),(l()(),t.ub(3,0,null,0,5,"span",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(4,0,null,null,1,"icon",[["class","flex-none cb-margin-small-right"],["key","save"],["size","large"]],[[8,"className",0]],null,null,p.b,p.a)),t.tb(5,573440,null,0,g.a,[a.e,t.k],{key:[0,"key"],size:[1,"size"],class:[2,"class"]},null),(l()(),t.ub(6,0,null,null,2,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(7,null,["",""])),t.Kb(8,1)],function(l,e){l(e,5,0,"save","large","flex-none cb-margin-small-right")},function(l,e){var n=t.Pb(e,0,0,l(e,2,0,t.Gb(e.parent,0),"CBL.LISTS.SAVE"));l(e,0,0,n,t.Gb(e,1).role,t.Gb(e,1)._highlighted,t.Gb(e,1)._triggersSubmenu,t.Gb(e,1)._getTabIndex(),t.Gb(e,1).disabled.toString(),t.Gb(e,1).disabled||null),l(e,4,0,t.Gb(e,5).classes);var u=t.Pb(e,7,0,l(e,8,0,t.Gb(e.parent,0),"CBL.LISTS.SAVE_AS"));l(e,7,0,u)})}function x(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"upsell-button",[["featureSet","SAVE_AS"]],null,null,null,y.b,y.a)),t.tb(1,114688,null,0,I.a,[S.a],{label:[0,"label"],isMenuItem:[1,"isMenuItem"],featureSet:[2,"featureSet"]},null),t.Kb(2,1)],function(l,e){var n=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent,0),"CBL.LISTS.SAVE_AS"));l(e,1,0,n,!0,"SAVE_AS")},null)}function _(l){return t.Qb(0,[(l()(),t.ub(0,16777216,null,null,5,"div",[["class","disabledShowWrapper cb-margin-medium-horizontal"]],null,[[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(l,e,n){var u=!0;return"longpress"===e&&(u=!1!==t.Gb(l,1).show()&&u),"keydown"===e&&(u=!1!==t.Gb(l,1)._handleKeydown(n)&&u),"touchend"===e&&(u=!1!==t.Gb(l,1)._handleTouchend()&&u),u},null,null)),t.tb(1,212992,null,0,o.d,[c.c,t.k,b.b,t.P,t.y,d.a,s.c,s.f,o.b,[2,h.b],[2,o.a],[2,m.g]],{message:[0,"message"]},null),t.Kb(2,1),(l()(),t.ub(3,0,null,null,2,"div",[["class","mat-icon-button layout-column layout-align-center-center"]],null,null,null,null,null)),(l()(),t.ub(4,0,null,null,1,"icon",[["key","save"]],[[8,"className",0]],null,null,p.b,p.a)),t.tb(5,573440,null,0,g.a,[a.e,t.k],{key:[0,"key"]},null),(l()(),t.kb(0,null,null,0))],function(l,e){var n=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent,0),"CBL.SEARCH.SAVE_DRILL_IN_TOOLTIP"));l(e,1,0,n),l(e,5,0,"save")},function(l,e){l(e,4,0,t.Gb(e,5).classes)})}function T(l){return t.Qb(0,[(l()(),t.ub(0,16777216,null,null,7,"button",[["aria-haspopup","true"],["class","mat-menu-trigger"],["mat-icon-button",""]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-expanded",0]],[[null,"mousedown"],[null,"keydown"],[null,"click"],[null,"longpress"],[null,"touchend"]],function(l,e,n){var u=!0;return"mousedown"===e&&(u=!1!==t.Gb(l,2)._handleMousedown(n)&&u),"keydown"===e&&(u=!1!==t.Gb(l,2)._handleKeydown(n)&&u),"click"===e&&(u=!1!==t.Gb(l,2)._handleClick(n)&&u),"longpress"===e&&(u=!1!==t.Gb(l,3).show()&&u),"keydown"===e&&(u=!1!==t.Gb(l,3)._handleKeydown(n)&&u),"touchend"===e&&(u=!1!==t.Gb(l,3)._handleTouchend()&&u),u},u.d,u.b)),t.tb(1,180224,null,0,i.b,[t.k,s.f,[2,r.a]],null,null),t.tb(2,1196032,null,0,f.h,[c.c,t.k,t.P,f.c,[2,f.d],[8,null],[2,h.b],s.f],{menu:[0,"menu"]},null),t.tb(3,212992,null,0,o.d,[c.c,t.k,b.b,t.P,t.y,d.a,s.c,s.f,o.b,[2,h.b],[2,o.a],[2,m.g]],{message:[0,"message"]},null),t.Kb(4,1),t.Kb(5,1),(l()(),t.ub(6,0,null,0,1,"icon",[["key","settings"]],[[8,"className",0]],null,null,p.b,p.a)),t.tb(7,573440,null,0,g.a,[a.e,t.k],{key:[0,"key"]},null),(l()(),t.kb(0,null,null,0))],function(l,e){l(e,2,0,t.Gb(e.parent,29));var n=t.Pb(e,3,0,l(e,4,0,t.Gb(e.parent,0),"CBL.SEARCH.SETTINGS_TOOLTIP"));l(e,3,0,n),l(e,7,0,"settings")},function(l,e){var n=t.Pb(e,0,0,l(e,5,0,t.Gb(e.parent,0),"CBL.COMMON.SETTINGS"));l(e,0,0,n,t.Gb(e,1).disabled||null,"NoopAnimations"===t.Gb(e,1)._animationMode,t.Gb(e,2).menuOpen||null),l(e,6,0,t.Gb(e,7).classes)})}function R(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,8,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"aria-label",0],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(l,e,n){var u=!0,a=l.component;return"click"===e&&(u=!1!==t.Gb(l,1)._checkDisabled(n)&&u),"mouseenter"===e&&(u=!1!==t.Gb(l,1)._handleMouseEnter()&&u),"click"===e&&(u=!1!==a.editList(n)&&u),u},v.c,v.a)),t.tb(1,180224,[[4,4],[5,4]],0,f.f,[t.k,a.e,s.f,[2,f.b]],null,null),t.Kb(2,1),(l()(),t.ub(3,0,null,0,5,"span",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(4,0,null,null,1,"icon",[["class","flex-none cb-margin-small-right"],["key","create"],["size","large"]],[[8,"className",0]],null,null,p.b,p.a)),t.tb(5,573440,null,0,g.a,[a.e,t.k],{key:[0,"key"],size:[1,"size"],class:[2,"class"]},null),(l()(),t.ub(6,0,null,null,2,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(7,null,["",""])),t.Kb(8,1)],function(l,e){l(e,5,0,"create","large","flex-none cb-margin-small-right")},function(l,e){var n=t.Pb(e,0,0,l(e,2,0,t.Gb(e.parent,0),"CBL.LISTS.EDIT_NAME_ALERTS"));l(e,0,0,n,t.Gb(e,1).role,t.Gb(e,1)._highlighted,t.Gb(e,1)._triggersSubmenu,t.Gb(e,1)._getTabIndex(),t.Gb(e,1).disabled.toString(),t.Gb(e,1).disabled||null),l(e,4,0,t.Gb(e,5).classes);var u=t.Pb(e,7,0,l(e,8,0,t.Gb(e.parent,0),"CBL.LISTS.EDIT_NAME_ALERTS"));l(e,7,0,u)})}function A(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"upsell-button",[["featureSet","LISTS"]],null,null,null,y.b,y.a)),t.tb(1,114688,null,0,I.a,[S.a],{label:[0,"label"],isMenuItem:[1,"isMenuItem"],featureSet:[2,"featureSet"]},null),t.Kb(2,1)],function(l,e){var n=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent,0),"CBL.LISTS.EDIT_NAME_ALERTS"));l(e,1,0,n,!0,"LISTS")},null)}function D(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,8,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"aria-label",0],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(l,e,n){var u=!0,a=l.component;return"click"===e&&(u=!1!==t.Gb(l,1)._checkDisabled(n)&&u),"mouseenter"===e&&(u=!1!==t.Gb(l,1)._handleMouseEnter()&&u),"click"===e&&(u=!1!==a.deleteList(n)&&u),u},v.c,v.a)),t.tb(1,180224,[[4,4],[5,4]],0,f.f,[t.k,a.e,s.f,[2,f.b]],null,null),t.Kb(2,1),(l()(),t.ub(3,0,null,0,5,"span",[["class","layout-row layout-align-start-center"]],null,null,null,null,null)),(l()(),t.ub(4,0,null,null,1,"icon",[["class","flex-none cb-margin-small-right"],["key","delete"],["size","large"]],[[8,"className",0]],null,null,p.b,p.a)),t.tb(5,573440,null,0,g.a,[a.e,t.k],{key:[0,"key"],size:[1,"size"],class:[2,"class"]},null),(l()(),t.ub(6,0,null,null,2,"span",[["class","flex"]],null,null,null,null,null)),(l()(),t.Ob(7,null,["",""])),t.Kb(8,1)],function(l,e){l(e,5,0,"delete","large","flex-none cb-margin-small-right")},function(l,e){var n=t.Pb(e,0,0,l(e,2,0,t.Gb(e.parent,0),"CBL.COMMON.DELETE"));l(e,0,0,n,t.Gb(e,1).role,t.Gb(e,1)._highlighted,t.Gb(e,1)._triggersSubmenu,t.Gb(e,1)._getTabIndex(),t.Gb(e,1).disabled.toString(),t.Gb(e,1).disabled||null),l(e,4,0,t.Gb(e,5).classes);var u=t.Pb(e,7,0,l(e,8,0,t.Gb(e.parent,0),"CBL.COMMON.DELETE"));l(e,7,0,u)})}function F(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,2,"upsell-button",[["featureSet","LISTS"]],null,null,null,y.b,y.a)),t.tb(1,114688,null,0,I.a,[S.a],{label:[0,"label"],isMenuItem:[1,"isMenuItem"],featureSet:[2,"featureSet"]},null),t.Kb(2,1)],function(l,e){var n=t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent,0),"CBL.COMMON.DELETE"));l(e,1,0,n,!0,"LISTS")},null)}function M(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,7,"button",[["color","primary"],["mat-button",""],["mat-raised-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.saveAs(n)&&t),t},u.d,u.b)),t.tb(1,180224,null,0,i.b,[t.k,s.f,[2,r.a]],{color:[0,"color"]},null),(l()(),t.ub(2,0,null,0,1,"icon",[["color","inherit"],["key","notifications_active"],["size","xlarge"]],[[8,"className",0]],null,null,p.b,p.a)),t.tb(3,573440,null,0,g.a,[a.e,t.k],{key:[0,"key"],color:[1,"color"],size:[2,"size"]},null),(l()(),t.ub(4,0,null,0,3,"span",[],null,null,null,null,null)),(l()(),t.Ob(5,null,[" "," "])),t.Kb(6,1),t.Kb(7,1)],function(l,e){l(e,1,0,"primary"),l(e,3,0,"notifications_active","inherit","xlarge")},function(l,e){l(e,0,0,t.Gb(e,1).disabled||null,"NoopAnimations"===t.Gb(e,1)._animationMode),l(e,2,0,t.Gb(e,3).classes);var n=t.Pb(e,5,0,l(e,7,0,t.Gb(e.parent,1),t.Pb(e,5,0,l(e,6,0,t.Gb(e.parent,0),"CBL.SEARCH.CREATE_ALERT"))));l(e,5,0,n)})}function V(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,3,"upsell-button",[["color","primary"],["featureSet","SAVE_AS"],["isRaised","true"]],null,null,null,y.b,y.a)),t.tb(1,114688,null,0,I.a,[S.a],{label:[0,"label"],featureSet:[1,"featureSet"],isRaised:[2,"isRaised"],color:[3,"color"]},null),t.Kb(2,1),t.Kb(3,1)],function(l,e){var n=t.Pb(e,1,0,l(e,3,0,t.Gb(e.parent,1),t.Pb(e,1,0,l(e,2,0,t.Gb(e.parent,0),"CBL.SEARCH.CREATE_ALERT"))));l(e,1,0,n,"SAVE_AS","true","primary")},null)}function Q(l){return t.Qb(0,[t.Ib(0,k.a,[L.a]),t.Ib(0,a.A,[]),(l()(),t.ub(2,0,null,null,42,"div",[["class","button-actions layout-row layout-align-center-center"]],null,null,null,null,null)),(l()(),t.kb(16777216,null,null,1,null,E)),t.tb(4,16384,null,0,a.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,O)),t.tb(6,16384,null,0,a.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ub(7,0,null,null,14,"mat-menu",[],null,null,null,v.d,v.b)),t.Lb(6144,null,f.d,null,[f.i]),t.Lb(6144,null,f.b,null,[f.d]),t.tb(10,1294336,[["saveMenu",4]],3,f.i,[t.k,t.y,f.a],{overlapTrigger:[0,"overlapTrigger"]},null),t.Mb(603979776,1,{_allItems:1}),t.Mb(603979776,2,{items:1}),t.Mb(603979776,3,{lazyContent:0}),(l()(),t.kb(16777216,null,0,1,null,G)),t.tb(15,16384,null,0,a.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,0,1,null,P)),t.tb(17,16384,null,0,a.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,0,1,null,w)),t.tb(19,16384,null,0,a.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,0,1,null,x)),t.tb(21,16384,null,0,a.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,_)),t.tb(23,16384,null,0,a.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,T)),t.tb(25,16384,null,0,a.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ub(26,0,null,null,14,"mat-menu",[],null,null,null,v.d,v.b)),t.Lb(6144,null,f.d,null,[f.i]),t.Lb(6144,null,f.b,null,[f.d]),t.tb(29,1294336,[["settingsMenu",4]],3,f.i,[t.k,t.y,f.a],{overlapTrigger:[0,"overlapTrigger"]},null),t.Mb(603979776,4,{_allItems:1}),t.Mb(603979776,5,{items:1}),t.Mb(603979776,6,{lazyContent:0}),(l()(),t.kb(16777216,null,0,1,null,R)),t.tb(34,16384,null,0,a.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,0,1,null,A)),t.tb(36,16384,null,0,a.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,0,1,null,D)),t.tb(38,16384,null,0,a.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,0,1,null,F)),t.tb(40,16384,null,0,a.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,M)),t.tb(42,16384,null,0,a.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,V)),t.tb(44,16384,null,0,a.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null)],function(l,e){var n=e.component;l(e,4,0,n.showFiltersButton),l(e,6,0,n.showSaveMenu()&&!n.readOnly),l(e,10,0,!1),l(e,15,0,n.showSaveButton()&&!n.upsellSaveButton()),l(e,17,0,n.showSaveButton()&&n.upsellSaveButton()),l(e,19,0,n.showSaveAsButton()&&!n.upsellSaveAsButton()),l(e,21,0,n.showSaveAsButton()&&n.upsellSaveAsButton()),l(e,23,0,!n.isSaveableCollection(n.collectionId)),l(e,25,0,n.showSettingsMenu()&&!n.readOnly),l(e,29,0,!1),l(e,34,0,n.list&&n.list.is_modifiable),l(e,36,0,n.list&&!n.list.is_modifiable),l(e,38,0,n.list&&n.list.is_modifiable),l(e,40,0,n.list&&!n.list.is_modifiable),l(e,42,0,n.showSaveAsButton()&&!n.showSaveButton()&&!n.upsellSaveAsButton()),l(e,44,0,n.showSaveAsButton()&&n.upsellSaveAsButton())},null)}}}]);